2025-12-04 10:39:04 [main] INFO  c.r.b.RestaurantBillingApplication - Starting RestaurantBillingApplication using Java 17.0.17 with PID 1090729 (/home/ubuntu/Documents/Mine/Restaurant-BE/build/classes/java/main started by ubuntu in /home/ubuntu/Documents/Mine/Restaurant-BE)
2025-12-04 10:39:04 [main] DEBUG c.r.b.RestaurantBillingApplication - Running with Spring Boot v3.3.10, Spring v6.1.18
2025-12-04 10:39:04 [main] INFO  c.r.b.RestaurantBillingApplication - No active profile set, falling back to 1 default profile: "default"
2025-12-04 10:39:05 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-04 10:39:05 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 50 ms. Found 14 JPA repository interfaces.
2025-12-04 10:39:05 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8881 (http)
2025-12-04 10:39:05 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-04 10:39:05 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-12-04 10:39:05 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-12-04 10:39:05 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1117 ms
2025-12-04 10:39:05 [main] ERROR o.s.b.w.e.tomcat.TomcatStarter - Error starting Tomcat context. Exception: org.springframework.beans.factory.UnsatisfiedDependencyException. Message: Error creating bean with name 'jwtAuthenticationFilter' defined in file [/home/ubuntu/Documents/Mine/Restaurant-BE/build/classes/java/main/com/restaurant/billing/security/JwtAuthenticationFilter.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'customUserDetailsService' defined in file [/home/ubuntu/Documents/Mine/Restaurant-BE/build/classes/java/main/com/restaurant/billing/service/CustomUserDetailsService.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'userRepository' defined in com.restaurant.billing.repository.UserRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Cannot resolve reference to bean 'jpaSharedEM_entityManagerFactory' while setting bean property 'entityManager'
2025-12-04 10:39:05 [main] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-12-04 10:39:05 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Unable to start web server
2025-12-04 10:39:05 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-12-04 10:39:05 [main] ERROR o.s.b.d.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Failed to configure a DataSource: 'url' attribute is not specified and no embedded datasource could be configured.

Reason: Failed to determine a suitable driver class


Action:

Consider the following:
	If you want an embedded database (H2, HSQL or Derby), please put it on the classpath.
	If you have database settings to be loaded from a particular profile you may need to activate it (no profiles are currently active).

2025-12-04 10:39:35 [main] INFO  c.r.b.RestaurantBillingApplication - Starting RestaurantBillingApplication using Java 17.0.17 with PID 1091763 (/home/ubuntu/Documents/Mine/Restaurant-BE/build/classes/java/main started by ubuntu in /home/ubuntu/Documents/Mine/Restaurant-BE)
2025-12-04 10:39:35 [main] DEBUG c.r.b.RestaurantBillingApplication - Running with Spring Boot v3.3.10, Spring v6.1.18
2025-12-04 10:39:35 [main] INFO  c.r.b.RestaurantBillingApplication - No active profile set, falling back to 1 default profile: "default"
2025-12-04 10:39:35 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-04 10:39:35 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 40 ms. Found 14 JPA repository interfaces.
2025-12-04 10:39:36 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8881 (http)
2025-12-04 10:39:36 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-04 10:39:36 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-12-04 10:39:36 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-12-04 10:39:36 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 922 ms
2025-12-04 10:39:36 [main] ERROR o.s.b.w.e.tomcat.TomcatStarter - Error starting Tomcat context. Exception: org.springframework.beans.factory.UnsatisfiedDependencyException. Message: Error creating bean with name 'jwtAuthenticationFilter' defined in file [/home/ubuntu/Documents/Mine/Restaurant-BE/build/classes/java/main/com/restaurant/billing/security/JwtAuthenticationFilter.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'customUserDetailsService' defined in file [/home/ubuntu/Documents/Mine/Restaurant-BE/build/classes/java/main/com/restaurant/billing/service/CustomUserDetailsService.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'userRepository' defined in com.restaurant.billing.repository.UserRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Cannot resolve reference to bean 'jpaSharedEM_entityManagerFactory' while setting bean property 'entityManager'
2025-12-04 10:39:36 [main] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-12-04 10:39:36 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Unable to start web server
2025-12-04 10:39:36 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-12-04 10:39:36 [main] ERROR o.s.b.d.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Failed to configure a DataSource: 'url' attribute is not specified and no embedded datasource could be configured.

Reason: Failed to determine a suitable driver class


Action:

Consider the following:
	If you want an embedded database (H2, HSQL or Derby), please put it on the classpath.
	If you have database settings to be loaded from a particular profile you may need to activate it (no profiles are currently active).

2025-12-04 10:40:26 [main] INFO  c.r.b.RestaurantBillingApplication - Starting RestaurantBillingApplication using Java 17.0.17 with PID 1092867 (/home/ubuntu/Documents/Mine/Restaurant-BE/build/classes/java/main started by ubuntu in /home/ubuntu/Documents/Mine/Restaurant-BE)
2025-12-04 10:40:26 [main] DEBUG c.r.b.RestaurantBillingApplication - Running with Spring Boot v3.3.10, Spring v6.1.18
2025-12-04 10:40:26 [main] INFO  c.r.b.RestaurantBillingApplication - No active profile set, falling back to 1 default profile: "default"
2025-12-04 10:40:27 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-04 10:40:27 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 43 ms. Found 14 JPA repository interfaces.
2025-12-04 10:40:27 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8881 (http)
2025-12-04 10:40:27 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-04 10:40:27 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-12-04 10:40:27 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-12-04 10:40:27 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 965 ms
2025-12-04 10:40:28 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-04 10:40:28 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.3.Final
2025-12-04 10:40:28 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-12-04 10:40:28 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-04 10:40:28 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-12-04 10:40:28 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@2c154508
2025-12-04 10:40:28 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-12-04 10:40:28 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-04 10:40:29 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-04 10:40:29 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-04 10:40:30 [main] DEBUG c.r.b.s.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-12-04 10:40:30 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-04 10:40:31 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-12-04 10:40:31 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 42 mappings in 'requestMappingHandlerMapping'
2025-12-04 10:40:31 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /uploads/**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-12-04 10:40:31 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-04 10:40:31 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-04 10:40:31 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-04 10:40:31 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8881 (http) with context path '/'
2025-12-04 10:40:31 [main] INFO  c.r.b.RestaurantBillingApplication - Started RestaurantBillingApplication in 5.051 seconds (process running for 5.222)
2025-12-04 10:40:39 [http-nio-8881-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-04 10:40:39 [http-nio-8881-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-12-04 10:40:39 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-12-04 10:40:39 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-12-04 10:40:39 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-12-04 10:40:39 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@5e4168dd
2025-12-04 10:40:39 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@3c809ee7
2025-12-04 10:40:39 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-12-04 10:40:39 [http-nio-8881-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-12-04 10:40:39 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/auth/login
2025-12-04 10:40:39 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-12-04 10:40:39 [http-nio-8881-exec-2] ERROR c.r.billing.security.JwtUtil - Invalid JWT token: JWT expired at 2025-12-03T13:13:21Z. Current time: 2025-12-04T05:10:39Z, a difference of 57438270 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-12-04 10:40:39 [http-nio-8881-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-04 10:40:39 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-12-04 10:40:39 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-12-04 10:40:39 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.AuthController#login(LoginRequest)
2025-12-04 10:40:39 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(restaurantCode=REST14DAA490, username=Ganesh@gmail.com, password=Rest@1234)]
2025-12-04 10:40:39 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.restaurant_code=?
2025-12-04 10:40:39 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=? 
        and u1_0.tenant_id=?
2025-12-04 10:40:39 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    update
        public.users 
    set
        auth_provider=?,
        email=?,
        google_id=?,
        is_active=?,
        last_login=?,
        name=?,
        password_hash=?,
        phone=?,
        refresh_token=?,
        refresh_token_expiry=?,
        role=?,
        tenant_id=?,
        updated_at=? 
    where
        id=?
2025-12-04 10:40:39 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:40:39 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiT1dORVIiLCJ0ZW5hbnRJZCI6ImNjNzFkN2U0LWNmNj (truncated)...]
2025-12-04 10:40:39 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:40:39 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/today-sales
2025-12-04 10:40:39 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/pending-payments
2025-12-04 10:40:39 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/active-orders
2025-12-04 10:40:39 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/tables-occupied
2025-12-04 10:40:39 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/stats
2025-12-04 10:40:39 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/today-sales
2025-12-04 10:40:39 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/stats
2025-12-04 10:40:39 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/tables-occupied
2025-12-04 10:40:39 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/pending-payments
2025-12-04 10:40:39 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/active-orders
2025-12-04 10:40:39 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:40:39 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:40:39 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:40:39 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:40:39 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:40:39 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/tables-occupied
2025-12-04 10:40:39 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/stats
2025-12-04 10:40:39 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/today-sales
2025-12-04 10:40:39 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/active-orders
2025-12-04 10:40:39 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/pending-payments
2025-12-04 10:40:39 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/tables-occupied", parameters={}
2025-12-04 10:40:39 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/today-sales", parameters={}
2025-12-04 10:40:39 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/active-orders", parameters={}
2025-12-04 10:40:39 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/stats", parameters={}
2025-12-04 10:40:39 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/pending-payments", parameters={}
2025-12-04 10:40:39 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getPendingPayments()
2025-12-04 10:40:39 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTodaySales()
2025-12-04 10:40:39 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getActiveOrders()
2025-12-04 10:40:39 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTablesOccupied()
2025-12-04 10:40:39 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getDashboardStats()
2025-12-04 10:40:39 [http-nio-8881-exec-8] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:40:39 [http-nio-8881-exec-9] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:40:39 [http-nio-8881-exec-10] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:40:39 [http-nio-8881-exec-1] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:40:39 [http-nio-8881-exec-2] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:40:39 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 10:40:39 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:40:39 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 10:40:39 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:40:39 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 10:40:39 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:40:39 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:40:39 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:40:39 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 10:40:39 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:40:39 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 10:40:39 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:40:39 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:40:39 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 10:40:39 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:40:39 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{amount=0}]
2025-12-04 10:40:39 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:40:39 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 10:40:39 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:40:39 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 10:40:39 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:40:39 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{activeOrders=0, pendingPayments=0, tablesOccupied=0, todaySales=0}]
2025-12-04 10:40:39 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:40:39 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/orders
2025-12-04 10:40:39 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/orders
2025-12-04 10:40:39 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:40:39 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/orders
2025-12-04 10:40:39 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/orders", parameters={}
2025-12-04 10:40:39 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#getAllOrders()
2025-12-04 10:40:39 [http-nio-8881-exec-5] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:40:39 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:40:40 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:40:40 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:40:40 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:40:40 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:40:40 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:40:40 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[OrderDto(id=3d2cc165-482d-4290-b220-105d1ad18880, orderNumber=ORD1764763565538, tableId=null, table (truncated)...]
2025-12-04 10:40:40 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:40:44 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/orders
2025-12-04 10:40:44 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:40:44 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/orders
2025-12-04 10:40:44 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/orders", parameters={}
2025-12-04 10:40:44 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#getAllOrders()
2025-12-04 10:40:44 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:40:44 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:40:44 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:40:44 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:40:44 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:40:44 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:40:44 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:40:44 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[OrderDto(id=3d2cc165-482d-4290-b220-105d1ad18880, orderNumber=ORD1764763565538, tableId=null, table (truncated)...]
2025-12-04 10:40:44 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:40:45 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/menu
2025-12-04 10:40:45 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/menu
2025-12-04 10:40:45 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:40:45 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/menu
2025-12-04 10:40:45 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/menu", parameters={}
2025-12-04 10:40:45 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.MenuController#getAllMenuItems()
2025-12-04 10:40:45 [http-nio-8881-exec-7] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:40:45 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        mi1_0.id,
        mi1_0.category_id,
        mi1_0.created_at,
        mi1_0.description,
        mi1_0.device_id,
        mi1_0.image_path,
        mi1_0.is_available,
        mi1_0.is_deleted,
        mi1_0.is_veg,
        mi1_0.name,
        mi1_0.preparation_time,
        mi1_0.price,
        mi1_0.synced_at,
        mi1_0.tenant_id,
        mi1_0.updated_at,
        mi1_0.version 
    from
        public.menu_items mi1_0 
    where
        mi1_0.tenant_id=? 
        and mi1_0.is_deleted=?
2025-12-04 10:40:45 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:40:45 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[MenuItemDto(id=8a5577b8-36d5-4a3d-9299-903f009a42b9, categoryId=6ed45abe-f8f6-4966-8126-a3f0d0bd0aa (truncated)...]
2025-12-04 10:40:45 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:40:45 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/categories?activeOnly=true
2025-12-04 10:40:45 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/categories?activeOnly=true
2025-12-04 10:40:45 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:40:45 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/categories?activeOnly=true
2025-12-04 10:40:45 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/categories?activeOnly=true", parameters={masked}
2025-12-04 10:40:45 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.CategoryController#getAllCategories(UserDetails, Boolean)
2025-12-04 10:40:45 [http-nio-8881-exec-9] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:40:45 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:40:45 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.display_order,
        c1_0.is_active,
        c1_0.name,
        c1_0.tenant_id,
        c1_0.updated_at 
    from
        public.categories c1_0 
    where
        c1_0.tenant_id=? 
        and c1_0.is_active=? 
    order by
        c1_0.display_order
2025-12-04 10:40:45 [http-nio-8881-exec-9] DEBUG c.r.billing.service.CategoryService - Found 1 categories for tenant cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:40:45 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:40:45 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[CategoryDto(id=6ed45abe-f8f6-4966-8126-a3f0d0bd0aaa, name=Main course, displayOrder=1)]]
2025-12-04 10:40:45 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:40:47 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/reports/day-wise?startDate=2025-11-27T10%3A40%3A47.164&endDate=2025-12-04T10%3A40%3A47.164
2025-12-04 10:40:47 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/reports/day-wise?startDate=2025-11-27T10%3A40%3A47.164&endDate=2025-12-04T10%3A40%3A47.164
2025-12-04 10:40:47 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:40:47 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/reports/day-wise?startDate=2025-11-27T10%3A40%3A47.164&endDate=2025-12-04T10%3A40%3A47.164
2025-12-04 10:40:47 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/day-wise?startDate=2025-11-27T10%3A40%3A47.164&endDate=2025-12-04T10%3A40%3A47.164", parameters={masked}
2025-12-04 10:40:47 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.ReportController#getDayWiseSales(LocalDateTime, LocalDateTime)
2025-12-04 10:40:47 [http-nio-8881-exec-8] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:40:47 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 10:40:47 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:40:47 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[{date=2025-12-03, totalSales=0}]]
2025-12-04 10:40:47 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:40:47 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/reports/product-wise?startDate=2025-11-27T10%3A40%3A47.164&endDate=2025-12-04T10%3A40%3A47.164
2025-12-04 10:40:47 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/reports/product-wise?startDate=2025-11-27T10%3A40%3A47.164&endDate=2025-12-04T10%3A40%3A47.164
2025-12-04 10:40:47 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:40:47 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/reports/product-wise?startDate=2025-11-27T10%3A40%3A47.164&endDate=2025-12-04T10%3A40%3A47.164
2025-12-04 10:40:47 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/product-wise?startDate=2025-11-27T10%3A40%3A47.164&endDate=2025-12-04T10%3A40%3A47.164", parameters={masked}
2025-12-04 10:40:47 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.ReportController#getProductWiseSales(LocalDateTime, LocalDateTime)
2025-12-04 10:40:47 [http-nio-8881-exec-3] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:40:47 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        oi1_0.menu_item_id,
        oi1_0.item_name,
        sum(oi1_0.quantity),
        sum(oi1_0.total_price) 
    from
        public.order_items oi1_0 
    join
        public.orders o1_0 
            on o1_0.id=oi1_0.order_id 
    where
        o1_0.tenant_id=? 
        and o1_0.created_at between ? and ? 
    group by
        oi1_0.menu_item_id,
        oi1_0.item_name 
    order by
        sum(oi1_0.total_price) desc
2025-12-04 10:40:47 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:40:47 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[{menuItemId=8a5577b8-36d5-4a3d-9299-903f009a42b9, itemName=TEA, totalQuantity=9, totalRevenue=135.0 (truncated)...]
2025-12-04 10:40:47 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:40:48 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/reports/day-wise?startDate=2025-12-04T00%3A00%3A00.000&endDate=2025-12-04T10%3A40%3A48.837
2025-12-04 10:40:48 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/reports/day-wise?startDate=2025-12-04T00%3A00%3A00.000&endDate=2025-12-04T10%3A40%3A48.837
2025-12-04 10:40:48 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:40:48 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/reports/day-wise?startDate=2025-12-04T00%3A00%3A00.000&endDate=2025-12-04T10%3A40%3A48.837
2025-12-04 10:40:48 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/day-wise?startDate=2025-12-04T00%3A00%3A00.000&endDate=2025-12-04T10%3A40%3A48.837", parameters={masked}
2025-12-04 10:40:48 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.ReportController#getDayWiseSales(LocalDateTime, LocalDateTime)
2025-12-04 10:40:48 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:40:48 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 10:40:48 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:40:48 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-12-04 10:40:48 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:40:48 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/reports/product-wise?startDate=2025-12-04T00%3A00%3A00.000&endDate=2025-12-04T10%3A40%3A48.837
2025-12-04 10:40:48 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/reports/product-wise?startDate=2025-12-04T00%3A00%3A00.000&endDate=2025-12-04T10%3A40%3A48.837
2025-12-04 10:40:48 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:40:48 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/reports/product-wise?startDate=2025-12-04T00%3A00%3A00.000&endDate=2025-12-04T10%3A40%3A48.837
2025-12-04 10:40:48 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/product-wise?startDate=2025-12-04T00%3A00%3A00.000&endDate=2025-12-04T10%3A40%3A48.837", parameters={masked}
2025-12-04 10:40:48 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.ReportController#getProductWiseSales(LocalDateTime, LocalDateTime)
2025-12-04 10:40:48 [http-nio-8881-exec-7] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:40:48 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        oi1_0.menu_item_id,
        oi1_0.item_name,
        sum(oi1_0.quantity),
        sum(oi1_0.total_price) 
    from
        public.order_items oi1_0 
    join
        public.orders o1_0 
            on o1_0.id=oi1_0.order_id 
    where
        o1_0.tenant_id=? 
        and o1_0.created_at between ? and ? 
    group by
        oi1_0.menu_item_id,
        oi1_0.item_name 
    order by
        sum(oi1_0.total_price) desc
2025-12-04 10:40:48 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:40:48 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-12-04 10:40:48 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:40:50 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/reports/day-wise?startDate=2025-11-27T10%3A40%3A50.468&endDate=2025-12-04T10%3A40%3A50.468
2025-12-04 10:40:50 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/reports/day-wise?startDate=2025-11-27T10%3A40%3A50.468&endDate=2025-12-04T10%3A40%3A50.468
2025-12-04 10:40:50 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:40:50 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/reports/day-wise?startDate=2025-11-27T10%3A40%3A50.468&endDate=2025-12-04T10%3A40%3A50.468
2025-12-04 10:40:50 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/day-wise?startDate=2025-11-27T10%3A40%3A50.468&endDate=2025-12-04T10%3A40%3A50.468", parameters={masked}
2025-12-04 10:40:50 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.ReportController#getDayWiseSales(LocalDateTime, LocalDateTime)
2025-12-04 10:40:50 [http-nio-8881-exec-9] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:40:50 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 10:40:50 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:40:50 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[{date=2025-12-03, totalSales=0}]]
2025-12-04 10:40:50 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:40:50 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/reports/product-wise?startDate=2025-11-27T10%3A40%3A50.468&endDate=2025-12-04T10%3A40%3A50.468
2025-12-04 10:40:50 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/reports/product-wise?startDate=2025-11-27T10%3A40%3A50.468&endDate=2025-12-04T10%3A40%3A50.468
2025-12-04 10:40:50 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:40:50 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/reports/product-wise?startDate=2025-11-27T10%3A40%3A50.468&endDate=2025-12-04T10%3A40%3A50.468
2025-12-04 10:40:50 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/product-wise?startDate=2025-11-27T10%3A40%3A50.468&endDate=2025-12-04T10%3A40%3A50.468", parameters={masked}
2025-12-04 10:40:50 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.ReportController#getProductWiseSales(LocalDateTime, LocalDateTime)
2025-12-04 10:40:50 [http-nio-8881-exec-8] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:40:50 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        oi1_0.menu_item_id,
        oi1_0.item_name,
        sum(oi1_0.quantity),
        sum(oi1_0.total_price) 
    from
        public.order_items oi1_0 
    join
        public.orders o1_0 
            on o1_0.id=oi1_0.order_id 
    where
        o1_0.tenant_id=? 
        and o1_0.created_at between ? and ? 
    group by
        oi1_0.menu_item_id,
        oi1_0.item_name 
    order by
        sum(oi1_0.total_price) desc
2025-12-04 10:40:50 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:40:50 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[{menuItemId=8a5577b8-36d5-4a3d-9299-903f009a42b9, itemName=TEA, totalQuantity=9, totalRevenue=135.0 (truncated)...]
2025-12-04 10:40:50 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:41:25 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/reports/day-wise?startDate=2025-12-01T00%3A00%3A00.000&endDate=2025-12-04T10%3A41%3A25.718
2025-12-04 10:41:25 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/reports/day-wise?startDate=2025-12-01T00%3A00%3A00.000&endDate=2025-12-04T10%3A41%3A25.718
2025-12-04 10:41:25 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:41:25 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/reports/day-wise?startDate=2025-12-01T00%3A00%3A00.000&endDate=2025-12-04T10%3A41%3A25.718
2025-12-04 10:41:25 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/day-wise?startDate=2025-12-01T00%3A00%3A00.000&endDate=2025-12-04T10%3A41%3A25.718", parameters={masked}
2025-12-04 10:41:25 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.ReportController#getDayWiseSales(LocalDateTime, LocalDateTime)
2025-12-04 10:41:25 [http-nio-8881-exec-3] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:41:25 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 10:41:25 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:41:25 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[{date=2025-12-03, totalSales=0}]]
2025-12-04 10:41:25 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:41:25 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/reports/product-wise?startDate=2025-12-01T00%3A00%3A00.000&endDate=2025-12-04T10%3A41%3A25.718
2025-12-04 10:41:25 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/reports/product-wise?startDate=2025-12-01T00%3A00%3A00.000&endDate=2025-12-04T10%3A41%3A25.718
2025-12-04 10:41:25 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:41:25 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/reports/product-wise?startDate=2025-12-01T00%3A00%3A00.000&endDate=2025-12-04T10%3A41%3A25.718
2025-12-04 10:41:25 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/product-wise?startDate=2025-12-01T00%3A00%3A00.000&endDate=2025-12-04T10%3A41%3A25.718", parameters={masked}
2025-12-04 10:41:25 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.ReportController#getProductWiseSales(LocalDateTime, LocalDateTime)
2025-12-04 10:41:25 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:41:25 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        oi1_0.menu_item_id,
        oi1_0.item_name,
        sum(oi1_0.quantity),
        sum(oi1_0.total_price) 
    from
        public.order_items oi1_0 
    join
        public.orders o1_0 
            on o1_0.id=oi1_0.order_id 
    where
        o1_0.tenant_id=? 
        and o1_0.created_at between ? and ? 
    group by
        oi1_0.menu_item_id,
        oi1_0.item_name 
    order by
        sum(oi1_0.total_price) desc
2025-12-04 10:41:25 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:41:25 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[{menuItemId=8a5577b8-36d5-4a3d-9299-903f009a42b9, itemName=TEA, totalQuantity=9, totalRevenue=135.0 (truncated)...]
2025-12-04 10:41:25 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:41:26 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/reports/day-wise?startDate=2025-11-27T10%3A41%3A26.365&endDate=2025-12-04T10%3A41%3A26.365
2025-12-04 10:41:26 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/reports/day-wise?startDate=2025-11-27T10%3A41%3A26.365&endDate=2025-12-04T10%3A41%3A26.365
2025-12-04 10:41:26 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:41:26 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/reports/day-wise?startDate=2025-11-27T10%3A41%3A26.365&endDate=2025-12-04T10%3A41%3A26.365
2025-12-04 10:41:26 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/day-wise?startDate=2025-11-27T10%3A41%3A26.365&endDate=2025-12-04T10%3A41%3A26.365", parameters={masked}
2025-12-04 10:41:26 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.ReportController#getDayWiseSales(LocalDateTime, LocalDateTime)
2025-12-04 10:41:26 [http-nio-8881-exec-7] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:41:26 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 10:41:26 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:41:26 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[{date=2025-12-03, totalSales=0}]]
2025-12-04 10:41:26 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:41:26 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/reports/product-wise?startDate=2025-11-27T10%3A41%3A26.365&endDate=2025-12-04T10%3A41%3A26.365
2025-12-04 10:41:26 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/reports/product-wise?startDate=2025-11-27T10%3A41%3A26.365&endDate=2025-12-04T10%3A41%3A26.365
2025-12-04 10:41:26 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:41:26 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/reports/product-wise?startDate=2025-11-27T10%3A41%3A26.365&endDate=2025-12-04T10%3A41%3A26.365
2025-12-04 10:41:26 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/product-wise?startDate=2025-11-27T10%3A41%3A26.365&endDate=2025-12-04T10%3A41%3A26.365", parameters={masked}
2025-12-04 10:41:26 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.ReportController#getProductWiseSales(LocalDateTime, LocalDateTime)
2025-12-04 10:41:26 [http-nio-8881-exec-9] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:41:26 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        oi1_0.menu_item_id,
        oi1_0.item_name,
        sum(oi1_0.quantity),
        sum(oi1_0.total_price) 
    from
        public.order_items oi1_0 
    join
        public.orders o1_0 
            on o1_0.id=oi1_0.order_id 
    where
        o1_0.tenant_id=? 
        and o1_0.created_at between ? and ? 
    group by
        oi1_0.menu_item_id,
        oi1_0.item_name 
    order by
        sum(oi1_0.total_price) desc
2025-12-04 10:41:26 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:41:26 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[{menuItemId=8a5577b8-36d5-4a3d-9299-903f009a42b9, itemName=TEA, totalQuantity=9, totalRevenue=135.0 (truncated)...]
2025-12-04 10:41:26 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:41:33 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/reports/day-wise?startDate=2025-12-01T00%3A00%3A00.000&endDate=2025-12-04T10%3A41%3A33.774
2025-12-04 10:41:33 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/reports/day-wise?startDate=2025-12-01T00%3A00%3A00.000&endDate=2025-12-04T10%3A41%3A33.774
2025-12-04 10:41:33 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:41:33 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/reports/day-wise?startDate=2025-12-01T00%3A00%3A00.000&endDate=2025-12-04T10%3A41%3A33.774
2025-12-04 10:41:33 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/day-wise?startDate=2025-12-01T00%3A00%3A00.000&endDate=2025-12-04T10%3A41%3A33.774", parameters={masked}
2025-12-04 10:41:33 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.ReportController#getDayWiseSales(LocalDateTime, LocalDateTime)
2025-12-04 10:41:33 [http-nio-8881-exec-8] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:41:33 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 10:41:33 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:41:33 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[{date=2025-12-03, totalSales=0}]]
2025-12-04 10:41:33 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:41:33 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/reports/product-wise?startDate=2025-12-01T00%3A00%3A00.000&endDate=2025-12-04T10%3A41%3A33.774
2025-12-04 10:41:33 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/reports/product-wise?startDate=2025-12-01T00%3A00%3A00.000&endDate=2025-12-04T10%3A41%3A33.774
2025-12-04 10:41:33 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:41:33 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/reports/product-wise?startDate=2025-12-01T00%3A00%3A00.000&endDate=2025-12-04T10%3A41%3A33.774
2025-12-04 10:41:33 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/product-wise?startDate=2025-12-01T00%3A00%3A00.000&endDate=2025-12-04T10%3A41%3A33.774", parameters={masked}
2025-12-04 10:41:33 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.ReportController#getProductWiseSales(LocalDateTime, LocalDateTime)
2025-12-04 10:41:33 [http-nio-8881-exec-3] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:41:33 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        oi1_0.menu_item_id,
        oi1_0.item_name,
        sum(oi1_0.quantity),
        sum(oi1_0.total_price) 
    from
        public.order_items oi1_0 
    join
        public.orders o1_0 
            on o1_0.id=oi1_0.order_id 
    where
        o1_0.tenant_id=? 
        and o1_0.created_at between ? and ? 
    group by
        oi1_0.menu_item_id,
        oi1_0.item_name 
    order by
        sum(oi1_0.total_price) desc
2025-12-04 10:41:33 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:41:33 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[{menuItemId=8a5577b8-36d5-4a3d-9299-903f009a42b9, itemName=TEA, totalQuantity=9, totalRevenue=135.0 (truncated)...]
2025-12-04 10:41:33 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:44:02 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/orders
2025-12-04 10:44:02 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:44:02 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/orders
2025-12-04 10:44:02 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/orders", parameters={}
2025-12-04 10:44:02 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#getAllOrders()
2025-12-04 10:44:02 [http-nio-8881-exec-9] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:44:02 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:44:02 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:44:02 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:44:02 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:44:02 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:44:02 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:44:02 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[OrderDto(id=3d2cc165-482d-4290-b220-105d1ad18880, orderNumber=ORD1764763565538, tableId=null, table (truncated)...]
2025-12-04 10:44:02 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:44:04 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/menu
2025-12-04 10:44:04 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:44:04 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/menu
2025-12-04 10:44:04 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/menu", parameters={}
2025-12-04 10:44:04 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.MenuController#getAllMenuItems()
2025-12-04 10:44:04 [http-nio-8881-exec-10] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:44:04 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        mi1_0.id,
        mi1_0.category_id,
        mi1_0.created_at,
        mi1_0.description,
        mi1_0.device_id,
        mi1_0.image_path,
        mi1_0.is_available,
        mi1_0.is_deleted,
        mi1_0.is_veg,
        mi1_0.name,
        mi1_0.preparation_time,
        mi1_0.price,
        mi1_0.synced_at,
        mi1_0.tenant_id,
        mi1_0.updated_at,
        mi1_0.version 
    from
        public.menu_items mi1_0 
    where
        mi1_0.tenant_id=? 
        and mi1_0.is_deleted=?
2025-12-04 10:44:04 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:44:04 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[MenuItemDto(id=8a5577b8-36d5-4a3d-9299-903f009a42b9, categoryId=6ed45abe-f8f6-4966-8126-a3f0d0bd0aa (truncated)...]
2025-12-04 10:44:04 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:44:04 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/categories?activeOnly=true
2025-12-04 10:44:04 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:44:04 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/categories?activeOnly=true
2025-12-04 10:44:04 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/categories?activeOnly=true", parameters={masked}
2025-12-04 10:44:04 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.CategoryController#getAllCategories(UserDetails, Boolean)
2025-12-04 10:44:04 [http-nio-8881-exec-8] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:44:04 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:44:04 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.display_order,
        c1_0.is_active,
        c1_0.name,
        c1_0.tenant_id,
        c1_0.updated_at 
    from
        public.categories c1_0 
    where
        c1_0.tenant_id=? 
        and c1_0.is_active=? 
    order by
        c1_0.display_order
2025-12-04 10:44:04 [http-nio-8881-exec-8] DEBUG c.r.billing.service.CategoryService - Found 1 categories for tenant cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:44:04 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:44:04 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[CategoryDto(id=6ed45abe-f8f6-4966-8126-a3f0d0bd0aaa, name=Main course, displayOrder=1)]]
2025-12-04 10:44:04 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:44:11 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/categories?activeOnly=true
2025-12-04 10:44:11 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:44:11 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/categories?activeOnly=true
2025-12-04 10:44:11 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/categories?activeOnly=true", parameters={masked}
2025-12-04 10:44:11 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.CategoryController#getAllCategories(UserDetails, Boolean)
2025-12-04 10:44:11 [http-nio-8881-exec-2] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:44:11 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:44:11 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.display_order,
        c1_0.is_active,
        c1_0.name,
        c1_0.tenant_id,
        c1_0.updated_at 
    from
        public.categories c1_0 
    where
        c1_0.tenant_id=? 
        and c1_0.is_active=? 
    order by
        c1_0.display_order
2025-12-04 10:44:11 [http-nio-8881-exec-2] DEBUG c.r.billing.service.CategoryService - Found 1 categories for tenant cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:44:11 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:44:11 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[CategoryDto(id=6ed45abe-f8f6-4966-8126-a3f0d0bd0aaa, name=Main course, displayOrder=1)]]
2025-12-04 10:44:11 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:44:28 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/today-sales
2025-12-04 10:44:28 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/active-orders
2025-12-04 10:44:28 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/pending-payments
2025-12-04 10:44:28 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/tables-occupied
2025-12-04 10:44:28 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:44:28 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:44:28 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:44:28 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:44:28 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/active-orders
2025-12-04 10:44:28 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/pending-payments
2025-12-04 10:44:28 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/active-orders", parameters={}
2025-12-04 10:44:28 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/pending-payments", parameters={}
2025-12-04 10:44:28 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getActiveOrders()
2025-12-04 10:44:28 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getPendingPayments()
2025-12-04 10:44:28 [http-nio-8881-exec-7] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:44:28 [http-nio-8881-exec-5] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:44:28 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/today-sales
2025-12-04 10:44:28 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/tables-occupied
2025-12-04 10:44:28 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/today-sales", parameters={}
2025-12-04 10:44:28 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/tables-occupied", parameters={}
2025-12-04 10:44:28 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTodaySales()
2025-12-04 10:44:28 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTablesOccupied()
2025-12-04 10:44:28 [http-nio-8881-exec-3] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:44:28 [http-nio-8881-exec-6] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:44:28 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 10:44:28 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 10:44:28 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:44:28 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:44:28 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:44:28 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 10:44:28 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:44:28 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:44:28 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:44:28 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 10:44:28 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 10:44:28 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:44:28 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{amount=0}]
2025-12-04 10:44:28 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:44:28 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:44:28 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:44:28 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/stats
2025-12-04 10:44:28 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:44:28 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/stats
2025-12-04 10:44:28 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/stats", parameters={}
2025-12-04 10:44:28 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getDashboardStats()
2025-12-04 10:44:28 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:44:28 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 10:44:28 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:44:28 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 10:44:28 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 10:44:28 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:44:28 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{activeOrders=0, pendingPayments=0, tablesOccupied=0, todaySales=0}]
2025-12-04 10:44:28 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:44:28 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/orders
2025-12-04 10:44:28 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:44:28 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/orders
2025-12-04 10:44:28 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/orders", parameters={}
2025-12-04 10:44:28 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#getAllOrders()
2025-12-04 10:44:28 [http-nio-8881-exec-1] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:44:28 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:44:28 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:44:28 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:44:28 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:44:28 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:44:28 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:44:28 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[OrderDto(id=3d2cc165-482d-4290-b220-105d1ad18880, orderNumber=ORD1764763565538, tableId=null, table (truncated)...]
2025-12-04 10:44:28 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:45:22 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/auth/login
2025-12-04 10:45:22 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-12-04 10:45:22 [http-nio-8881-exec-5] ERROR c.r.billing.security.JwtUtil - Invalid JWT token: JWT expired at 2025-12-03T13:13:21Z. Current time: 2025-12-04T05:15:22Z, a difference of 57721868 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-12-04 10:45:22 [http-nio-8881-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-04 10:45:22 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-12-04 10:45:22 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-12-04 10:45:22 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.AuthController#login(LoginRequest)
2025-12-04 10:45:22 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(restaurantCode=REST14DAA490, username=Ganesh@gmail.com, password=Rest@1234)]
2025-12-04 10:45:22 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.restaurant_code=?
2025-12-04 10:45:22 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=? 
        and u1_0.tenant_id=?
2025-12-04 10:45:22 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    update
        public.users 
    set
        auth_provider=?,
        email=?,
        google_id=?,
        is_active=?,
        last_login=?,
        name=?,
        password_hash=?,
        phone=?,
        refresh_token=?,
        refresh_token_expiry=?,
        role=?,
        tenant_id=?,
        updated_at=? 
    where
        id=?
2025-12-04 10:45:22 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:45:22 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiT1dORVIiLCJ0ZW5hbnRJZCI6ImNjNzFkN2U0LWNmNj (truncated)...]
2025-12-04 10:45:22 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:45:23 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/today-sales
2025-12-04 10:45:23 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/active-orders
2025-12-04 10:45:23 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/pending-payments
2025-12-04 10:45:23 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/today-sales
2025-12-04 10:45:23 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/stats
2025-12-04 10:45:23 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/tables-occupied
2025-12-04 10:45:23 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/active-orders
2025-12-04 10:45:23 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:45:23 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:45:23 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/pending-payments
2025-12-04 10:45:23 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/stats
2025-12-04 10:45:23 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/tables-occupied
2025-12-04 10:45:23 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/active-orders
2025-12-04 10:45:23 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/today-sales
2025-12-04 10:45:23 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/today-sales", parameters={}
2025-12-04 10:45:23 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/active-orders", parameters={}
2025-12-04 10:45:23 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTodaySales()
2025-12-04 10:45:23 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getActiveOrders()
2025-12-04 10:45:23 [http-nio-8881-exec-1] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:45:23 [http-nio-8881-exec-8] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:45:23 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:45:23 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:45:23 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:45:23 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:45:23 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:45:23 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:45:23 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:45:23 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 10:45:23 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{amount=0}]
2025-12-04 10:45:23 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/pending-payments
2025-12-04 10:45:23 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/tables-occupied
2025-12-04 10:45:23 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/pending-payments", parameters={}
2025-12-04 10:45:23 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/tables-occupied", parameters={}
2025-12-04 10:45:23 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:45:23 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getPendingPayments()
2025-12-04 10:45:23 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:45:23 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTablesOccupied()
2025-12-04 10:45:23 [http-nio-8881-exec-2] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:45:23 [http-nio-8881-exec-5] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:45:23 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/stats
2025-12-04 10:45:23 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/stats", parameters={}
2025-12-04 10:45:23 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getDashboardStats()
2025-12-04 10:45:23 [http-nio-8881-exec-6] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:45:23 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 10:45:23 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 10:45:23 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 10:45:23 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:45:23 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 10:45:23 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:45:23 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:45:23 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 10:45:23 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:45:23 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:45:23 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 10:45:23 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 10:45:23 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:45:23 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{activeOrders=0, pendingPayments=0, tablesOccupied=0, todaySales=0}]
2025-12-04 10:45:23 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:45:23 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/orders
2025-12-04 10:45:23 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/orders
2025-12-04 10:45:23 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:45:23 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/orders
2025-12-04 10:45:23 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/orders", parameters={}
2025-12-04 10:45:23 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#getAllOrders()
2025-12-04 10:45:23 [http-nio-8881-exec-3] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:45:23 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:45:23 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:45:23 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:45:23 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:45:23 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:45:23 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:45:23 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[OrderDto(id=3d2cc165-482d-4290-b220-105d1ad18880, orderNumber=ORD1764763565538, tableId=null, table (truncated)...]
2025-12-04 10:45:23 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:45:25 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/reports/day-wise?startDate=2025-11-27T10%3A45%3A25.603&endDate=2025-12-04T10%3A45%3A25.603
2025-12-04 10:45:25 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/reports/day-wise?startDate=2025-11-27T10%3A45%3A25.603&endDate=2025-12-04T10%3A45%3A25.603
2025-12-04 10:45:25 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:45:25 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/reports/day-wise?startDate=2025-11-27T10%3A45%3A25.603&endDate=2025-12-04T10%3A45%3A25.603
2025-12-04 10:45:25 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/day-wise?startDate=2025-11-27T10%3A45%3A25.603&endDate=2025-12-04T10%3A45%3A25.603", parameters={masked}
2025-12-04 10:45:25 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.ReportController#getDayWiseSales(LocalDateTime, LocalDateTime)
2025-12-04 10:45:25 [http-nio-8881-exec-9] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:45:25 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 10:45:25 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:45:25 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[{date=2025-12-03, totalSales=0}]]
2025-12-04 10:45:25 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:45:25 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/reports/product-wise?startDate=2025-11-27T10%3A45%3A25.603&endDate=2025-12-04T10%3A45%3A25.603
2025-12-04 10:45:25 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/reports/product-wise?startDate=2025-11-27T10%3A45%3A25.603&endDate=2025-12-04T10%3A45%3A25.603
2025-12-04 10:45:25 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:45:25 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/reports/product-wise?startDate=2025-11-27T10%3A45%3A25.603&endDate=2025-12-04T10%3A45%3A25.603
2025-12-04 10:45:25 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/product-wise?startDate=2025-11-27T10%3A45%3A25.603&endDate=2025-12-04T10%3A45%3A25.603", parameters={masked}
2025-12-04 10:45:25 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.ReportController#getProductWiseSales(LocalDateTime, LocalDateTime)
2025-12-04 10:45:25 [http-nio-8881-exec-1] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:45:25 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        oi1_0.menu_item_id,
        oi1_0.item_name,
        sum(oi1_0.quantity),
        sum(oi1_0.total_price) 
    from
        public.order_items oi1_0 
    join
        public.orders o1_0 
            on o1_0.id=oi1_0.order_id 
    where
        o1_0.tenant_id=? 
        and o1_0.created_at between ? and ? 
    group by
        oi1_0.menu_item_id,
        oi1_0.item_name 
    order by
        sum(oi1_0.total_price) desc
2025-12-04 10:45:25 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:45:25 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[{menuItemId=8a5577b8-36d5-4a3d-9299-903f009a42b9, itemName=TEA, totalQuantity=9, totalRevenue=135.0 (truncated)...]
2025-12-04 10:45:25 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:45:27 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/reports/day-wise?startDate=2025-12-01T00%3A00%3A00.000&endDate=2025-12-04T10%3A45%3A26.954
2025-12-04 10:45:27 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/reports/day-wise?startDate=2025-12-01T00%3A00%3A00.000&endDate=2025-12-04T10%3A45%3A26.954
2025-12-04 10:45:27 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:45:27 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/reports/day-wise?startDate=2025-12-01T00%3A00%3A00.000&endDate=2025-12-04T10%3A45%3A26.954
2025-12-04 10:45:27 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/day-wise?startDate=2025-12-01T00%3A00%3A00.000&endDate=2025-12-04T10%3A45%3A26.954", parameters={masked}
2025-12-04 10:45:27 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.ReportController#getDayWiseSales(LocalDateTime, LocalDateTime)
2025-12-04 10:45:27 [http-nio-8881-exec-5] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:45:27 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 10:45:27 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:45:27 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[{date=2025-12-03, totalSales=0}]]
2025-12-04 10:45:27 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:45:27 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/reports/product-wise?startDate=2025-12-01T00%3A00%3A00.000&endDate=2025-12-04T10%3A45%3A26.954
2025-12-04 10:45:27 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/reports/product-wise?startDate=2025-12-01T00%3A00%3A00.000&endDate=2025-12-04T10%3A45%3A26.954
2025-12-04 10:45:27 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:45:27 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/reports/product-wise?startDate=2025-12-01T00%3A00%3A00.000&endDate=2025-12-04T10%3A45%3A26.954
2025-12-04 10:45:27 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/product-wise?startDate=2025-12-01T00%3A00%3A00.000&endDate=2025-12-04T10%3A45%3A26.954", parameters={masked}
2025-12-04 10:45:27 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.ReportController#getProductWiseSales(LocalDateTime, LocalDateTime)
2025-12-04 10:45:27 [http-nio-8881-exec-6] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:45:27 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        oi1_0.menu_item_id,
        oi1_0.item_name,
        sum(oi1_0.quantity),
        sum(oi1_0.total_price) 
    from
        public.order_items oi1_0 
    join
        public.orders o1_0 
            on o1_0.id=oi1_0.order_id 
    where
        o1_0.tenant_id=? 
        and o1_0.created_at between ? and ? 
    group by
        oi1_0.menu_item_id,
        oi1_0.item_name 
    order by
        sum(oi1_0.total_price) desc
2025-12-04 10:45:27 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:45:27 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[{menuItemId=8a5577b8-36d5-4a3d-9299-903f009a42b9, itemName=TEA, totalQuantity=9, totalRevenue=135.0 (truncated)...]
2025-12-04 10:45:27 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:45:27 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/reports/day-wise?startDate=2025-11-27T10%3A45%3A27.745&endDate=2025-12-04T10%3A45%3A27.745
2025-12-04 10:45:27 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/reports/day-wise?startDate=2025-11-27T10%3A45%3A27.745&endDate=2025-12-04T10%3A45%3A27.745
2025-12-04 10:45:27 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:45:27 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/reports/day-wise?startDate=2025-11-27T10%3A45%3A27.745&endDate=2025-12-04T10%3A45%3A27.745
2025-12-04 10:45:27 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/day-wise?startDate=2025-11-27T10%3A45%3A27.745&endDate=2025-12-04T10%3A45%3A27.745", parameters={masked}
2025-12-04 10:45:27 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.ReportController#getDayWiseSales(LocalDateTime, LocalDateTime)
2025-12-04 10:45:27 [http-nio-8881-exec-3] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:45:27 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 10:45:27 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:45:27 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[{date=2025-12-03, totalSales=0}]]
2025-12-04 10:45:27 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:45:27 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/reports/product-wise?startDate=2025-11-27T10%3A45%3A27.745&endDate=2025-12-04T10%3A45%3A27.745
2025-12-04 10:45:27 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/reports/product-wise?startDate=2025-11-27T10%3A45%3A27.745&endDate=2025-12-04T10%3A45%3A27.745
2025-12-04 10:45:27 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:45:27 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/reports/product-wise?startDate=2025-11-27T10%3A45%3A27.745&endDate=2025-12-04T10%3A45%3A27.745
2025-12-04 10:45:27 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/product-wise?startDate=2025-11-27T10%3A45%3A27.745&endDate=2025-12-04T10%3A45%3A27.745", parameters={masked}
2025-12-04 10:45:27 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.ReportController#getProductWiseSales(LocalDateTime, LocalDateTime)
2025-12-04 10:45:27 [http-nio-8881-exec-9] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:45:27 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        oi1_0.menu_item_id,
        oi1_0.item_name,
        sum(oi1_0.quantity),
        sum(oi1_0.total_price) 
    from
        public.order_items oi1_0 
    join
        public.orders o1_0 
            on o1_0.id=oi1_0.order_id 
    where
        o1_0.tenant_id=? 
        and o1_0.created_at between ? and ? 
    group by
        oi1_0.menu_item_id,
        oi1_0.item_name 
    order by
        sum(oi1_0.total_price) desc
2025-12-04 10:45:27 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:45:27 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[{menuItemId=8a5577b8-36d5-4a3d-9299-903f009a42b9, itemName=TEA, totalQuantity=9, totalRevenue=135.0 (truncated)...]
2025-12-04 10:45:27 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:45:28 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/reports/day-wise?startDate=2025-12-04T00%3A00%3A00.000&endDate=2025-12-04T10%3A45%3A28.194
2025-12-04 10:45:28 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/reports/day-wise?startDate=2025-12-04T00%3A00%3A00.000&endDate=2025-12-04T10%3A45%3A28.194
2025-12-04 10:45:28 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:45:28 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/reports/day-wise?startDate=2025-12-04T00%3A00%3A00.000&endDate=2025-12-04T10%3A45%3A28.194
2025-12-04 10:45:28 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/day-wise?startDate=2025-12-04T00%3A00%3A00.000&endDate=2025-12-04T10%3A45%3A28.194", parameters={masked}
2025-12-04 10:45:28 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.ReportController#getDayWiseSales(LocalDateTime, LocalDateTime)
2025-12-04 10:45:28 [http-nio-8881-exec-1] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:45:28 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 10:45:28 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:45:28 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-12-04 10:45:28 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:45:28 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/reports/product-wise?startDate=2025-12-04T00%3A00%3A00.000&endDate=2025-12-04T10%3A45%3A28.194
2025-12-04 10:45:28 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/reports/product-wise?startDate=2025-12-04T00%3A00%3A00.000&endDate=2025-12-04T10%3A45%3A28.194
2025-12-04 10:45:28 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:45:28 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/reports/product-wise?startDate=2025-12-04T00%3A00%3A00.000&endDate=2025-12-04T10%3A45%3A28.194
2025-12-04 10:45:28 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/product-wise?startDate=2025-12-04T00%3A00%3A00.000&endDate=2025-12-04T10%3A45%3A28.194", parameters={masked}
2025-12-04 10:45:28 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.ReportController#getProductWiseSales(LocalDateTime, LocalDateTime)
2025-12-04 10:45:28 [http-nio-8881-exec-5] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:45:28 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        oi1_0.menu_item_id,
        oi1_0.item_name,
        sum(oi1_0.quantity),
        sum(oi1_0.total_price) 
    from
        public.order_items oi1_0 
    join
        public.orders o1_0 
            on o1_0.id=oi1_0.order_id 
    where
        o1_0.tenant_id=? 
        and o1_0.created_at between ? and ? 
    group by
        oi1_0.menu_item_id,
        oi1_0.item_name 
    order by
        sum(oi1_0.total_price) desc
2025-12-04 10:45:28 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:45:28 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[]]
2025-12-04 10:45:28 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:45:29 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/orders
2025-12-04 10:45:29 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:45:29 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/orders
2025-12-04 10:45:29 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/orders", parameters={}
2025-12-04 10:45:29 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#getAllOrders()
2025-12-04 10:45:29 [http-nio-8881-exec-2] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:45:29 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:45:29 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:45:29 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:45:29 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:45:29 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:45:29 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:45:29 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[OrderDto(id=3d2cc165-482d-4290-b220-105d1ad18880, orderNumber=ORD1764763565538, tableId=null, table (truncated)...]
2025-12-04 10:45:29 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:45:30 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/active-orders
2025-12-04 10:45:30 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/today-sales
2025-12-04 10:45:30 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/pending-payments
2025-12-04 10:45:30 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/stats
2025-12-04 10:45:30 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/tables-occupied
2025-12-04 10:45:30 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:45:30 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:45:30 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:45:30 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:45:30 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:45:30 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/today-sales
2025-12-04 10:45:30 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/active-orders
2025-12-04 10:45:30 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/pending-payments
2025-12-04 10:45:30 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/stats
2025-12-04 10:45:30 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/tables-occupied
2025-12-04 10:45:30 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/active-orders", parameters={}
2025-12-04 10:45:30 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/today-sales", parameters={}
2025-12-04 10:45:30 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/pending-payments", parameters={}
2025-12-04 10:45:30 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/stats", parameters={}
2025-12-04 10:45:30 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/tables-occupied", parameters={}
2025-12-04 10:45:30 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTablesOccupied()
2025-12-04 10:45:30 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTodaySales()
2025-12-04 10:45:30 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getPendingPayments()
2025-12-04 10:45:30 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getDashboardStats()
2025-12-04 10:45:30 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getActiveOrders()
2025-12-04 10:45:30 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:45:30 [http-nio-8881-exec-6] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:45:30 [http-nio-8881-exec-7] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:45:30 [http-nio-8881-exec-9] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:45:30 [http-nio-8881-exec-3] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:45:30 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 10:45:30 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 10:45:30 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 10:45:30 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:45:30 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:45:30 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:45:30 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 10:45:30 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:45:30 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 10:45:30 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:45:30 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:45:30 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{amount=0}]
2025-12-04 10:45:30 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:45:30 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 10:45:30 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:45:30 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:45:30 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:45:30 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:45:30 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 10:45:30 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 10:45:30 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:45:30 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{activeOrders=0, pendingPayments=0, tablesOccupied=0, todaySales=0}]
2025-12-04 10:45:30 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:45:30 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/orders
2025-12-04 10:45:30 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:45:30 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/orders
2025-12-04 10:45:30 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/orders", parameters={}
2025-12-04 10:45:30 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#getAllOrders()
2025-12-04 10:45:30 [http-nio-8881-exec-10] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:45:30 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:45:30 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:45:30 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:45:30 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:45:30 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:45:30 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:45:30 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[OrderDto(id=3d2cc165-482d-4290-b220-105d1ad18880, orderNumber=ORD1764763565538, tableId=null, table (truncated)...]
2025-12-04 10:45:30 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:45:32 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/menu
2025-12-04 10:45:32 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/menu
2025-12-04 10:45:32 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:45:32 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/menu
2025-12-04 10:45:32 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/menu", parameters={}
2025-12-04 10:45:32 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.MenuController#getAllMenuItems()
2025-12-04 10:45:32 [http-nio-8881-exec-8] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:45:32 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        mi1_0.id,
        mi1_0.category_id,
        mi1_0.created_at,
        mi1_0.description,
        mi1_0.device_id,
        mi1_0.image_path,
        mi1_0.is_available,
        mi1_0.is_deleted,
        mi1_0.is_veg,
        mi1_0.name,
        mi1_0.preparation_time,
        mi1_0.price,
        mi1_0.synced_at,
        mi1_0.tenant_id,
        mi1_0.updated_at,
        mi1_0.version 
    from
        public.menu_items mi1_0 
    where
        mi1_0.tenant_id=? 
        and mi1_0.is_deleted=?
2025-12-04 10:45:32 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:45:32 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[MenuItemDto(id=8a5577b8-36d5-4a3d-9299-903f009a42b9, categoryId=6ed45abe-f8f6-4966-8126-a3f0d0bd0aa (truncated)...]
2025-12-04 10:45:32 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:45:32 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/categories?activeOnly=true
2025-12-04 10:45:32 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/categories?activeOnly=true
2025-12-04 10:45:32 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:45:32 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/categories?activeOnly=true
2025-12-04 10:45:32 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/categories?activeOnly=true", parameters={masked}
2025-12-04 10:45:32 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.CategoryController#getAllCategories(UserDetails, Boolean)
2025-12-04 10:45:32 [http-nio-8881-exec-2] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:45:32 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:45:32 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.display_order,
        c1_0.is_active,
        c1_0.name,
        c1_0.tenant_id,
        c1_0.updated_at 
    from
        public.categories c1_0 
    where
        c1_0.tenant_id=? 
        and c1_0.is_active=? 
    order by
        c1_0.display_order
2025-12-04 10:45:32 [http-nio-8881-exec-2] DEBUG c.r.billing.service.CategoryService - Found 1 categories for tenant cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:45:32 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:45:32 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[CategoryDto(id=6ed45abe-f8f6-4966-8126-a3f0d0bd0aaa, name=Main course, displayOrder=1)]]
2025-12-04 10:45:32 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:45:37 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/reports/day-wise?startDate=2025-11-27T10%3A45%3A37.316&endDate=2025-12-04T10%3A45%3A37.316
2025-12-04 10:45:37 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/reports/day-wise?startDate=2025-11-27T10%3A45%3A37.316&endDate=2025-12-04T10%3A45%3A37.316
2025-12-04 10:45:37 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:45:37 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/reports/day-wise?startDate=2025-11-27T10%3A45%3A37.316&endDate=2025-12-04T10%3A45%3A37.316
2025-12-04 10:45:37 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/day-wise?startDate=2025-11-27T10%3A45%3A37.316&endDate=2025-12-04T10%3A45%3A37.316", parameters={masked}
2025-12-04 10:45:37 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.ReportController#getDayWiseSales(LocalDateTime, LocalDateTime)
2025-12-04 10:45:37 [http-nio-8881-exec-7] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:45:37 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 10:45:37 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:45:37 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[{date=2025-12-03, totalSales=0}]]
2025-12-04 10:45:37 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:45:37 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/reports/product-wise?startDate=2025-11-27T10%3A45%3A37.316&endDate=2025-12-04T10%3A45%3A37.316
2025-12-04 10:45:37 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/reports/product-wise?startDate=2025-11-27T10%3A45%3A37.316&endDate=2025-12-04T10%3A45%3A37.316
2025-12-04 10:45:37 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:45:37 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/reports/product-wise?startDate=2025-11-27T10%3A45%3A37.316&endDate=2025-12-04T10%3A45%3A37.316
2025-12-04 10:45:37 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/product-wise?startDate=2025-11-27T10%3A45%3A37.316&endDate=2025-12-04T10%3A45%3A37.316", parameters={masked}
2025-12-04 10:45:37 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.ReportController#getProductWiseSales(LocalDateTime, LocalDateTime)
2025-12-04 10:45:37 [http-nio-8881-exec-3] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:45:37 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        oi1_0.menu_item_id,
        oi1_0.item_name,
        sum(oi1_0.quantity),
        sum(oi1_0.total_price) 
    from
        public.order_items oi1_0 
    join
        public.orders o1_0 
            on o1_0.id=oi1_0.order_id 
    where
        o1_0.tenant_id=? 
        and o1_0.created_at between ? and ? 
    group by
        oi1_0.menu_item_id,
        oi1_0.item_name 
    order by
        sum(oi1_0.total_price) desc
2025-12-04 10:45:37 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:45:37 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[{menuItemId=8a5577b8-36d5-4a3d-9299-903f009a42b9, itemName=TEA, totalQuantity=9, totalRevenue=135.0 (truncated)...]
2025-12-04 10:45:37 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:45:40 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/categories?activeOnly=true
2025-12-04 10:45:40 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:45:40 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/categories?activeOnly=true
2025-12-04 10:45:40 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/categories?activeOnly=true", parameters={masked}
2025-12-04 10:45:40 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.CategoryController#getAllCategories(UserDetails, Boolean)
2025-12-04 10:45:40 [http-nio-8881-exec-9] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:45:40 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:45:40 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.display_order,
        c1_0.is_active,
        c1_0.name,
        c1_0.tenant_id,
        c1_0.updated_at 
    from
        public.categories c1_0 
    where
        c1_0.tenant_id=? 
        and c1_0.is_active=? 
    order by
        c1_0.display_order
2025-12-04 10:45:40 [http-nio-8881-exec-9] DEBUG c.r.billing.service.CategoryService - Found 1 categories for tenant cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:45:40 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:45:40 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[CategoryDto(id=6ed45abe-f8f6-4966-8126-a3f0d0bd0aaa, name=Main course, displayOrder=1)]]
2025-12-04 10:45:40 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:45:51 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/categories
2025-12-04 10:45:51 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/categories
2025-12-04 10:45:51 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:45:51 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/categories
2025-12-04 10:45:51 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/categories", parameters={}
2025-12-04 10:45:51 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.CategoryController#createCategory(CreateCategoryRequest, UserDetails)
2025-12-04 10:45:51 [http-nio-8881-exec-1] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:45:51 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [CreateCategoryRequest(name=BreakFast, displayOrder=null)]
2025-12-04 10:45:51 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:45:51 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        max(c1_0.display_order) 
    from
        public.categories c1_0 
    where
        c1_0.tenant_id=?
2025-12-04 10:45:51 [http-nio-8881-exec-1] INFO  c.r.billing.service.CategoryService - Created category 1f9e0e3e-8c0e-4295-8980-b5e89b74383d for tenant cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:45:51 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    insert 
    into
        public.categories
        (created_at, display_order, is_active, name, tenant_id, updated_at, id) 
    values
        (?, ?, ?, ?, ?, ?, ?)
2025-12-04 10:45:51 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:45:51 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [CategoryDto(id=1f9e0e3e-8c0e-4295-8980-b5e89b74383d, name=BreakFast, displayOrder=2)]
2025-12-04 10:45:51 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-12-04 10:45:51 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/sync
2025-12-04 10:45:51 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/sync
2025-12-04 10:45:51 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:45:51 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/sync
2025-12-04 10:45:51 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/sync", parameters={}
2025-12-04 10:45:51 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.SyncController#performSync(SyncRequest)
2025-12-04 10:45:51 [http-nio-8881-exec-5] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:45:51 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [SyncRequest(deviceId=d23c59b8-4056-4cc6-b9bc-6ac5018951cf, lastSyncTime=1970-01-01T05:30, data=[Sync (truncated)...]
2025-12-04 10:45:51 [http-nio-8881-exec-5] ERROR c.r.billing.service.SyncService - Sync error for item: 1f9e0e3e-8c0e-4295-8980-b5e89b74383d
java.lang.IllegalArgumentException: Unknown entity type: category
	at com.restaurant.billing.service.SyncService.processSyncItem(SyncService.java:107)
	at com.restaurant.billing.service.SyncService.performSync(SyncService.java:34)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at com.restaurant.billing.service.SyncService$$SpringCGLIB$$0.performSync(<generated>)
	at com.restaurant.billing.controller.SyncController.performSync(SyncController.java:23)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 10:45:51 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 10:45:51 [http-nio-8881-exec-5] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
java.lang.IllegalArgumentException: No enum constant com.restaurant.billing.entity.SyncLog.SyncOperation.create
	at java.base/java.lang.Enum.valueOf(Enum.java:273)
	at com.restaurant.billing.entity.SyncLog$SyncOperation.valueOf(SyncLog.java:65)
	at com.restaurant.billing.service.SyncService.logSync(SyncService.java:158)
	at com.restaurant.billing.service.SyncService.performSync(SyncService.java:51)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at com.restaurant.billing.service.SyncService$$SpringCGLIB$$0.performSync(<generated>)
	at com.restaurant.billing.controller.SyncController.performSync(SyncController.java:23)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 10:45:51 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:45:51 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T10:45:51.374861707, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 10:45:51 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [java.lang.IllegalArgumentException: No enum constant com.restaurant.billing.entity.SyncLog.SyncOperation.create]
2025-12-04 10:45:51 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 10:45:54 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/orders
2025-12-04 10:45:54 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:45:54 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/orders
2025-12-04 10:45:54 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/orders", parameters={}
2025-12-04 10:45:54 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#getAllOrders()
2025-12-04 10:45:54 [http-nio-8881-exec-2] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:45:54 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:45:54 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:45:54 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:45:54 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:45:54 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:45:54 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:45:54 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[OrderDto(id=3d2cc165-482d-4290-b220-105d1ad18880, orderNumber=ORD1764763565538, tableId=null, table (truncated)...]
2025-12-04 10:45:54 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:45:56 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/active-orders
2025-12-04 10:45:56 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/today-sales
2025-12-04 10:45:56 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/pending-payments
2025-12-04 10:45:56 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/tables-occupied
2025-12-04 10:45:56 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/stats
2025-12-04 10:45:56 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:45:56 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:45:56 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:45:56 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:45:56 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:45:56 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/pending-payments
2025-12-04 10:45:56 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/tables-occupied
2025-12-04 10:45:56 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/today-sales
2025-12-04 10:45:56 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/stats
2025-12-04 10:45:56 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/active-orders
2025-12-04 10:45:56 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/tables-occupied", parameters={}
2025-12-04 10:45:56 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/today-sales", parameters={}
2025-12-04 10:45:56 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/pending-payments", parameters={}
2025-12-04 10:45:56 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/stats", parameters={}
2025-12-04 10:45:56 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/active-orders", parameters={}
2025-12-04 10:45:56 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getPendingPayments()
2025-12-04 10:45:56 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getDashboardStats()
2025-12-04 10:45:56 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTablesOccupied()
2025-12-04 10:45:56 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getActiveOrders()
2025-12-04 10:45:56 [http-nio-8881-exec-7] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:45:56 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTodaySales()
2025-12-04 10:45:56 [http-nio-8881-exec-3] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:45:56 [http-nio-8881-exec-6] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:45:56 [http-nio-8881-exec-9] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:45:56 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:45:56 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 10:45:56 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 10:45:56 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 10:45:56 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:45:56 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:45:56 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:45:56 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 10:45:56 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:45:56 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:45:56 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 10:45:56 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 10:45:56 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:45:56 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{amount=0}]
2025-12-04 10:45:56 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:45:56 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:45:56 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:45:56 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:45:56 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:45:56 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 10:45:56 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 10:45:56 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:45:56 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{activeOrders=0, pendingPayments=0, tablesOccupied=0, todaySales=0}]
2025-12-04 10:45:56 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:45:56 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/orders
2025-12-04 10:45:56 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:45:56 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/orders
2025-12-04 10:45:56 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/orders", parameters={}
2025-12-04 10:45:56 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#getAllOrders()
2025-12-04 10:45:56 [http-nio-8881-exec-10] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:45:56 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:45:56 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:45:56 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:45:56 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:45:56 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:45:56 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:45:56 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[OrderDto(id=3d2cc165-482d-4290-b220-105d1ad18880, orderNumber=ORD1764763565538, tableId=null, table (truncated)...]
2025-12-04 10:45:56 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:45:57 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/menu
2025-12-04 10:45:57 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:45:57 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/menu
2025-12-04 10:45:57 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/menu", parameters={}
2025-12-04 10:45:57 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.MenuController#getAllMenuItems()
2025-12-04 10:45:57 [http-nio-8881-exec-1] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:45:57 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        mi1_0.id,
        mi1_0.category_id,
        mi1_0.created_at,
        mi1_0.description,
        mi1_0.device_id,
        mi1_0.image_path,
        mi1_0.is_available,
        mi1_0.is_deleted,
        mi1_0.is_veg,
        mi1_0.name,
        mi1_0.preparation_time,
        mi1_0.price,
        mi1_0.synced_at,
        mi1_0.tenant_id,
        mi1_0.updated_at,
        mi1_0.version 
    from
        public.menu_items mi1_0 
    where
        mi1_0.tenant_id=? 
        and mi1_0.is_deleted=?
2025-12-04 10:45:57 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:45:57 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[MenuItemDto(id=8a5577b8-36d5-4a3d-9299-903f009a42b9, categoryId=6ed45abe-f8f6-4966-8126-a3f0d0bd0aa (truncated)...]
2025-12-04 10:45:57 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:45:57 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/categories?activeOnly=true
2025-12-04 10:45:57 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:45:57 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/categories?activeOnly=true
2025-12-04 10:45:57 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/categories?activeOnly=true", parameters={masked}
2025-12-04 10:45:57 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.CategoryController#getAllCategories(UserDetails, Boolean)
2025-12-04 10:45:57 [http-nio-8881-exec-8] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:45:57 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:45:57 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.display_order,
        c1_0.is_active,
        c1_0.name,
        c1_0.tenant_id,
        c1_0.updated_at 
    from
        public.categories c1_0 
    where
        c1_0.tenant_id=? 
        and c1_0.is_active=? 
    order by
        c1_0.display_order
2025-12-04 10:45:57 [http-nio-8881-exec-8] DEBUG c.r.billing.service.CategoryService - Found 2 categories for tenant cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:45:57 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:45:57 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[CategoryDto(id=6ed45abe-f8f6-4966-8126-a3f0d0bd0aaa, name=Main course, displayOrder=1), CategoryDto (truncated)...]
2025-12-04 10:45:57 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:46:12 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/categories?activeOnly=true
2025-12-04 10:46:12 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:46:12 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/categories?activeOnly=true
2025-12-04 10:46:12 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/categories?activeOnly=true", parameters={masked}
2025-12-04 10:46:12 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.CategoryController#getAllCategories(UserDetails, Boolean)
2025-12-04 10:46:12 [http-nio-8881-exec-5] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:46:12 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:46:12 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.display_order,
        c1_0.is_active,
        c1_0.name,
        c1_0.tenant_id,
        c1_0.updated_at 
    from
        public.categories c1_0 
    where
        c1_0.tenant_id=? 
        and c1_0.is_active=? 
    order by
        c1_0.display_order
2025-12-04 10:46:12 [http-nio-8881-exec-5] DEBUG c.r.billing.service.CategoryService - Found 2 categories for tenant cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:46:12 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:46:12 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[CategoryDto(id=6ed45abe-f8f6-4966-8126-a3f0d0bd0aaa, name=Main course, displayOrder=1), CategoryDto (truncated)...]
2025-12-04 10:46:12 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:46:16 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/menu
2025-12-04 10:46:16 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:46:16 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/menu
2025-12-04 10:46:16 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/menu", parameters={}
2025-12-04 10:46:16 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.MenuController#getAllMenuItems()
2025-12-04 10:46:16 [http-nio-8881-exec-2] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:46:16 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        mi1_0.id,
        mi1_0.category_id,
        mi1_0.created_at,
        mi1_0.description,
        mi1_0.device_id,
        mi1_0.image_path,
        mi1_0.is_available,
        mi1_0.is_deleted,
        mi1_0.is_veg,
        mi1_0.name,
        mi1_0.preparation_time,
        mi1_0.price,
        mi1_0.synced_at,
        mi1_0.tenant_id,
        mi1_0.updated_at,
        mi1_0.version 
    from
        public.menu_items mi1_0 
    where
        mi1_0.tenant_id=? 
        and mi1_0.is_deleted=?
2025-12-04 10:46:16 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:46:16 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[MenuItemDto(id=8a5577b8-36d5-4a3d-9299-903f009a42b9, categoryId=6ed45abe-f8f6-4966-8126-a3f0d0bd0aa (truncated)...]
2025-12-04 10:46:16 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:46:16 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/categories?activeOnly=true
2025-12-04 10:46:16 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:46:16 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/categories?activeOnly=true
2025-12-04 10:46:16 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/categories?activeOnly=true", parameters={masked}
2025-12-04 10:46:16 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.CategoryController#getAllCategories(UserDetails, Boolean)
2025-12-04 10:46:16 [http-nio-8881-exec-6] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:46:16 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:46:16 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.display_order,
        c1_0.is_active,
        c1_0.name,
        c1_0.tenant_id,
        c1_0.updated_at 
    from
        public.categories c1_0 
    where
        c1_0.tenant_id=? 
        and c1_0.is_active=? 
    order by
        c1_0.display_order
2025-12-04 10:46:16 [http-nio-8881-exec-6] DEBUG c.r.billing.service.CategoryService - Found 2 categories for tenant cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:46:16 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:46:16 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[CategoryDto(id=6ed45abe-f8f6-4966-8126-a3f0d0bd0aaa, name=Main course, displayOrder=1), CategoryDto (truncated)...]
2025-12-04 10:46:16 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:46:18 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/categories?activeOnly=true
2025-12-04 10:46:18 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:46:18 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/categories?activeOnly=true
2025-12-04 10:46:18 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/categories?activeOnly=true", parameters={masked}
2025-12-04 10:46:18 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.CategoryController#getAllCategories(UserDetails, Boolean)
2025-12-04 10:46:18 [http-nio-8881-exec-3] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:46:18 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:46:18 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.display_order,
        c1_0.is_active,
        c1_0.name,
        c1_0.tenant_id,
        c1_0.updated_at 
    from
        public.categories c1_0 
    where
        c1_0.tenant_id=? 
        and c1_0.is_active=? 
    order by
        c1_0.display_order
2025-12-04 10:46:18 [http-nio-8881-exec-3] DEBUG c.r.billing.service.CategoryService - Found 2 categories for tenant cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:46:18 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:46:18 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[CategoryDto(id=6ed45abe-f8f6-4966-8126-a3f0d0bd0aaa, name=Main course, displayOrder=1), CategoryDto (truncated)...]
2025-12-04 10:46:18 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:46:34 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/menu
2025-12-04 10:46:34 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:46:34 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/menu
2025-12-04 10:46:34 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/menu", parameters={}
2025-12-04 10:46:34 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.MenuController#createMenuItem(MenuItemDto, String)
2025-12-04 10:46:34 [http-nio-8881-exec-7] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:46:34 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MenuItemDto(id=null, categoryId=1f9e0e3e-8c0e-4295-8980-b5e89b74383d, name=Pongal, description=, pri (truncated)...]
2025-12-04 10:46:34 [http-nio-8881-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.restaurant.billing.controller.MenuController.createMenuItem(com.restaurant.billing.dto.menu.MenuItemDto,java.lang.String); target is of class [com.restaurant.billing.controller.MenuController]
2025-12-04 10:46:34 [http-nio-8881-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.restaurant.billing.controller.MenuController.createMenuItem(com.restaurant.billing.dto.menu.MenuItemDto,java.lang.String); target is of class [com.restaurant.billing.controller.MenuController]
2025-12-04 10:46:34 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.display_order,
        c1_0.is_active,
        c1_0.name,
        c1_0.tenant_id,
        c1_0.updated_at 
    from
        public.categories c1_0 
    where
        c1_0.id=?
2025-12-04 10:46:34 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    insert 
    into
        public.menu_items
        (category_id, created_at, description, device_id, image_path, is_available, is_deleted, is_veg, name, preparation_time, price, synced_at, tenant_id, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-04 10:46:34 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:46:34 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [MenuItemDto(id=910b21d2-8fbe-4306-9a30-db48d7361b2e, categoryId=1f9e0e3e-8c0e-4295-8980-b5e89b74383d (truncated)...]
2025-12-04 10:46:34 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-12-04 10:46:34 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/sync
2025-12-04 10:46:34 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:46:34 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/sync
2025-12-04 10:46:34 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/sync", parameters={}
2025-12-04 10:46:34 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.SyncController#performSync(SyncRequest)
2025-12-04 10:46:34 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:46:34 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [SyncRequest(deviceId=d23c59b8-4056-4cc6-b9bc-6ac5018951cf, lastSyncTime=1970-01-01T05:30, data=[Sync (truncated)...]
2025-12-04 10:46:34 [http-nio-8881-exec-4] ERROR c.r.billing.service.SyncService - Sync error for item: 1f9e0e3e-8c0e-4295-8980-b5e89b74383d
java.lang.IllegalArgumentException: Unknown entity type: category
	at com.restaurant.billing.service.SyncService.processSyncItem(SyncService.java:107)
	at com.restaurant.billing.service.SyncService.performSync(SyncService.java:34)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at com.restaurant.billing.service.SyncService$$SpringCGLIB$$0.performSync(<generated>)
	at com.restaurant.billing.controller.SyncController.performSync(SyncController.java:23)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 10:46:34 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 10:46:34 [http-nio-8881-exec-4] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
java.lang.IllegalArgumentException: No enum constant com.restaurant.billing.entity.SyncLog.SyncOperation.create
	at java.base/java.lang.Enum.valueOf(Enum.java:273)
	at com.restaurant.billing.entity.SyncLog$SyncOperation.valueOf(SyncLog.java:65)
	at com.restaurant.billing.service.SyncService.logSync(SyncService.java:158)
	at com.restaurant.billing.service.SyncService.performSync(SyncService.java:51)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at com.restaurant.billing.service.SyncService$$SpringCGLIB$$0.performSync(<generated>)
	at com.restaurant.billing.controller.SyncController.performSync(SyncController.java:23)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 10:46:34 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:46:34 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T10:46:34.196597075, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 10:46:34 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [java.lang.IllegalArgumentException: No enum constant com.restaurant.billing.entity.SyncLog.SyncOperation.create]
2025-12-04 10:46:34 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 10:46:36 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/today-sales
2025-12-04 10:46:36 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/active-orders
2025-12-04 10:46:36 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/pending-payments
2025-12-04 10:46:36 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/tables-occupied
2025-12-04 10:46:36 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/stats
2025-12-04 10:46:36 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:46:36 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:46:36 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:46:36 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:46:36 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:46:36 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/active-orders
2025-12-04 10:46:36 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/stats
2025-12-04 10:46:36 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/pending-payments
2025-12-04 10:46:36 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/active-orders", parameters={}
2025-12-04 10:46:36 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/today-sales
2025-12-04 10:46:36 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/stats", parameters={}
2025-12-04 10:46:36 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/pending-payments", parameters={}
2025-12-04 10:46:36 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/today-sales", parameters={}
2025-12-04 10:46:36 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/tables-occupied
2025-12-04 10:46:36 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getActiveOrders()
2025-12-04 10:46:36 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getDashboardStats()
2025-12-04 10:46:36 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getPendingPayments()
2025-12-04 10:46:36 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTodaySales()
2025-12-04 10:46:36 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/tables-occupied", parameters={}
2025-12-04 10:46:36 [http-nio-8881-exec-10] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:46:36 [http-nio-8881-exec-5] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:46:36 [http-nio-8881-exec-1] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:46:36 [http-nio-8881-exec-9] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:46:36 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTablesOccupied()
2025-12-04 10:46:36 [http-nio-8881-exec-8] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:46:36 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 10:46:36 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 10:46:36 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:46:36 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 10:46:36 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:46:36 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:46:36 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:46:36 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:46:36 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 10:46:36 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 10:46:36 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:46:36 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 10:46:36 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{amount=0}]
2025-12-04 10:46:36 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:46:36 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:46:36 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:46:36 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:46:36 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:46:36 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 10:46:36 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 10:46:36 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:46:36 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{activeOrders=0, pendingPayments=0, tablesOccupied=0, todaySales=0}]
2025-12-04 10:46:36 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:46:36 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/orders
2025-12-04 10:46:36 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:46:36 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/orders
2025-12-04 10:46:36 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/orders", parameters={}
2025-12-04 10:46:36 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#getAllOrders()
2025-12-04 10:46:36 [http-nio-8881-exec-2] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:46:36 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:46:36 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:46:36 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:46:36 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:46:36 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:46:36 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:46:36 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[OrderDto(id=3d2cc165-482d-4290-b220-105d1ad18880, orderNumber=ORD1764763565538, tableId=null, table (truncated)...]
2025-12-04 10:46:36 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:46:37 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/menu
2025-12-04 10:46:37 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:46:37 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/menu
2025-12-04 10:46:37 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/menu", parameters={}
2025-12-04 10:46:37 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.MenuController#getAllMenuItems()
2025-12-04 10:46:37 [http-nio-8881-exec-6] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:46:37 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        mi1_0.id,
        mi1_0.category_id,
        mi1_0.created_at,
        mi1_0.description,
        mi1_0.device_id,
        mi1_0.image_path,
        mi1_0.is_available,
        mi1_0.is_deleted,
        mi1_0.is_veg,
        mi1_0.name,
        mi1_0.preparation_time,
        mi1_0.price,
        mi1_0.synced_at,
        mi1_0.tenant_id,
        mi1_0.updated_at,
        mi1_0.version 
    from
        public.menu_items mi1_0 
    where
        mi1_0.tenant_id=? 
        and mi1_0.is_deleted=?
2025-12-04 10:46:37 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:46:37 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[MenuItemDto(id=8a5577b8-36d5-4a3d-9299-903f009a42b9, categoryId=6ed45abe-f8f6-4966-8126-a3f0d0bd0aa (truncated)...]
2025-12-04 10:46:37 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:46:37 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/categories?activeOnly=true
2025-12-04 10:46:37 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:46:37 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/categories?activeOnly=true
2025-12-04 10:46:37 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/categories?activeOnly=true", parameters={masked}
2025-12-04 10:46:37 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.CategoryController#getAllCategories(UserDetails, Boolean)
2025-12-04 10:46:37 [http-nio-8881-exec-3] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:46:37 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:46:37 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.display_order,
        c1_0.is_active,
        c1_0.name,
        c1_0.tenant_id,
        c1_0.updated_at 
    from
        public.categories c1_0 
    where
        c1_0.tenant_id=? 
        and c1_0.is_active=? 
    order by
        c1_0.display_order
2025-12-04 10:46:37 [http-nio-8881-exec-3] DEBUG c.r.billing.service.CategoryService - Found 2 categories for tenant cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:46:37 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:46:37 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[CategoryDto(id=6ed45abe-f8f6-4966-8126-a3f0d0bd0aaa, name=Main course, displayOrder=1), CategoryDto (truncated)...]
2025-12-04 10:46:37 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:46:46 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/orders
2025-12-04 10:46:46 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:46:46 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/orders
2025-12-04 10:46:46 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/orders", parameters={}
2025-12-04 10:46:46 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#createOrder(CreateOrderRequest)
2025-12-04 10:46:46 [http-nio-8881-exec-7] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:46:46 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [CreateOrderRequest(tableId=null, customerName=null, customerPhone=null, orderType=DINE_IN, items=[Or (truncated)...]
2025-12-04 10:46:46 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 10:46:46 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        mi1_0.id,
        mi1_0.category_id,
        mi1_0.created_at,
        mi1_0.description,
        mi1_0.device_id,
        mi1_0.image_path,
        mi1_0.is_available,
        mi1_0.is_deleted,
        mi1_0.is_veg,
        mi1_0.name,
        mi1_0.preparation_time,
        mi1_0.price,
        mi1_0.synced_at,
        mi1_0.tenant_id,
        mi1_0.updated_at,
        mi1_0.version 
    from
        public.menu_items mi1_0 
    where
        mi1_0.id=?
2025-12-04 10:46:46 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        mi1_0.id,
        mi1_0.category_id,
        mi1_0.created_at,
        mi1_0.description,
        mi1_0.device_id,
        mi1_0.image_path,
        mi1_0.is_available,
        mi1_0.is_deleted,
        mi1_0.is_veg,
        mi1_0.name,
        mi1_0.preparation_time,
        mi1_0.price,
        mi1_0.synced_at,
        mi1_0.tenant_id,
        mi1_0.updated_at,
        mi1_0.version 
    from
        public.menu_items mi1_0 
    where
        mi1_0.id=?
2025-12-04 10:46:46 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.order_id=?
2025-12-04 10:46:46 [http-nio-8881-exec-7] INFO  c.r.billing.service.OrderService - Bill generated for order: 6129c578-f8ef-4c36-a5ac-1f5fea31b702
2025-12-04 10:46:46 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    insert 
    into
        public.orders
        (created_at, created_by, customer_name, customer_phone, device_id, discount_amount, is_deleted, notes, order_number, order_status, order_type, service_charge, subtotal, synced_at, table_id, tax_amount, tenant_id, total_amount, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-04 10:46:46 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    insert 
    into
        public.order_items
        (created_at, item_name, menu_item_id, order_id, quantity, special_instructions, status, total_price, unit_price, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-04 10:46:46 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    insert 
    into
        public.order_items
        (created_at, item_name, menu_item_id, order_id, quantity, special_instructions, status, total_price, unit_price, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-04 10:46:46 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    insert 
    into
        public.bills
        (bill_number, change_amount, created_at, discount_amount, generated_by, invoice_path, order_id, paid_amount, payment_method, payment_status, service_charge, subtotal, tax_amount, tenant_id, total_amount, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-04 10:46:46 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:46:46 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [OrderDto(id=6129c578-f8ef-4c36-a5ac-1f5fea31b702, orderNumber=ORD1764825406876, tableId=null, tableN (truncated)...]
2025-12-04 10:46:46 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-12-04 10:46:46 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/sync
2025-12-04 10:46:46 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:46:46 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/sync
2025-12-04 10:46:46 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/sync", parameters={}
2025-12-04 10:46:46 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.SyncController#performSync(SyncRequest)
2025-12-04 10:46:46 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:46:46 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [SyncRequest(deviceId=d23c59b8-4056-4cc6-b9bc-6ac5018951cf, lastSyncTime=1970-01-01T05:30, data=[Sync (truncated)...]
2025-12-04 10:46:46 [http-nio-8881-exec-4] ERROR c.r.billing.service.SyncService - Sync error for item: 1f9e0e3e-8c0e-4295-8980-b5e89b74383d
java.lang.IllegalArgumentException: Unknown entity type: category
	at com.restaurant.billing.service.SyncService.processSyncItem(SyncService.java:107)
	at com.restaurant.billing.service.SyncService.performSync(SyncService.java:34)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at com.restaurant.billing.service.SyncService$$SpringCGLIB$$0.performSync(<generated>)
	at com.restaurant.billing.controller.SyncController.performSync(SyncController.java:23)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 10:46:46 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 10:46:46 [http-nio-8881-exec-4] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
java.lang.IllegalArgumentException: No enum constant com.restaurant.billing.entity.SyncLog.SyncOperation.create
	at java.base/java.lang.Enum.valueOf(Enum.java:273)
	at com.restaurant.billing.entity.SyncLog$SyncOperation.valueOf(SyncLog.java:65)
	at com.restaurant.billing.service.SyncService.logSync(SyncService.java:158)
	at com.restaurant.billing.service.SyncService.performSync(SyncService.java:51)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at com.restaurant.billing.service.SyncService$$SpringCGLIB$$0.performSync(<generated>)
	at com.restaurant.billing.controller.SyncController.performSync(SyncController.java:23)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 10:46:46 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:46:46 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T10:46:46.959689495, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 10:46:46 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [java.lang.IllegalArgumentException: No enum constant com.restaurant.billing.entity.SyncLog.SyncOperation.create]
2025-12-04 10:46:46 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 10:47:41 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/orders
2025-12-04 10:47:41 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:47:41 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/orders
2025-12-04 10:47:41 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/orders", parameters={}
2025-12-04 10:47:41 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#getAllOrders()
2025-12-04 10:47:41 [http-nio-8881-exec-5] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:47:41 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:47:41 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:47:41 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:47:41 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:47:41 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:47:41 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:47:41 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:47:41 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[OrderDto(id=3d2cc165-482d-4290-b220-105d1ad18880, orderNumber=ORD1764763565538, tableId=null, table (truncated)...]
2025-12-04 10:47:41 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:47:42 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/today-sales
2025-12-04 10:47:42 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:47:42 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/today-sales
2025-12-04 10:47:42 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/today-sales", parameters={}
2025-12-04 10:47:42 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTodaySales()
2025-12-04 10:47:42 [http-nio-8881-exec-2] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:47:42 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:47:42 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 10:47:42 [http-nio-8881-exec-2] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session
	at org.hibernate.collection.spi.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:636)
	at org.hibernate.collection.spi.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:219)
	at org.hibernate.collection.spi.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:615)
	at org.hibernate.collection.spi.AbstractPersistentCollection.read(AbstractPersistentCollection.java:138)
	at org.hibernate.collection.spi.PersistentBag.iterator(PersistentBag.java:369)
	at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1842)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.reduce(ReferencePipeline.java:657)
	at com.restaurant.billing.service.DashboardService.getTodaySales(DashboardService.java:80)
	at com.restaurant.billing.controller.DashboardController.getTodaySales(DashboardController.java:24)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 10:47:42 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:47:42 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T10:47:42.570093312, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 10:47:42 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session]
2025-12-04 10:47:42 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 10:47:42 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/pending-payments
2025-12-04 10:47:42 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/active-orders
2025-12-04 10:47:42 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/tables-occupied
2025-12-04 10:47:42 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/stats
2025-12-04 10:47:42 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:47:42 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:47:42 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:47:42 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:47:42 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/active-orders
2025-12-04 10:47:42 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/tables-occupied
2025-12-04 10:47:42 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/pending-payments
2025-12-04 10:47:42 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/stats
2025-12-04 10:47:42 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/active-orders", parameters={}
2025-12-04 10:47:42 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/tables-occupied", parameters={}
2025-12-04 10:47:42 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/pending-payments", parameters={}
2025-12-04 10:47:42 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/stats", parameters={}
2025-12-04 10:47:42 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTablesOccupied()
2025-12-04 10:47:42 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getActiveOrders()
2025-12-04 10:47:42 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getDashboardStats()
2025-12-04 10:47:42 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getPendingPayments()
2025-12-04 10:47:42 [http-nio-8881-exec-6] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:47:42 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:47:42 [http-nio-8881-exec-7] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:47:42 [http-nio-8881-exec-3] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:47:42 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 10:47:42 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 10:47:42 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 10:47:42 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:47:42 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:47:42 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 10:47:42 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:47:42 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:47:42 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 10:47:42 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 10:47:42 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:47:42 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:47:42 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:47:42 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:47:42 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 10:47:42 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 10:47:42 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:47:42 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{activeOrders=0, pendingPayments=0, tablesOccupied=0, todaySales=0}]
2025-12-04 10:47:42 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:47:42 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/orders
2025-12-04 10:47:42 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:47:42 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/orders
2025-12-04 10:47:42 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/orders", parameters={}
2025-12-04 10:47:42 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#getAllOrders()
2025-12-04 10:47:42 [http-nio-8881-exec-1] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:47:42 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:47:42 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:47:42 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:47:42 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:47:42 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:47:42 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:47:42 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:47:42 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[OrderDto(id=3d2cc165-482d-4290-b220-105d1ad18880, orderNumber=ORD1764763565538, tableId=null, table (truncated)...]
2025-12-04 10:47:42 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:47:46 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/orders
2025-12-04 10:47:46 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:47:46 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/orders
2025-12-04 10:47:46 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/orders", parameters={}
2025-12-04 10:47:46 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#getAllOrders()
2025-12-04 10:47:46 [http-nio-8881-exec-9] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:47:46 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:47:46 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:47:46 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:47:46 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:47:46 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:47:46 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:47:46 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:47:46 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[OrderDto(id=3d2cc165-482d-4290-b220-105d1ad18880, orderNumber=ORD1764763565538, tableId=null, table (truncated)...]
2025-12-04 10:47:46 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:47:47 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/menu
2025-12-04 10:47:47 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:47:47 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/menu
2025-12-04 10:47:47 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/menu", parameters={}
2025-12-04 10:47:47 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.MenuController#getAllMenuItems()
2025-12-04 10:47:47 [http-nio-8881-exec-8] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:47:47 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        mi1_0.id,
        mi1_0.category_id,
        mi1_0.created_at,
        mi1_0.description,
        mi1_0.device_id,
        mi1_0.image_path,
        mi1_0.is_available,
        mi1_0.is_deleted,
        mi1_0.is_veg,
        mi1_0.name,
        mi1_0.preparation_time,
        mi1_0.price,
        mi1_0.synced_at,
        mi1_0.tenant_id,
        mi1_0.updated_at,
        mi1_0.version 
    from
        public.menu_items mi1_0 
    where
        mi1_0.tenant_id=? 
        and mi1_0.is_deleted=?
2025-12-04 10:47:47 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:47:47 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[MenuItemDto(id=8a5577b8-36d5-4a3d-9299-903f009a42b9, categoryId=6ed45abe-f8f6-4966-8126-a3f0d0bd0aa (truncated)...]
2025-12-04 10:47:47 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:47:47 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/categories?activeOnly=true
2025-12-04 10:47:47 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:47:47 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/categories?activeOnly=true
2025-12-04 10:47:47 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/categories?activeOnly=true", parameters={masked}
2025-12-04 10:47:47 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.CategoryController#getAllCategories(UserDetails, Boolean)
2025-12-04 10:47:47 [http-nio-8881-exec-10] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:47:47 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:47:47 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.display_order,
        c1_0.is_active,
        c1_0.name,
        c1_0.tenant_id,
        c1_0.updated_at 
    from
        public.categories c1_0 
    where
        c1_0.tenant_id=? 
        and c1_0.is_active=? 
    order by
        c1_0.display_order
2025-12-04 10:47:47 [http-nio-8881-exec-10] DEBUG c.r.billing.service.CategoryService - Found 2 categories for tenant cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:47:47 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:47:47 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[CategoryDto(id=6ed45abe-f8f6-4966-8126-a3f0d0bd0aaa, name=Main course, displayOrder=1), CategoryDto (truncated)...]
2025-12-04 10:47:47 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:47:48 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/reports/day-wise?startDate=2025-11-27T10%3A47%3A48.807&endDate=2025-12-04T10%3A47%3A48.807
2025-12-04 10:47:48 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/reports/day-wise?startDate=2025-11-27T10%3A47%3A48.807&endDate=2025-12-04T10%3A47%3A48.807
2025-12-04 10:47:48 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:47:48 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/reports/day-wise?startDate=2025-11-27T10%3A47%3A48.807&endDate=2025-12-04T10%3A47%3A48.807
2025-12-04 10:47:48 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/day-wise?startDate=2025-11-27T10%3A47%3A48.807&endDate=2025-12-04T10%3A47%3A48.807", parameters={masked}
2025-12-04 10:47:48 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.ReportController#getDayWiseSales(LocalDateTime, LocalDateTime)
2025-12-04 10:47:48 [http-nio-8881-exec-2] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:47:48 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 10:47:48 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:47:48 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[{date=2025-12-03, totalSales=0}, {date=2025-12-04, totalSales=0}]]
2025-12-04 10:47:48 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:47:48 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/reports/product-wise?startDate=2025-11-27T10%3A47%3A48.807&endDate=2025-12-04T10%3A47%3A48.807
2025-12-04 10:47:48 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/reports/product-wise?startDate=2025-11-27T10%3A47%3A48.807&endDate=2025-12-04T10%3A47%3A48.807
2025-12-04 10:47:48 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:47:48 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/reports/product-wise?startDate=2025-11-27T10%3A47%3A48.807&endDate=2025-12-04T10%3A47%3A48.807
2025-12-04 10:47:48 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/product-wise?startDate=2025-11-27T10%3A47%3A48.807&endDate=2025-12-04T10%3A47%3A48.807", parameters={masked}
2025-12-04 10:47:48 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.ReportController#getProductWiseSales(LocalDateTime, LocalDateTime)
2025-12-04 10:47:48 [http-nio-8881-exec-7] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:47:48 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        oi1_0.menu_item_id,
        oi1_0.item_name,
        sum(oi1_0.quantity),
        sum(oi1_0.total_price) 
    from
        public.order_items oi1_0 
    join
        public.orders o1_0 
            on o1_0.id=oi1_0.order_id 
    where
        o1_0.tenant_id=? 
        and o1_0.created_at between ? and ? 
    group by
        oi1_0.menu_item_id,
        oi1_0.item_name 
    order by
        sum(oi1_0.total_price) desc
2025-12-04 10:47:48 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:47:48 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[{menuItemId=8a5577b8-36d5-4a3d-9299-903f009a42b9, itemName=TEA, totalQuantity=10, totalRevenue=150. (truncated)...]
2025-12-04 10:47:48 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:47:50 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/reports/day-wise?startDate=2025-12-04T00%3A00%3A00.000&endDate=2025-12-04T10%3A47%3A50.237
2025-12-04 10:47:50 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/reports/day-wise?startDate=2025-12-04T00%3A00%3A00.000&endDate=2025-12-04T10%3A47%3A50.237
2025-12-04 10:47:50 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:47:50 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/reports/day-wise?startDate=2025-12-04T00%3A00%3A00.000&endDate=2025-12-04T10%3A47%3A50.237
2025-12-04 10:47:50 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/day-wise?startDate=2025-12-04T00%3A00%3A00.000&endDate=2025-12-04T10%3A47%3A50.237", parameters={masked}
2025-12-04 10:47:50 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.ReportController#getDayWiseSales(LocalDateTime, LocalDateTime)
2025-12-04 10:47:50 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:47:50 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 10:47:50 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:47:50 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[{date=2025-12-04, totalSales=0}]]
2025-12-04 10:47:50 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:47:50 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/reports/product-wise?startDate=2025-12-04T00%3A00%3A00.000&endDate=2025-12-04T10%3A47%3A50.237
2025-12-04 10:47:50 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/reports/product-wise?startDate=2025-12-04T00%3A00%3A00.000&endDate=2025-12-04T10%3A47%3A50.237
2025-12-04 10:47:50 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:47:50 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/reports/product-wise?startDate=2025-12-04T00%3A00%3A00.000&endDate=2025-12-04T10%3A47%3A50.237
2025-12-04 10:47:50 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/product-wise?startDate=2025-12-04T00%3A00%3A00.000&endDate=2025-12-04T10%3A47%3A50.237", parameters={masked}
2025-12-04 10:47:50 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.ReportController#getProductWiseSales(LocalDateTime, LocalDateTime)
2025-12-04 10:47:50 [http-nio-8881-exec-9] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:47:50 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        oi1_0.menu_item_id,
        oi1_0.item_name,
        sum(oi1_0.quantity),
        sum(oi1_0.total_price) 
    from
        public.order_items oi1_0 
    join
        public.orders o1_0 
            on o1_0.id=oi1_0.order_id 
    where
        o1_0.tenant_id=? 
        and o1_0.created_at between ? and ? 
    group by
        oi1_0.menu_item_id,
        oi1_0.item_name 
    order by
        sum(oi1_0.total_price) desc
2025-12-04 10:47:50 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:47:50 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[{menuItemId=910b21d2-8fbe-4306-9a30-db48d7361b2e, itemName=Pongal, totalQuantity=2, totalRevenue=10 (truncated)...]
2025-12-04 10:47:50 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:47:51 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/reports/day-wise?startDate=2025-11-27T10%3A47%3A51.244&endDate=2025-12-04T10%3A47%3A51.244
2025-12-04 10:47:51 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/reports/day-wise?startDate=2025-11-27T10%3A47%3A51.244&endDate=2025-12-04T10%3A47%3A51.244
2025-12-04 10:47:51 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:47:51 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/reports/day-wise?startDate=2025-11-27T10%3A47%3A51.244&endDate=2025-12-04T10%3A47%3A51.244
2025-12-04 10:47:51 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/day-wise?startDate=2025-11-27T10%3A47%3A51.244&endDate=2025-12-04T10%3A47%3A51.244", parameters={masked}
2025-12-04 10:47:51 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.ReportController#getDayWiseSales(LocalDateTime, LocalDateTime)
2025-12-04 10:47:51 [http-nio-8881-exec-10] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:47:51 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 10:47:51 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:47:51 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[{date=2025-12-03, totalSales=0}, {date=2025-12-04, totalSales=0}]]
2025-12-04 10:47:51 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:47:51 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/reports/product-wise?startDate=2025-11-27T10%3A47%3A51.244&endDate=2025-12-04T10%3A47%3A51.244
2025-12-04 10:47:51 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/reports/product-wise?startDate=2025-11-27T10%3A47%3A51.244&endDate=2025-12-04T10%3A47%3A51.244
2025-12-04 10:47:51 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:47:51 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/reports/product-wise?startDate=2025-11-27T10%3A47%3A51.244&endDate=2025-12-04T10%3A47%3A51.244
2025-12-04 10:47:51 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/product-wise?startDate=2025-11-27T10%3A47%3A51.244&endDate=2025-12-04T10%3A47%3A51.244", parameters={masked}
2025-12-04 10:47:51 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.ReportController#getProductWiseSales(LocalDateTime, LocalDateTime)
2025-12-04 10:47:51 [http-nio-8881-exec-2] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:47:51 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        oi1_0.menu_item_id,
        oi1_0.item_name,
        sum(oi1_0.quantity),
        sum(oi1_0.total_price) 
    from
        public.order_items oi1_0 
    join
        public.orders o1_0 
            on o1_0.id=oi1_0.order_id 
    where
        o1_0.tenant_id=? 
        and o1_0.created_at between ? and ? 
    group by
        oi1_0.menu_item_id,
        oi1_0.item_name 
    order by
        sum(oi1_0.total_price) desc
2025-12-04 10:47:51 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:47:51 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[{menuItemId=8a5577b8-36d5-4a3d-9299-903f009a42b9, itemName=TEA, totalQuantity=10, totalRevenue=150. (truncated)...]
2025-12-04 10:47:51 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:47:51 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/reports/day-wise?startDate=2025-12-01T00%3A00%3A00.000&endDate=2025-12-04T10%3A47%3A51.940
2025-12-04 10:47:51 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/reports/day-wise?startDate=2025-12-01T00%3A00%3A00.000&endDate=2025-12-04T10%3A47%3A51.940
2025-12-04 10:47:51 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:47:51 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/reports/day-wise?startDate=2025-12-01T00%3A00%3A00.000&endDate=2025-12-04T10%3A47%3A51.940
2025-12-04 10:47:51 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/day-wise?startDate=2025-12-01T00%3A00%3A00.000&endDate=2025-12-04T10%3A47%3A51.940", parameters={masked}
2025-12-04 10:47:51 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.ReportController#getDayWiseSales(LocalDateTime, LocalDateTime)
2025-12-04 10:47:51 [http-nio-8881-exec-7] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:47:52 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 10:47:52 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:47:52 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[{date=2025-12-03, totalSales=0}, {date=2025-12-04, totalSales=0}]]
2025-12-04 10:47:52 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:47:52 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/reports/product-wise?startDate=2025-12-01T00%3A00%3A00.000&endDate=2025-12-04T10%3A47%3A51.940
2025-12-04 10:47:52 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/reports/product-wise?startDate=2025-12-01T00%3A00%3A00.000&endDate=2025-12-04T10%3A47%3A51.940
2025-12-04 10:47:52 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:47:52 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/reports/product-wise?startDate=2025-12-01T00%3A00%3A00.000&endDate=2025-12-04T10%3A47%3A51.940
2025-12-04 10:47:52 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/product-wise?startDate=2025-12-01T00%3A00%3A00.000&endDate=2025-12-04T10%3A47%3A51.940", parameters={masked}
2025-12-04 10:47:52 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.ReportController#getProductWiseSales(LocalDateTime, LocalDateTime)
2025-12-04 10:47:52 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:47:52 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        oi1_0.menu_item_id,
        oi1_0.item_name,
        sum(oi1_0.quantity),
        sum(oi1_0.total_price) 
    from
        public.order_items oi1_0 
    join
        public.orders o1_0 
            on o1_0.id=oi1_0.order_id 
    where
        o1_0.tenant_id=? 
        and o1_0.created_at between ? and ? 
    group by
        oi1_0.menu_item_id,
        oi1_0.item_name 
    order by
        sum(oi1_0.total_price) desc
2025-12-04 10:47:52 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:47:52 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[{menuItemId=8a5577b8-36d5-4a3d-9299-903f009a42b9, itemName=TEA, totalQuantity=10, totalRevenue=150. (truncated)...]
2025-12-04 10:47:52 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:47:55 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/today-sales
2025-12-04 10:47:55 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/tables-occupied
2025-12-04 10:47:55 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/active-orders
2025-12-04 10:47:55 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/pending-payments
2025-12-04 10:47:55 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/stats
2025-12-04 10:47:55 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:47:55 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:47:55 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:47:55 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:47:55 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:47:55 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/today-sales
2025-12-04 10:47:55 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/active-orders
2025-12-04 10:47:55 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/stats
2025-12-04 10:47:55 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/pending-payments
2025-12-04 10:47:55 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/active-orders", parameters={}
2025-12-04 10:47:55 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/today-sales", parameters={}
2025-12-04 10:47:55 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/stats", parameters={}
2025-12-04 10:47:55 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/pending-payments", parameters={}
2025-12-04 10:47:55 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/tables-occupied
2025-12-04 10:47:55 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getActiveOrders()
2025-12-04 10:47:55 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/tables-occupied", parameters={}
2025-12-04 10:47:55 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getDashboardStats()
2025-12-04 10:47:55 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getPendingPayments()
2025-12-04 10:47:55 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTodaySales()
2025-12-04 10:47:55 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTablesOccupied()
2025-12-04 10:47:55 [http-nio-8881-exec-1] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:47:55 [http-nio-8881-exec-8] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:47:55 [http-nio-8881-exec-5] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:47:55 [http-nio-8881-exec-10] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:47:55 [http-nio-8881-exec-9] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:47:55 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 10:47:55 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 10:47:55 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 10:47:55 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:47:55 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:47:55 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:47:55 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:47:55 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 10:47:55 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 10:47:55 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:47:55 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 10:47:55 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 10:47:55 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:47:55 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:47:55 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:47:55 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:47:55 [http-nio-8881-exec-1] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session
	at org.hibernate.collection.spi.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:636)
	at org.hibernate.collection.spi.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:219)
	at org.hibernate.collection.spi.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:615)
	at org.hibernate.collection.spi.AbstractPersistentCollection.read(AbstractPersistentCollection.java:138)
	at org.hibernate.collection.spi.PersistentBag.iterator(PersistentBag.java:369)
	at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1842)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.reduce(ReferencePipeline.java:657)
	at com.restaurant.billing.service.DashboardService.getTodaySales(DashboardService.java:80)
	at com.restaurant.billing.controller.DashboardController.getTodaySales(DashboardController.java:24)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 10:47:55 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:47:55 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T10:47:55.313581696, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 10:47:55 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session]
2025-12-04 10:47:55 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 10:47:55 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 10:47:55 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 10:47:55 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:47:55 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{activeOrders=0, pendingPayments=0, tablesOccupied=0, todaySales=0}]
2025-12-04 10:47:55 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:47:55 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/orders
2025-12-04 10:47:55 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:47:55 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/orders
2025-12-04 10:47:55 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/orders", parameters={}
2025-12-04 10:47:55 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#getAllOrders()
2025-12-04 10:47:55 [http-nio-8881-exec-2] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:47:55 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:47:55 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:47:55 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:47:55 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:47:55 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:47:55 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:47:55 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:47:55 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[OrderDto(id=3d2cc165-482d-4290-b220-105d1ad18880, orderNumber=ORD1764763565538, tableId=null, table (truncated)...]
2025-12-04 10:47:55 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:47:57 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/menu
2025-12-04 10:47:57 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:47:57 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/menu
2025-12-04 10:47:57 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/menu", parameters={}
2025-12-04 10:47:57 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.MenuController#getAllMenuItems()
2025-12-04 10:47:57 [http-nio-8881-exec-3] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:47:57 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        mi1_0.id,
        mi1_0.category_id,
        mi1_0.created_at,
        mi1_0.description,
        mi1_0.device_id,
        mi1_0.image_path,
        mi1_0.is_available,
        mi1_0.is_deleted,
        mi1_0.is_veg,
        mi1_0.name,
        mi1_0.preparation_time,
        mi1_0.price,
        mi1_0.synced_at,
        mi1_0.tenant_id,
        mi1_0.updated_at,
        mi1_0.version 
    from
        public.menu_items mi1_0 
    where
        mi1_0.tenant_id=? 
        and mi1_0.is_deleted=?
2025-12-04 10:47:57 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:47:57 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[MenuItemDto(id=8a5577b8-36d5-4a3d-9299-903f009a42b9, categoryId=6ed45abe-f8f6-4966-8126-a3f0d0bd0aa (truncated)...]
2025-12-04 10:47:57 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:47:57 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/categories?activeOnly=true
2025-12-04 10:47:57 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:47:57 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/categories?activeOnly=true
2025-12-04 10:47:57 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/categories?activeOnly=true", parameters={masked}
2025-12-04 10:47:57 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.CategoryController#getAllCategories(UserDetails, Boolean)
2025-12-04 10:47:57 [http-nio-8881-exec-7] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:47:57 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:47:57 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.display_order,
        c1_0.is_active,
        c1_0.name,
        c1_0.tenant_id,
        c1_0.updated_at 
    from
        public.categories c1_0 
    where
        c1_0.tenant_id=? 
        and c1_0.is_active=? 
    order by
        c1_0.display_order
2025-12-04 10:47:57 [http-nio-8881-exec-7] DEBUG c.r.billing.service.CategoryService - Found 2 categories for tenant cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:47:57 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:47:57 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[CategoryDto(id=6ed45abe-f8f6-4966-8126-a3f0d0bd0aaa, name=Main course, displayOrder=1), CategoryDto (truncated)...]
2025-12-04 10:47:57 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:49:08 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/restaurant/profile
2025-12-04 10:49:08 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 10:49:08 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:49:08 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 10:49:08 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 10:49:08 [http-nio-8881-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-12-04 10:49:08 [http-nio-8881-exec-1] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:49:08 [http-nio-8881-exec-1] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-12-04 10:49:08 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 10:49:08 [http-nio-8881-exec-1] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/restaurant/profile.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:586)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 10:49:08 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:49:08 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T10:49:08.714590233, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 10:49:08 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/restaurant/profile.]
2025-12-04 10:49:08 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 10:49:16 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 10:49:16 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:49:16 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 10:49:16 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 10:49:16 [http-nio-8881-exec-5] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-12-04 10:49:16 [http-nio-8881-exec-5] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:49:16 [http-nio-8881-exec-5] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-12-04 10:49:16 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 10:49:16 [http-nio-8881-exec-5] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/restaurant/profile.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:586)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 10:49:16 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:49:16 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T10:49:16.195144073, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 10:49:16 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/restaurant/profile.]
2025-12-04 10:49:16 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 10:49:25 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 10:49:25 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:49:25 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 10:49:25 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 10:49:25 [http-nio-8881-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-12-04 10:49:25 [http-nio-8881-exec-2] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:49:25 [http-nio-8881-exec-2] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-12-04 10:49:25 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 10:49:25 [http-nio-8881-exec-2] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/restaurant/profile.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:586)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 10:49:25 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:49:25 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T10:49:25.973607003, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 10:49:25 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/restaurant/profile.]
2025-12-04 10:49:25 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 10:54:04 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/auth/login
2025-12-04 10:54:04 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-12-04 10:54:04 [http-nio-8881-exec-7] ERROR c.r.billing.security.JwtUtil - Invalid JWT token: JWT expired at 2025-12-03T13:13:21Z. Current time: 2025-12-04T05:24:04Z, a difference of 58243137 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-12-04 10:54:04 [http-nio-8881-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-04 10:54:04 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-12-04 10:54:04 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-12-04 10:54:04 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.AuthController#login(LoginRequest)
2025-12-04 10:54:04 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(restaurantCode=REST14DAA490, username=Ganesh@gmail.com, password=Rest@1234)]
2025-12-04 10:54:04 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.restaurant_code=?
2025-12-04 10:54:04 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=? 
        and u1_0.tenant_id=?
2025-12-04 10:54:04 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    update
        public.users 
    set
        auth_provider=?,
        email=?,
        google_id=?,
        is_active=?,
        last_login=?,
        name=?,
        password_hash=?,
        phone=?,
        refresh_token=?,
        refresh_token_expiry=?,
        role=?,
        tenant_id=?,
        updated_at=? 
    where
        id=?
2025-12-04 10:54:04 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:54:04 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiT1dORVIiLCJ0ZW5hbnRJZCI6ImNjNzFkN2U0LWNmNj (truncated)...]
2025-12-04 10:54:04 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:54:04 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/today-sales
2025-12-04 10:54:04 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/active-orders
2025-12-04 10:54:04 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/pending-payments
2025-12-04 10:54:04 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/today-sales
2025-12-04 10:54:04 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/active-orders
2025-12-04 10:54:04 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/tables-occupied
2025-12-04 10:54:04 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/pending-payments
2025-12-04 10:54:04 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/stats
2025-12-04 10:54:04 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:54:04 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:54:04 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:54:04 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/today-sales
2025-12-04 10:54:04 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/today-sales", parameters={}
2025-12-04 10:54:04 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTodaySales()
2025-12-04 10:54:04 [http-nio-8881-exec-10] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:54:04 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/pending-payments
2025-12-04 10:54:04 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/active-orders
2025-12-04 10:54:04 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/pending-payments", parameters={}
2025-12-04 10:54:04 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/active-orders", parameters={}
2025-12-04 10:54:04 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getPendingPayments()
2025-12-04 10:54:04 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getActiveOrders()
2025-12-04 10:54:04 [http-nio-8881-exec-5] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:54:04 [http-nio-8881-exec-8] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:54:04 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:54:04 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/tables-occupied
2025-12-04 10:54:04 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 10:54:04 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:54:04 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/stats
2025-12-04 10:54:04 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 10:54:04 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:54:04 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 10:54:04 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:54:04 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 10:54:04 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:54:04 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:54:04 [http-nio-8881-exec-10] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session
	at org.hibernate.collection.spi.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:636)
	at org.hibernate.collection.spi.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:219)
	at org.hibernate.collection.spi.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:615)
	at org.hibernate.collection.spi.AbstractPersistentCollection.read(AbstractPersistentCollection.java:138)
	at org.hibernate.collection.spi.PersistentBag.iterator(PersistentBag.java:369)
	at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1842)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.reduce(ReferencePipeline.java:657)
	at com.restaurant.billing.service.DashboardService.getTodaySales(DashboardService.java:80)
	at com.restaurant.billing.controller.DashboardController.getTodaySales(DashboardController.java:24)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 10:54:04 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:54:04 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T10:54:04.526605742, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 10:54:04 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:54:04 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session]
2025-12-04 10:54:04 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 10:54:04 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:54:04 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/tables-occupied
2025-12-04 10:54:04 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/tables-occupied", parameters={}
2025-12-04 10:54:04 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTablesOccupied()
2025-12-04 10:54:04 [http-nio-8881-exec-3] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:54:04 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/stats
2025-12-04 10:54:04 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/stats", parameters={}
2025-12-04 10:54:04 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 10:54:04 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getDashboardStats()
2025-12-04 10:54:04 [http-nio-8881-exec-7] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:54:04 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:54:04 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 10:54:04 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 10:54:04 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:54:04 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:54:04 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 10:54:04 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 10:54:04 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:54:04 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{activeOrders=0, pendingPayments=0, tablesOccupied=0, todaySales=0}]
2025-12-04 10:54:04 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:54:04 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/orders
2025-12-04 10:54:04 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/orders
2025-12-04 10:54:04 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:54:04 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/orders
2025-12-04 10:54:04 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/orders", parameters={}
2025-12-04 10:54:04 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#getAllOrders()
2025-12-04 10:54:04 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:54:04 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:54:04 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:54:04 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:54:04 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:54:04 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:54:04 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:54:04 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:54:04 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[OrderDto(id=3d2cc165-482d-4290-b220-105d1ad18880, orderNumber=ORD1764763565538, tableId=null, table (truncated)...]
2025-12-04 10:54:04 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:54:07 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/orders
2025-12-04 10:54:07 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:54:07 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/orders
2025-12-04 10:54:07 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/orders", parameters={}
2025-12-04 10:54:07 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#getAllOrders()
2025-12-04 10:54:07 [http-nio-8881-exec-6] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:54:07 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:54:07 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:54:07 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:54:07 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:54:07 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:54:07 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:54:07 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:54:07 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[OrderDto(id=3d2cc165-482d-4290-b220-105d1ad18880, orderNumber=ORD1764763565538, tableId=null, table (truncated)...]
2025-12-04 10:54:07 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:54:09 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/menu
2025-12-04 10:54:09 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/menu
2025-12-04 10:54:09 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:54:09 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/menu
2025-12-04 10:54:09 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/menu", parameters={}
2025-12-04 10:54:09 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.MenuController#getAllMenuItems()
2025-12-04 10:54:09 [http-nio-8881-exec-2] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:54:09 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        mi1_0.id,
        mi1_0.category_id,
        mi1_0.created_at,
        mi1_0.description,
        mi1_0.device_id,
        mi1_0.image_path,
        mi1_0.is_available,
        mi1_0.is_deleted,
        mi1_0.is_veg,
        mi1_0.name,
        mi1_0.preparation_time,
        mi1_0.price,
        mi1_0.synced_at,
        mi1_0.tenant_id,
        mi1_0.updated_at,
        mi1_0.version 
    from
        public.menu_items mi1_0 
    where
        mi1_0.tenant_id=? 
        and mi1_0.is_deleted=?
2025-12-04 10:54:09 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:54:09 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[MenuItemDto(id=8a5577b8-36d5-4a3d-9299-903f009a42b9, categoryId=6ed45abe-f8f6-4966-8126-a3f0d0bd0aa (truncated)...]
2025-12-04 10:54:09 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:54:09 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/categories?activeOnly=true
2025-12-04 10:54:09 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/categories?activeOnly=true
2025-12-04 10:54:09 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:54:09 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/categories?activeOnly=true
2025-12-04 10:54:09 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/categories?activeOnly=true", parameters={masked}
2025-12-04 10:54:09 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.CategoryController#getAllCategories(UserDetails, Boolean)
2025-12-04 10:54:09 [http-nio-8881-exec-8] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:54:09 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:54:09 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.display_order,
        c1_0.is_active,
        c1_0.name,
        c1_0.tenant_id,
        c1_0.updated_at 
    from
        public.categories c1_0 
    where
        c1_0.tenant_id=? 
        and c1_0.is_active=? 
    order by
        c1_0.display_order
2025-12-04 10:54:09 [http-nio-8881-exec-8] DEBUG c.r.billing.service.CategoryService - Found 2 categories for tenant cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:54:09 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:54:09 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[CategoryDto(id=6ed45abe-f8f6-4966-8126-a3f0d0bd0aaa, name=Main course, displayOrder=1), CategoryDto (truncated)...]
2025-12-04 10:54:09 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:54:10 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/reports/day-wise?startDate=2025-11-27T10%3A54%3A10.699&endDate=2025-12-04T10%3A54%3A10.699
2025-12-04 10:54:10 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/reports/day-wise?startDate=2025-11-27T10%3A54%3A10.699&endDate=2025-12-04T10%3A54%3A10.699
2025-12-04 10:54:10 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:54:10 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/reports/day-wise?startDate=2025-11-27T10%3A54%3A10.699&endDate=2025-12-04T10%3A54%3A10.699
2025-12-04 10:54:10 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/day-wise?startDate=2025-11-27T10%3A54%3A10.699&endDate=2025-12-04T10%3A54%3A10.699", parameters={masked}
2025-12-04 10:54:10 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.ReportController#getDayWiseSales(LocalDateTime, LocalDateTime)
2025-12-04 10:54:10 [http-nio-8881-exec-3] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:54:10 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 10:54:10 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:54:10 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[{date=2025-12-03, totalSales=0}, {date=2025-12-04, totalSales=0}]]
2025-12-04 10:54:10 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:54:10 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/reports/product-wise?startDate=2025-11-27T10%3A54%3A10.699&endDate=2025-12-04T10%3A54%3A10.699
2025-12-04 10:54:10 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/reports/product-wise?startDate=2025-11-27T10%3A54%3A10.699&endDate=2025-12-04T10%3A54%3A10.699
2025-12-04 10:54:10 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:54:10 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/reports/product-wise?startDate=2025-11-27T10%3A54%3A10.699&endDate=2025-12-04T10%3A54%3A10.699
2025-12-04 10:54:10 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/product-wise?startDate=2025-11-27T10%3A54%3A10.699&endDate=2025-12-04T10%3A54%3A10.699", parameters={masked}
2025-12-04 10:54:10 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.ReportController#getProductWiseSales(LocalDateTime, LocalDateTime)
2025-12-04 10:54:10 [http-nio-8881-exec-9] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:54:10 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        oi1_0.menu_item_id,
        oi1_0.item_name,
        sum(oi1_0.quantity),
        sum(oi1_0.total_price) 
    from
        public.order_items oi1_0 
    join
        public.orders o1_0 
            on o1_0.id=oi1_0.order_id 
    where
        o1_0.tenant_id=? 
        and o1_0.created_at between ? and ? 
    group by
        oi1_0.menu_item_id,
        oi1_0.item_name 
    order by
        sum(oi1_0.total_price) desc
2025-12-04 10:54:10 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:54:10 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[{menuItemId=8a5577b8-36d5-4a3d-9299-903f009a42b9, itemName=TEA, totalQuantity=10, totalRevenue=150. (truncated)...]
2025-12-04 10:54:10 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:54:12 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/reports/day-wise?startDate=2025-12-04T00%3A00%3A00.000&endDate=2025-12-04T10%3A54%3A12.180
2025-12-04 10:54:12 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/reports/day-wise?startDate=2025-12-04T00%3A00%3A00.000&endDate=2025-12-04T10%3A54%3A12.180
2025-12-04 10:54:12 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:54:12 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/reports/day-wise?startDate=2025-12-04T00%3A00%3A00.000&endDate=2025-12-04T10%3A54%3A12.180
2025-12-04 10:54:12 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/day-wise?startDate=2025-12-04T00%3A00%3A00.000&endDate=2025-12-04T10%3A54%3A12.180", parameters={masked}
2025-12-04 10:54:12 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.ReportController#getDayWiseSales(LocalDateTime, LocalDateTime)
2025-12-04 10:54:12 [http-nio-8881-exec-6] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:54:12 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 10:54:12 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:54:12 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[{date=2025-12-04, totalSales=0}]]
2025-12-04 10:54:12 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:54:12 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/reports/product-wise?startDate=2025-12-04T00%3A00%3A00.000&endDate=2025-12-04T10%3A54%3A12.180
2025-12-04 10:54:12 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/reports/product-wise?startDate=2025-12-04T00%3A00%3A00.000&endDate=2025-12-04T10%3A54%3A12.180
2025-12-04 10:54:12 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:54:12 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/reports/product-wise?startDate=2025-12-04T00%3A00%3A00.000&endDate=2025-12-04T10%3A54%3A12.180
2025-12-04 10:54:12 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/product-wise?startDate=2025-12-04T00%3A00%3A00.000&endDate=2025-12-04T10%3A54%3A12.180", parameters={masked}
2025-12-04 10:54:12 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.ReportController#getProductWiseSales(LocalDateTime, LocalDateTime)
2025-12-04 10:54:12 [http-nio-8881-exec-2] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:54:12 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        oi1_0.menu_item_id,
        oi1_0.item_name,
        sum(oi1_0.quantity),
        sum(oi1_0.total_price) 
    from
        public.order_items oi1_0 
    join
        public.orders o1_0 
            on o1_0.id=oi1_0.order_id 
    where
        o1_0.tenant_id=? 
        and o1_0.created_at between ? and ? 
    group by
        oi1_0.menu_item_id,
        oi1_0.item_name 
    order by
        sum(oi1_0.total_price) desc
2025-12-04 10:54:12 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:54:12 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[{menuItemId=910b21d2-8fbe-4306-9a30-db48d7361b2e, itemName=Pongal, totalQuantity=2, totalRevenue=10 (truncated)...]
2025-12-04 10:54:12 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:54:13 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/reports/day-wise?startDate=2025-12-01T00%3A00%3A00.000&endDate=2025-12-04T10%3A54%3A13.108
2025-12-04 10:54:13 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/reports/day-wise?startDate=2025-12-01T00%3A00%3A00.000&endDate=2025-12-04T10%3A54%3A13.108
2025-12-04 10:54:13 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:54:13 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/reports/day-wise?startDate=2025-12-01T00%3A00%3A00.000&endDate=2025-12-04T10%3A54%3A13.108
2025-12-04 10:54:13 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/day-wise?startDate=2025-12-01T00%3A00%3A00.000&endDate=2025-12-04T10%3A54%3A13.108", parameters={masked}
2025-12-04 10:54:13 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.ReportController#getDayWiseSales(LocalDateTime, LocalDateTime)
2025-12-04 10:54:13 [http-nio-8881-exec-8] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:54:13 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 10:54:13 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:54:13 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[{date=2025-12-03, totalSales=0}, {date=2025-12-04, totalSales=0}]]
2025-12-04 10:54:13 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:54:13 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/reports/product-wise?startDate=2025-12-01T00%3A00%3A00.000&endDate=2025-12-04T10%3A54%3A13.108
2025-12-04 10:54:13 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/reports/product-wise?startDate=2025-12-01T00%3A00%3A00.000&endDate=2025-12-04T10%3A54%3A13.108
2025-12-04 10:54:13 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:54:13 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/reports/product-wise?startDate=2025-12-01T00%3A00%3A00.000&endDate=2025-12-04T10%3A54%3A13.108
2025-12-04 10:54:13 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/product-wise?startDate=2025-12-01T00%3A00%3A00.000&endDate=2025-12-04T10%3A54%3A13.108", parameters={masked}
2025-12-04 10:54:13 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.ReportController#getProductWiseSales(LocalDateTime, LocalDateTime)
2025-12-04 10:54:13 [http-nio-8881-exec-3] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:54:13 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        oi1_0.menu_item_id,
        oi1_0.item_name,
        sum(oi1_0.quantity),
        sum(oi1_0.total_price) 
    from
        public.order_items oi1_0 
    join
        public.orders o1_0 
            on o1_0.id=oi1_0.order_id 
    where
        o1_0.tenant_id=? 
        and o1_0.created_at between ? and ? 
    group by
        oi1_0.menu_item_id,
        oi1_0.item_name 
    order by
        sum(oi1_0.total_price) desc
2025-12-04 10:54:13 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:54:13 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[{menuItemId=8a5577b8-36d5-4a3d-9299-903f009a42b9, itemName=TEA, totalQuantity=10, totalRevenue=150. (truncated)...]
2025-12-04 10:54:13 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:54:15 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/restaurant/profile
2025-12-04 10:54:15 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 10:54:15 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:54:15 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 10:54:15 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 10:54:15 [http-nio-8881-exec-9] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-12-04 10:54:15 [http-nio-8881-exec-9] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:54:15 [http-nio-8881-exec-9] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-12-04 10:54:15 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 10:54:15 [http-nio-8881-exec-9] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/restaurant/profile.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:586)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 10:54:15 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:54:15 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T10:54:15.805527452, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 10:54:15 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/restaurant/profile.]
2025-12-04 10:54:15 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 10:54:17 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/categories?activeOnly=true
2025-12-04 10:54:17 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:54:17 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/categories?activeOnly=true
2025-12-04 10:54:17 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/categories?activeOnly=true", parameters={masked}
2025-12-04 10:54:17 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.CategoryController#getAllCategories(UserDetails, Boolean)
2025-12-04 10:54:17 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:54:17 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:54:17 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.display_order,
        c1_0.is_active,
        c1_0.name,
        c1_0.tenant_id,
        c1_0.updated_at 
    from
        public.categories c1_0 
    where
        c1_0.tenant_id=? 
        and c1_0.is_active=? 
    order by
        c1_0.display_order
2025-12-04 10:54:17 [http-nio-8881-exec-4] DEBUG c.r.billing.service.CategoryService - Found 2 categories for tenant cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:54:17 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:54:17 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[CategoryDto(id=6ed45abe-f8f6-4966-8126-a3f0d0bd0aaa, name=Main course, displayOrder=1), CategoryDto (truncated)...]
2025-12-04 10:54:17 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:54:20 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/settings/tax
2025-12-04 10:54:20 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/settings/tax
2025-12-04 10:54:20 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:54:20 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/settings/tax
2025-12-04 10:54:20 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/settings/tax", parameters={}
2025-12-04 10:54:20 [http-nio-8881-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-12-04 10:54:20 [http-nio-8881-exec-1] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:54:20 [http-nio-8881-exec-1] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-12-04 10:54:20 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 10:54:20 [http-nio-8881-exec-1] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/settings/tax.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:586)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 10:54:20 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:54:20 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T10:54:20.033503447, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 10:54:20 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/settings/tax.]
2025-12-04 10:54:20 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 10:54:22 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/settings/tax
2025-12-04 10:54:22 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:54:22 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/settings/tax
2025-12-04 10:54:22 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/api/settings/tax", parameters={}
2025-12-04 10:54:22 [http-nio-8881-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-12-04 10:54:22 [http-nio-8881-exec-2] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:54:22 [http-nio-8881-exec-2] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-12-04 10:54:22 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 10:54:22 [http-nio-8881-exec-2] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/settings/tax.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:586)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:925)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:593)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 10:54:22 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:54:22 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T10:54:22.911801093, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 10:54:22 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/settings/tax.]
2025-12-04 10:54:22 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 10:54:24 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/today-sales
2025-12-04 10:54:24 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/active-orders
2025-12-04 10:54:24 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/pending-payments
2025-12-04 10:54:24 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/stats
2025-12-04 10:54:24 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/tables-occupied
2025-12-04 10:54:24 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:54:24 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:54:24 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:54:24 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/pending-payments
2025-12-04 10:54:24 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/today-sales
2025-12-04 10:54:24 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/active-orders
2025-12-04 10:54:24 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/today-sales", parameters={}
2025-12-04 10:54:24 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/pending-payments", parameters={}
2025-12-04 10:54:24 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/active-orders", parameters={}
2025-12-04 10:54:24 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTodaySales()
2025-12-04 10:54:24 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getPendingPayments()
2025-12-04 10:54:24 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getActiveOrders()
2025-12-04 10:54:24 [http-nio-8881-exec-5] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:54:24 [http-nio-8881-exec-10] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:54:24 [http-nio-8881-exec-8] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:54:24 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 10:54:24 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:54:24 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:54:24 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:54:24 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:54:24 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:54:24 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 10:54:24 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 10:54:24 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/stats
2025-12-04 10:54:24 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:54:24 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/stats", parameters={}
2025-12-04 10:54:24 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 10:54:24 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getDashboardStats()
2025-12-04 10:54:24 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/tables-occupied
2025-12-04 10:54:24 [http-nio-8881-exec-7] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:54:24 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/tables-occupied", parameters={}
2025-12-04 10:54:24 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTablesOccupied()
2025-12-04 10:54:24 [http-nio-8881-exec-3] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:54:24 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:54:24 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:54:24 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 10:54:24 [http-nio-8881-exec-5] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session
	at org.hibernate.collection.spi.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:636)
	at org.hibernate.collection.spi.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:219)
	at org.hibernate.collection.spi.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:615)
	at org.hibernate.collection.spi.AbstractPersistentCollection.read(AbstractPersistentCollection.java:138)
	at org.hibernate.collection.spi.PersistentBag.iterator(PersistentBag.java:369)
	at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1842)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.reduce(ReferencePipeline.java:657)
	at com.restaurant.billing.service.DashboardService.getTodaySales(DashboardService.java:80)
	at com.restaurant.billing.controller.DashboardController.getTodaySales(DashboardController.java:24)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 10:54:24 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 10:54:24 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:54:24 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T10:54:24.633281071, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 10:54:24 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session]
2025-12-04 10:54:24 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 10:54:24 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:54:24 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 10:54:24 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:54:24 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:54:24 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 10:54:24 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 10:54:24 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:54:24 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{activeOrders=0, pendingPayments=0, tablesOccupied=0, todaySales=0}]
2025-12-04 10:54:24 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:54:24 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/orders
2025-12-04 10:54:24 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:54:24 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/orders
2025-12-04 10:54:24 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/orders", parameters={}
2025-12-04 10:54:24 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#getAllOrders()
2025-12-04 10:54:24 [http-nio-8881-exec-9] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:54:24 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:54:24 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:54:24 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:54:24 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:54:24 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:54:24 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:54:24 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:54:24 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[OrderDto(id=3d2cc165-482d-4290-b220-105d1ad18880, orderNumber=ORD1764763565538, tableId=null, table (truncated)...]
2025-12-04 10:54:24 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:54:26 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/menu
2025-12-04 10:54:26 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:54:26 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/menu
2025-12-04 10:54:26 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/menu", parameters={}
2025-12-04 10:54:26 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.MenuController#getAllMenuItems()
2025-12-04 10:54:26 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:54:26 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        mi1_0.id,
        mi1_0.category_id,
        mi1_0.created_at,
        mi1_0.description,
        mi1_0.device_id,
        mi1_0.image_path,
        mi1_0.is_available,
        mi1_0.is_deleted,
        mi1_0.is_veg,
        mi1_0.name,
        mi1_0.preparation_time,
        mi1_0.price,
        mi1_0.synced_at,
        mi1_0.tenant_id,
        mi1_0.updated_at,
        mi1_0.version 
    from
        public.menu_items mi1_0 
    where
        mi1_0.tenant_id=? 
        and mi1_0.is_deleted=?
2025-12-04 10:54:26 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:54:26 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[MenuItemDto(id=8a5577b8-36d5-4a3d-9299-903f009a42b9, categoryId=6ed45abe-f8f6-4966-8126-a3f0d0bd0aa (truncated)...]
2025-12-04 10:54:26 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:54:26 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/categories?activeOnly=true
2025-12-04 10:54:26 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:54:26 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/categories?activeOnly=true
2025-12-04 10:54:26 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/categories?activeOnly=true", parameters={masked}
2025-12-04 10:54:26 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.CategoryController#getAllCategories(UserDetails, Boolean)
2025-12-04 10:54:26 [http-nio-8881-exec-6] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:54:26 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:54:26 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.display_order,
        c1_0.is_active,
        c1_0.name,
        c1_0.tenant_id,
        c1_0.updated_at 
    from
        public.categories c1_0 
    where
        c1_0.tenant_id=? 
        and c1_0.is_active=? 
    order by
        c1_0.display_order
2025-12-04 10:54:26 [http-nio-8881-exec-6] DEBUG c.r.billing.service.CategoryService - Found 2 categories for tenant cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:54:26 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:54:26 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[CategoryDto(id=6ed45abe-f8f6-4966-8126-a3f0d0bd0aaa, name=Main course, displayOrder=1), CategoryDto (truncated)...]
2025-12-04 10:54:26 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:54:48 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/settings/tax
2025-12-04 10:54:48 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:54:48 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/settings/tax
2025-12-04 10:54:48 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/settings/tax", parameters={}
2025-12-04 10:54:48 [http-nio-8881-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-12-04 10:54:48 [http-nio-8881-exec-1] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:54:48 [http-nio-8881-exec-1] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-12-04 10:54:48 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 10:54:48 [http-nio-8881-exec-1] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/settings/tax.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:586)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 10:54:48 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:54:48 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T10:54:48.180090119, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 10:54:48 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/settings/tax.]
2025-12-04 10:54:48 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 10:54:51 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/settings/tax
2025-12-04 10:54:51 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:54:51 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/settings/tax
2025-12-04 10:54:51 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/api/settings/tax", parameters={}
2025-12-04 10:54:51 [http-nio-8881-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-12-04 10:54:51 [http-nio-8881-exec-2] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:54:51 [http-nio-8881-exec-2] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-12-04 10:54:51 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 10:54:51 [http-nio-8881-exec-2] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/settings/tax.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:586)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:925)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:593)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 10:54:51 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:54:51 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T10:54:51.758560898, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 10:54:51 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/settings/tax.]
2025-12-04 10:54:51 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 10:54:53 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/today-sales
2025-12-04 10:54:53 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/active-orders
2025-12-04 10:54:53 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/pending-payments
2025-12-04 10:54:53 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/tables-occupied
2025-12-04 10:54:53 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/stats
2025-12-04 10:54:53 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:54:53 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:54:53 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:54:53 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:54:53 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:54:53 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/tables-occupied
2025-12-04 10:54:53 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/active-orders
2025-12-04 10:54:53 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/stats
2025-12-04 10:54:53 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/stats", parameters={}
2025-12-04 10:54:53 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/tables-occupied", parameters={}
2025-12-04 10:54:53 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/active-orders", parameters={}
2025-12-04 10:54:53 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/pending-payments
2025-12-04 10:54:53 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getDashboardStats()
2025-12-04 10:54:53 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTablesOccupied()
2025-12-04 10:54:53 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getActiveOrders()
2025-12-04 10:54:53 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/today-sales
2025-12-04 10:54:53 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/pending-payments", parameters={}
2025-12-04 10:54:53 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/today-sales", parameters={}
2025-12-04 10:54:53 [http-nio-8881-exec-8] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:54:53 [http-nio-8881-exec-3] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:54:53 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getPendingPayments()
2025-12-04 10:54:53 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTodaySales()
2025-12-04 10:54:53 [http-nio-8881-exec-7] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:54:53 [http-nio-8881-exec-5] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:54:53 [http-nio-8881-exec-10] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:54:53 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 10:54:53 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 10:54:53 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:54:53 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 10:54:53 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:54:53 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:54:53 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 10:54:53 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:54:53 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 10:54:53 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:54:53 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 10:54:53 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 10:54:53 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:54:53 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:54:53 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:54:53 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:54:53 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 10:54:53 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 10:54:53 [http-nio-8881-exec-10] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session
	at org.hibernate.collection.spi.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:636)
	at org.hibernate.collection.spi.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:219)
	at org.hibernate.collection.spi.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:615)
	at org.hibernate.collection.spi.AbstractPersistentCollection.read(AbstractPersistentCollection.java:138)
	at org.hibernate.collection.spi.PersistentBag.iterator(PersistentBag.java:369)
	at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1842)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.reduce(ReferencePipeline.java:657)
	at com.restaurant.billing.service.DashboardService.getTodaySales(DashboardService.java:80)
	at com.restaurant.billing.controller.DashboardController.getTodaySales(DashboardController.java:24)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 10:54:53 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:54:53 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T10:54:53.598827490, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 10:54:53 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:54:53 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{activeOrders=0, pendingPayments=0, tablesOccupied=0, todaySales=0}]
2025-12-04 10:54:53 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:54:53 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session]
2025-12-04 10:54:53 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 10:54:53 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/orders
2025-12-04 10:54:53 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:54:53 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/orders
2025-12-04 10:54:53 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/orders", parameters={}
2025-12-04 10:54:53 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#getAllOrders()
2025-12-04 10:54:53 [http-nio-8881-exec-9] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:54:53 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:54:53 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:54:53 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:54:53 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:54:53 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:54:53 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:54:53 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:54:53 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[OrderDto(id=3d2cc165-482d-4290-b220-105d1ad18880, orderNumber=ORD1764763565538, tableId=null, table (truncated)...]
2025-12-04 10:54:53 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:54:54 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/menu
2025-12-04 10:54:54 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:54:54 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/menu
2025-12-04 10:54:54 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/menu", parameters={}
2025-12-04 10:54:54 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.MenuController#getAllMenuItems()
2025-12-04 10:54:54 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:54:54 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        mi1_0.id,
        mi1_0.category_id,
        mi1_0.created_at,
        mi1_0.description,
        mi1_0.device_id,
        mi1_0.image_path,
        mi1_0.is_available,
        mi1_0.is_deleted,
        mi1_0.is_veg,
        mi1_0.name,
        mi1_0.preparation_time,
        mi1_0.price,
        mi1_0.synced_at,
        mi1_0.tenant_id,
        mi1_0.updated_at,
        mi1_0.version 
    from
        public.menu_items mi1_0 
    where
        mi1_0.tenant_id=? 
        and mi1_0.is_deleted=?
2025-12-04 10:54:54 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:54:54 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[MenuItemDto(id=8a5577b8-36d5-4a3d-9299-903f009a42b9, categoryId=6ed45abe-f8f6-4966-8126-a3f0d0bd0aa (truncated)...]
2025-12-04 10:54:54 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:54:54 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/categories?activeOnly=true
2025-12-04 10:54:54 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:54:54 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/categories?activeOnly=true
2025-12-04 10:54:54 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/categories?activeOnly=true", parameters={masked}
2025-12-04 10:54:54 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.CategoryController#getAllCategories(UserDetails, Boolean)
2025-12-04 10:54:54 [http-nio-8881-exec-6] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:54:54 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:54:54 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.display_order,
        c1_0.is_active,
        c1_0.name,
        c1_0.tenant_id,
        c1_0.updated_at 
    from
        public.categories c1_0 
    where
        c1_0.tenant_id=? 
        and c1_0.is_active=? 
    order by
        c1_0.display_order
2025-12-04 10:54:54 [http-nio-8881-exec-6] DEBUG c.r.billing.service.CategoryService - Found 2 categories for tenant cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:54:54 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:54:54 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[CategoryDto(id=6ed45abe-f8f6-4966-8126-a3f0d0bd0aaa, name=Main course, displayOrder=1), CategoryDto (truncated)...]
2025-12-04 10:54:54 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:55:06 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/orders
2025-12-04 10:55:06 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:55:06 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/orders
2025-12-04 10:55:06 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/orders", parameters={}
2025-12-04 10:55:06 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#createOrder(CreateOrderRequest)
2025-12-04 10:55:06 [http-nio-8881-exec-1] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:55:06 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [CreateOrderRequest(tableId=null, customerName=null, customerPhone=null, orderType=DINE_IN, items=[Or (truncated)...]
2025-12-04 10:55:06 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 10:55:06 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        mi1_0.id,
        mi1_0.category_id,
        mi1_0.created_at,
        mi1_0.description,
        mi1_0.device_id,
        mi1_0.image_path,
        mi1_0.is_available,
        mi1_0.is_deleted,
        mi1_0.is_veg,
        mi1_0.name,
        mi1_0.preparation_time,
        mi1_0.price,
        mi1_0.synced_at,
        mi1_0.tenant_id,
        mi1_0.updated_at,
        mi1_0.version 
    from
        public.menu_items mi1_0 
    where
        mi1_0.id=?
2025-12-04 10:55:06 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.order_id=?
2025-12-04 10:55:06 [http-nio-8881-exec-1] INFO  c.r.billing.service.OrderService - Bill generated for order: 1ffeef27-7047-43b4-91f8-9d8247ffcc40
2025-12-04 10:55:06 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    insert 
    into
        public.orders
        (created_at, created_by, customer_name, customer_phone, device_id, discount_amount, is_deleted, notes, order_number, order_status, order_type, service_charge, subtotal, synced_at, table_id, tax_amount, tenant_id, total_amount, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-04 10:55:06 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    insert 
    into
        public.order_items
        (created_at, item_name, menu_item_id, order_id, quantity, special_instructions, status, total_price, unit_price, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-04 10:55:06 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    insert 
    into
        public.bills
        (bill_number, change_amount, created_at, discount_amount, generated_by, invoice_path, order_id, paid_amount, payment_method, payment_status, service_charge, subtotal, tax_amount, tenant_id, total_amount, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-04 10:55:06 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:55:06 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [OrderDto(id=1ffeef27-7047-43b4-91f8-9d8247ffcc40, orderNumber=ORD1764825906423, tableId=null, tableN (truncated)...]
2025-12-04 10:55:06 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-12-04 10:55:06 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/sync
2025-12-04 10:55:06 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/sync
2025-12-04 10:55:06 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:55:06 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/sync
2025-12-04 10:55:06 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/sync", parameters={}
2025-12-04 10:55:06 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.SyncController#performSync(SyncRequest)
2025-12-04 10:55:06 [http-nio-8881-exec-8] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:55:06 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [SyncRequest(deviceId=d23c59b8-4056-4cc6-b9bc-6ac5018951cf, lastSyncTime=1970-01-01T05:30, data=[Sync (truncated)...]
2025-12-04 10:55:06 [http-nio-8881-exec-8] ERROR c.r.billing.service.SyncService - Sync error for item: 1ffeef27-7047-43b4-91f8-9d8247ffcc40
java.lang.IllegalArgumentException: Unknown entity type: order
	at com.restaurant.billing.service.SyncService.processSyncItem(SyncService.java:107)
	at com.restaurant.billing.service.SyncService.performSync(SyncService.java:34)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at com.restaurant.billing.service.SyncService$$SpringCGLIB$$0.performSync(<generated>)
	at com.restaurant.billing.controller.SyncController.performSync(SyncController.java:23)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 10:55:06 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 10:55:06 [http-nio-8881-exec-8] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
java.lang.IllegalArgumentException: No enum constant com.restaurant.billing.entity.SyncLog.SyncOperation.create
	at java.base/java.lang.Enum.valueOf(Enum.java:273)
	at com.restaurant.billing.entity.SyncLog$SyncOperation.valueOf(SyncLog.java:65)
	at com.restaurant.billing.service.SyncService.logSync(SyncService.java:158)
	at com.restaurant.billing.service.SyncService.performSync(SyncService.java:51)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at com.restaurant.billing.service.SyncService$$SpringCGLIB$$0.performSync(<generated>)
	at com.restaurant.billing.controller.SyncController.performSync(SyncController.java:23)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 10:55:06 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:55:06 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T10:55:06.459594388, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 10:55:06 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [java.lang.IllegalArgumentException: No enum constant com.restaurant.billing.entity.SyncLog.SyncOperation.create]
2025-12-04 10:55:06 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 10:55:22 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/orders
2025-12-04 10:55:22 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:55:22 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/orders
2025-12-04 10:55:22 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/orders", parameters={}
2025-12-04 10:55:22 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#createOrder(CreateOrderRequest)
2025-12-04 10:55:22 [http-nio-8881-exec-5] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:55:22 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [CreateOrderRequest(tableId=null, customerName=null, customerPhone=null, orderType=DINE_IN, items=[Or (truncated)...]
2025-12-04 10:55:22 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 10:55:22 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        mi1_0.id,
        mi1_0.category_id,
        mi1_0.created_at,
        mi1_0.description,
        mi1_0.device_id,
        mi1_0.image_path,
        mi1_0.is_available,
        mi1_0.is_deleted,
        mi1_0.is_veg,
        mi1_0.name,
        mi1_0.preparation_time,
        mi1_0.price,
        mi1_0.synced_at,
        mi1_0.tenant_id,
        mi1_0.updated_at,
        mi1_0.version 
    from
        public.menu_items mi1_0 
    where
        mi1_0.id=?
2025-12-04 10:55:22 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.order_id=?
2025-12-04 10:55:22 [http-nio-8881-exec-5] INFO  c.r.billing.service.OrderService - Bill generated for order: 17fb8a45-b910-4cd9-9967-6348c6a49f66
2025-12-04 10:55:22 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    insert 
    into
        public.orders
        (created_at, created_by, customer_name, customer_phone, device_id, discount_amount, is_deleted, notes, order_number, order_status, order_type, service_charge, subtotal, synced_at, table_id, tax_amount, tenant_id, total_amount, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-04 10:55:22 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    insert 
    into
        public.order_items
        (created_at, item_name, menu_item_id, order_id, quantity, special_instructions, status, total_price, unit_price, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-04 10:55:22 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    insert 
    into
        public.bills
        (bill_number, change_amount, created_at, discount_amount, generated_by, invoice_path, order_id, paid_amount, payment_method, payment_status, service_charge, subtotal, tax_amount, tenant_id, total_amount, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-04 10:55:22 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:55:22 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [OrderDto(id=17fb8a45-b910-4cd9-9967-6348c6a49f66, orderNumber=ORD1764825922391, tableId=null, tableN (truncated)...]
2025-12-04 10:55:22 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-12-04 10:55:22 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/sync
2025-12-04 10:55:22 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:55:22 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/sync
2025-12-04 10:55:22 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/sync", parameters={}
2025-12-04 10:55:22 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.SyncController#performSync(SyncRequest)
2025-12-04 10:55:22 [http-nio-8881-exec-3] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:55:22 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [SyncRequest(deviceId=d23c59b8-4056-4cc6-b9bc-6ac5018951cf, lastSyncTime=1970-01-01T05:30, data=[Sync (truncated)...]
2025-12-04 10:55:22 [http-nio-8881-exec-3] ERROR c.r.billing.service.SyncService - Sync error for item: 1ffeef27-7047-43b4-91f8-9d8247ffcc40
java.lang.IllegalArgumentException: Unknown entity type: order
	at com.restaurant.billing.service.SyncService.processSyncItem(SyncService.java:107)
	at com.restaurant.billing.service.SyncService.performSync(SyncService.java:34)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at com.restaurant.billing.service.SyncService$$SpringCGLIB$$0.performSync(<generated>)
	at com.restaurant.billing.controller.SyncController.performSync(SyncController.java:23)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 10:55:22 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 10:55:22 [http-nio-8881-exec-3] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
java.lang.IllegalArgumentException: No enum constant com.restaurant.billing.entity.SyncLog.SyncOperation.create
	at java.base/java.lang.Enum.valueOf(Enum.java:273)
	at com.restaurant.billing.entity.SyncLog$SyncOperation.valueOf(SyncLog.java:65)
	at com.restaurant.billing.service.SyncService.logSync(SyncService.java:158)
	at com.restaurant.billing.service.SyncService.performSync(SyncService.java:51)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at com.restaurant.billing.service.SyncService$$SpringCGLIB$$0.performSync(<generated>)
	at com.restaurant.billing.controller.SyncController.performSync(SyncController.java:23)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 10:55:22 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:55:22 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T10:55:22.431738507, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 10:55:22 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [java.lang.IllegalArgumentException: No enum constant com.restaurant.billing.entity.SyncLog.SyncOperation.create]
2025-12-04 10:55:22 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 10:55:28 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/orders
2025-12-04 10:55:28 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:55:28 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/orders
2025-12-04 10:55:28 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/orders", parameters={}
2025-12-04 10:55:28 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#getAllOrders()
2025-12-04 10:55:28 [http-nio-8881-exec-7] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:55:28 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:55:28 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:55:28 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:55:28 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:55:28 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:55:28 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:55:28 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:55:28 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:55:28 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:55:28 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[OrderDto(id=3d2cc165-482d-4290-b220-105d1ad18880, orderNumber=ORD1764763565538, tableId=null, table (truncated)...]
2025-12-04 10:55:28 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:55:29 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/today-sales
2025-12-04 10:55:29 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/active-orders
2025-12-04 10:55:29 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/pending-payments
2025-12-04 10:55:29 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/tables-occupied
2025-12-04 10:55:29 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/stats
2025-12-04 10:55:29 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:55:29 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:55:29 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:55:29 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:55:29 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:55:29 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/pending-payments
2025-12-04 10:55:29 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/today-sales
2025-12-04 10:55:29 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/stats
2025-12-04 10:55:29 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/active-orders
2025-12-04 10:55:29 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/tables-occupied
2025-12-04 10:55:29 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/pending-payments", parameters={}
2025-12-04 10:55:29 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/today-sales", parameters={}
2025-12-04 10:55:29 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/active-orders", parameters={}
2025-12-04 10:55:29 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/tables-occupied", parameters={}
2025-12-04 10:55:29 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/stats", parameters={}
2025-12-04 10:55:29 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getActiveOrders()
2025-12-04 10:55:29 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getPendingPayments()
2025-12-04 10:55:29 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTablesOccupied()
2025-12-04 10:55:29 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTodaySales()
2025-12-04 10:55:29 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getDashboardStats()
2025-12-04 10:55:29 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:55:29 [http-nio-8881-exec-9] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:55:29 [http-nio-8881-exec-1] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:55:29 [http-nio-8881-exec-6] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:55:29 [http-nio-8881-exec-10] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:55:29 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 10:55:29 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:55:29 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 10:55:29 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:55:29 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 10:55:29 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:55:29 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:55:29 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 10:55:29 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 10:55:29 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:55:29 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 10:55:29 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 10:55:29 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:55:29 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:55:29 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:55:29 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:55:29 [http-nio-8881-exec-10] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session
	at org.hibernate.collection.spi.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:636)
	at org.hibernate.collection.spi.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:219)
	at org.hibernate.collection.spi.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:615)
	at org.hibernate.collection.spi.AbstractPersistentCollection.read(AbstractPersistentCollection.java:138)
	at org.hibernate.collection.spi.PersistentBag.iterator(PersistentBag.java:369)
	at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1842)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.reduce(ReferencePipeline.java:657)
	at com.restaurant.billing.service.DashboardService.getTodaySales(DashboardService.java:80)
	at com.restaurant.billing.controller.DashboardController.getTodaySales(DashboardController.java:24)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 10:55:29 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:55:29 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T10:55:29.495601777, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 10:55:29 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 10:55:29 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session]
2025-12-04 10:55:29 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 10:55:29 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 10:55:29 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:55:29 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{activeOrders=0, pendingPayments=0, tablesOccupied=0, todaySales=0}]
2025-12-04 10:55:29 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:55:29 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/orders
2025-12-04 10:55:29 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:55:29 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/orders
2025-12-04 10:55:29 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/orders", parameters={}
2025-12-04 10:55:29 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#getAllOrders()
2025-12-04 10:55:29 [http-nio-8881-exec-2] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:55:29 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:55:29 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:55:29 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:55:29 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:55:29 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:55:29 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:55:29 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:55:29 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:55:29 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:55:29 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[OrderDto(id=3d2cc165-482d-4290-b220-105d1ad18880, orderNumber=ORD1764763565538, tableId=null, table (truncated)...]
2025-12-04 10:55:29 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:55:30 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/reports/day-wise?startDate=2025-11-27T10%3A55%3A30.747&endDate=2025-12-04T10%3A55%3A30.747
2025-12-04 10:55:30 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/reports/day-wise?startDate=2025-11-27T10%3A55%3A30.747&endDate=2025-12-04T10%3A55%3A30.747
2025-12-04 10:55:30 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:55:30 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/reports/day-wise?startDate=2025-11-27T10%3A55%3A30.747&endDate=2025-12-04T10%3A55%3A30.747
2025-12-04 10:55:30 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/day-wise?startDate=2025-11-27T10%3A55%3A30.747&endDate=2025-12-04T10%3A55%3A30.747", parameters={masked}
2025-12-04 10:55:30 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.ReportController#getDayWiseSales(LocalDateTime, LocalDateTime)
2025-12-04 10:55:30 [http-nio-8881-exec-5] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:55:30 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 10:55:30 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:55:30 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[{date=2025-12-03, totalSales=0}, {date=2025-12-04, totalSales=0}]]
2025-12-04 10:55:30 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:55:30 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/reports/product-wise?startDate=2025-11-27T10%3A55%3A30.747&endDate=2025-12-04T10%3A55%3A30.747
2025-12-04 10:55:30 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/reports/product-wise?startDate=2025-11-27T10%3A55%3A30.747&endDate=2025-12-04T10%3A55%3A30.747
2025-12-04 10:55:30 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:55:30 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/reports/product-wise?startDate=2025-11-27T10%3A55%3A30.747&endDate=2025-12-04T10%3A55%3A30.747
2025-12-04 10:55:30 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/product-wise?startDate=2025-11-27T10%3A55%3A30.747&endDate=2025-12-04T10%3A55%3A30.747", parameters={masked}
2025-12-04 10:55:30 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.ReportController#getProductWiseSales(LocalDateTime, LocalDateTime)
2025-12-04 10:55:30 [http-nio-8881-exec-7] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:55:30 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        oi1_0.menu_item_id,
        oi1_0.item_name,
        sum(oi1_0.quantity),
        sum(oi1_0.total_price) 
    from
        public.order_items oi1_0 
    join
        public.orders o1_0 
            on o1_0.id=oi1_0.order_id 
    where
        o1_0.tenant_id=? 
        and o1_0.created_at between ? and ? 
    group by
        oi1_0.menu_item_id,
        oi1_0.item_name 
    order by
        sum(oi1_0.total_price) desc
2025-12-04 10:55:30 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:55:30 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[{menuItemId=8a5577b8-36d5-4a3d-9299-903f009a42b9, itemName=TEA, totalQuantity=12, totalRevenue=180. (truncated)...]
2025-12-04 10:55:30 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:55:34 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/settings/tax
2025-12-04 10:55:34 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:55:34 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/settings/tax
2025-12-04 10:55:34 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/settings/tax", parameters={}
2025-12-04 10:55:34 [http-nio-8881-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-12-04 10:55:34 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:55:34 [http-nio-8881-exec-4] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-12-04 10:55:34 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 10:55:34 [http-nio-8881-exec-4] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/settings/tax.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:586)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 10:55:34 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:55:34 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T10:55:34.562870236, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 10:55:34 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/settings/tax.]
2025-12-04 10:55:34 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 10:55:38 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/settings/tax
2025-12-04 10:55:38 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:55:38 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/settings/tax
2025-12-04 10:55:38 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/api/settings/tax", parameters={}
2025-12-04 10:55:38 [http-nio-8881-exec-6] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-12-04 10:55:38 [http-nio-8881-exec-6] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:55:38 [http-nio-8881-exec-6] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-12-04 10:55:38 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 10:55:38 [http-nio-8881-exec-6] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/settings/tax.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:586)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:925)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:593)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 10:55:38 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:55:38 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T10:55:38.728376498, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 10:55:38 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/settings/tax.]
2025-12-04 10:55:38 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 10:55:40 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/today-sales
2025-12-04 10:55:40 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/active-orders
2025-12-04 10:55:40 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/pending-payments
2025-12-04 10:55:40 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:55:40 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:55:40 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:55:40 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/active-orders
2025-12-04 10:55:40 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/today-sales
2025-12-04 10:55:40 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/pending-payments
2025-12-04 10:55:40 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/active-orders", parameters={}
2025-12-04 10:55:40 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/today-sales", parameters={}
2025-12-04 10:55:40 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/pending-payments", parameters={}
2025-12-04 10:55:40 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getActiveOrders()
2025-12-04 10:55:40 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTodaySales()
2025-12-04 10:55:40 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getPendingPayments()
2025-12-04 10:55:40 [http-nio-8881-exec-10] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:55:40 [http-nio-8881-exec-9] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:55:40 [http-nio-8881-exec-1] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:55:40 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 10:55:40 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:55:40 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:55:40 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:55:40 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:55:40 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 10:55:40 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 10:55:40 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 10:55:40 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:55:40 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:55:40 [http-nio-8881-exec-9] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session
	at org.hibernate.collection.spi.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:636)
	at org.hibernate.collection.spi.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:219)
	at org.hibernate.collection.spi.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:615)
	at org.hibernate.collection.spi.AbstractPersistentCollection.read(AbstractPersistentCollection.java:138)
	at org.hibernate.collection.spi.PersistentBag.iterator(PersistentBag.java:369)
	at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1842)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.reduce(ReferencePipeline.java:657)
	at com.restaurant.billing.service.DashboardService.getTodaySales(DashboardService.java:80)
	at com.restaurant.billing.controller.DashboardController.getTodaySales(DashboardController.java:24)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 10:55:40 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:55:40 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T10:55:40.514249496, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 10:55:40 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session]
2025-12-04 10:55:40 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 10:55:40 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/tables-occupied
2025-12-04 10:55:40 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/stats
2025-12-04 10:55:40 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:55:40 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:55:40 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/tables-occupied
2025-12-04 10:55:40 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/stats
2025-12-04 10:55:40 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/tables-occupied", parameters={}
2025-12-04 10:55:40 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/stats", parameters={}
2025-12-04 10:55:40 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTablesOccupied()
2025-12-04 10:55:40 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getDashboardStats()
2025-12-04 10:55:40 [http-nio-8881-exec-2] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:55:40 [http-nio-8881-exec-8] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:55:40 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 10:55:40 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 10:55:40 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:55:40 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 10:55:40 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:55:40 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:55:40 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 10:55:40 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 10:55:40 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:55:40 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{activeOrders=0, pendingPayments=0, tablesOccupied=0, todaySales=0}]
2025-12-04 10:55:40 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:55:40 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/orders
2025-12-04 10:55:40 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:55:40 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/orders
2025-12-04 10:55:40 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/orders", parameters={}
2025-12-04 10:55:40 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#getAllOrders()
2025-12-04 10:55:40 [http-nio-8881-exec-5] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:55:40 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:55:40 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:55:40 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:55:40 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:55:40 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:55:40 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:55:40 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:55:40 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:55:40 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:55:40 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[OrderDto(id=3d2cc165-482d-4290-b220-105d1ad18880, orderNumber=ORD1764763565538, tableId=null, table (truncated)...]
2025-12-04 10:55:40 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:55:41 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/menu
2025-12-04 10:55:41 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:55:41 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/menu
2025-12-04 10:55:41 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/menu", parameters={}
2025-12-04 10:55:41 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.MenuController#getAllMenuItems()
2025-12-04 10:55:41 [http-nio-8881-exec-3] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:55:41 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        mi1_0.id,
        mi1_0.category_id,
        mi1_0.created_at,
        mi1_0.description,
        mi1_0.device_id,
        mi1_0.image_path,
        mi1_0.is_available,
        mi1_0.is_deleted,
        mi1_0.is_veg,
        mi1_0.name,
        mi1_0.preparation_time,
        mi1_0.price,
        mi1_0.synced_at,
        mi1_0.tenant_id,
        mi1_0.updated_at,
        mi1_0.version 
    from
        public.menu_items mi1_0 
    where
        mi1_0.tenant_id=? 
        and mi1_0.is_deleted=?
2025-12-04 10:55:41 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:55:41 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[MenuItemDto(id=8a5577b8-36d5-4a3d-9299-903f009a42b9, categoryId=6ed45abe-f8f6-4966-8126-a3f0d0bd0aa (truncated)...]
2025-12-04 10:55:41 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:55:41 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/categories?activeOnly=true
2025-12-04 10:55:41 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:55:41 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/categories?activeOnly=true
2025-12-04 10:55:41 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/categories?activeOnly=true", parameters={masked}
2025-12-04 10:55:41 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.CategoryController#getAllCategories(UserDetails, Boolean)
2025-12-04 10:55:41 [http-nio-8881-exec-7] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:55:41 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:55:41 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.display_order,
        c1_0.is_active,
        c1_0.name,
        c1_0.tenant_id,
        c1_0.updated_at 
    from
        public.categories c1_0 
    where
        c1_0.tenant_id=? 
        and c1_0.is_active=? 
    order by
        c1_0.display_order
2025-12-04 10:55:41 [http-nio-8881-exec-7] DEBUG c.r.billing.service.CategoryService - Found 2 categories for tenant cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:55:41 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:55:41 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[CategoryDto(id=6ed45abe-f8f6-4966-8126-a3f0d0bd0aaa, name=Main course, displayOrder=1), CategoryDto (truncated)...]
2025-12-04 10:55:41 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:55:46 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/orders
2025-12-04 10:55:46 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:55:46 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/orders
2025-12-04 10:55:46 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/orders", parameters={}
2025-12-04 10:55:46 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#createOrder(CreateOrderRequest)
2025-12-04 10:55:46 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:55:46 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [CreateOrderRequest(tableId=null, customerName=null, customerPhone=null, orderType=DINE_IN, items=[Or (truncated)...]
2025-12-04 10:55:46 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 10:55:46 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        mi1_0.id,
        mi1_0.category_id,
        mi1_0.created_at,
        mi1_0.description,
        mi1_0.device_id,
        mi1_0.image_path,
        mi1_0.is_available,
        mi1_0.is_deleted,
        mi1_0.is_veg,
        mi1_0.name,
        mi1_0.preparation_time,
        mi1_0.price,
        mi1_0.synced_at,
        mi1_0.tenant_id,
        mi1_0.updated_at,
        mi1_0.version 
    from
        public.menu_items mi1_0 
    where
        mi1_0.id=?
2025-12-04 10:55:46 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.order_id=?
2025-12-04 10:55:46 [http-nio-8881-exec-4] INFO  c.r.billing.service.OrderService - Bill generated for order: cec6b8e6-f93c-4393-bbff-862f42172b2e
2025-12-04 10:55:46 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    insert 
    into
        public.orders
        (created_at, created_by, customer_name, customer_phone, device_id, discount_amount, is_deleted, notes, order_number, order_status, order_type, service_charge, subtotal, synced_at, table_id, tax_amount, tenant_id, total_amount, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-04 10:55:46 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    insert 
    into
        public.order_items
        (created_at, item_name, menu_item_id, order_id, quantity, special_instructions, status, total_price, unit_price, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-04 10:55:46 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    insert 
    into
        public.bills
        (bill_number, change_amount, created_at, discount_amount, generated_by, invoice_path, order_id, paid_amount, payment_method, payment_status, service_charge, subtotal, tax_amount, tenant_id, total_amount, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-04 10:55:46 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:55:46 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [OrderDto(id=cec6b8e6-f93c-4393-bbff-862f42172b2e, orderNumber=ORD1764825946291, tableId=null, tableN (truncated)...]
2025-12-04 10:55:46 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-12-04 10:55:46 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/sync
2025-12-04 10:55:46 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:55:46 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/sync
2025-12-04 10:55:46 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/sync", parameters={}
2025-12-04 10:55:46 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.SyncController#performSync(SyncRequest)
2025-12-04 10:55:46 [http-nio-8881-exec-6] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:55:46 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [SyncRequest(deviceId=d23c59b8-4056-4cc6-b9bc-6ac5018951cf, lastSyncTime=1970-01-01T05:30, data=[Sync (truncated)...]
2025-12-04 10:55:46 [http-nio-8881-exec-6] ERROR c.r.billing.service.SyncService - Sync error for item: 1ffeef27-7047-43b4-91f8-9d8247ffcc40
java.lang.IllegalArgumentException: Unknown entity type: order
	at com.restaurant.billing.service.SyncService.processSyncItem(SyncService.java:107)
	at com.restaurant.billing.service.SyncService.performSync(SyncService.java:34)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at com.restaurant.billing.service.SyncService$$SpringCGLIB$$0.performSync(<generated>)
	at com.restaurant.billing.controller.SyncController.performSync(SyncController.java:23)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 10:55:46 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 10:55:46 [http-nio-8881-exec-6] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
java.lang.IllegalArgumentException: No enum constant com.restaurant.billing.entity.SyncLog.SyncOperation.create
	at java.base/java.lang.Enum.valueOf(Enum.java:273)
	at com.restaurant.billing.entity.SyncLog$SyncOperation.valueOf(SyncLog.java:65)
	at com.restaurant.billing.service.SyncService.logSync(SyncService.java:158)
	at com.restaurant.billing.service.SyncService.performSync(SyncService.java:51)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at com.restaurant.billing.service.SyncService$$SpringCGLIB$$0.performSync(<generated>)
	at com.restaurant.billing.controller.SyncController.performSync(SyncController.java:23)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 10:55:46 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:55:46 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T10:55:46.323892809, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 10:55:46 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [java.lang.IllegalArgumentException: No enum constant com.restaurant.billing.entity.SyncLog.SyncOperation.create]
2025-12-04 10:55:46 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 10:55:55 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/reports/day-wise?startDate=2025-11-27T10%3A55%3A55.846&endDate=2025-12-04T10%3A55%3A55.846
2025-12-04 10:55:55 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/reports/day-wise?startDate=2025-11-27T10%3A55%3A55.846&endDate=2025-12-04T10%3A55%3A55.846
2025-12-04 10:55:55 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:55:55 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/reports/day-wise?startDate=2025-11-27T10%3A55%3A55.846&endDate=2025-12-04T10%3A55%3A55.846
2025-12-04 10:55:55 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/day-wise?startDate=2025-11-27T10%3A55%3A55.846&endDate=2025-12-04T10%3A55%3A55.846", parameters={masked}
2025-12-04 10:55:55 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.ReportController#getDayWiseSales(LocalDateTime, LocalDateTime)
2025-12-04 10:55:55 [http-nio-8881-exec-1] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:55:55 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 10:55:55 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:55:55 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[{date=2025-12-03, totalSales=0}, {date=2025-12-04, totalSales=0}]]
2025-12-04 10:55:55 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:55:56 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/reports/product-wise?startDate=2025-11-27T10%3A55%3A55.846&endDate=2025-12-04T10%3A55%3A55.846
2025-12-04 10:55:56 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/reports/product-wise?startDate=2025-11-27T10%3A55%3A55.846&endDate=2025-12-04T10%3A55%3A55.846
2025-12-04 10:55:56 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:55:56 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/reports/product-wise?startDate=2025-11-27T10%3A55%3A55.846&endDate=2025-12-04T10%3A55%3A55.846
2025-12-04 10:55:56 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/product-wise?startDate=2025-11-27T10%3A55%3A55.846&endDate=2025-12-04T10%3A55%3A55.846", parameters={masked}
2025-12-04 10:55:56 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.ReportController#getProductWiseSales(LocalDateTime, LocalDateTime)
2025-12-04 10:55:56 [http-nio-8881-exec-2] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:55:56 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        oi1_0.menu_item_id,
        oi1_0.item_name,
        sum(oi1_0.quantity),
        sum(oi1_0.total_price) 
    from
        public.order_items oi1_0 
    join
        public.orders o1_0 
            on o1_0.id=oi1_0.order_id 
    where
        o1_0.tenant_id=? 
        and o1_0.created_at between ? and ? 
    group by
        oi1_0.menu_item_id,
        oi1_0.item_name 
    order by
        sum(oi1_0.total_price) desc
2025-12-04 10:55:56 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:55:56 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[{menuItemId=8a5577b8-36d5-4a3d-9299-903f009a42b9, itemName=TEA, totalQuantity=13, totalRevenue=195. (truncated)...]
2025-12-04 10:55:56 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:55:58 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/categories?activeOnly=true
2025-12-04 10:55:58 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:55:58 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/categories?activeOnly=true
2025-12-04 10:55:58 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/categories?activeOnly=true", parameters={masked}
2025-12-04 10:55:58 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.CategoryController#getAllCategories(UserDetails, Boolean)
2025-12-04 10:55:58 [http-nio-8881-exec-8] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:55:58 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:55:58 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.display_order,
        c1_0.is_active,
        c1_0.name,
        c1_0.tenant_id,
        c1_0.updated_at 
    from
        public.categories c1_0 
    where
        c1_0.tenant_id=? 
        and c1_0.is_active=? 
    order by
        c1_0.display_order
2025-12-04 10:55:58 [http-nio-8881-exec-8] DEBUG c.r.billing.service.CategoryService - Found 2 categories for tenant cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:55:58 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:55:58 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[CategoryDto(id=6ed45abe-f8f6-4966-8126-a3f0d0bd0aaa, name=Main course, displayOrder=1), CategoryDto (truncated)...]
2025-12-04 10:55:58 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:56:01 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/payment-gateways
2025-12-04 10:56:01 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/payment-gateways
2025-12-04 10:56:01 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:56:01 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/payment-gateways
2025-12-04 10:56:01 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/payment-gateways", parameters={}
2025-12-04 10:56:01 [http-nio-8881-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-12-04 10:56:01 [http-nio-8881-exec-3] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:56:01 [http-nio-8881-exec-3] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-12-04 10:56:01 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 10:56:01 [http-nio-8881-exec-3] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/payment-gateways.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:586)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 10:56:01 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:56:01 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T10:56:01.281398632, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 10:56:01 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/payment-gateways.]
2025-12-04 10:56:01 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 10:56:10 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 10:56:10 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:56:10 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 10:56:10 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 10:56:10 [http-nio-8881-exec-7] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-12-04 10:56:10 [http-nio-8881-exec-7] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:56:10 [http-nio-8881-exec-7] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-12-04 10:56:10 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 10:56:10 [http-nio-8881-exec-7] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/restaurant/profile.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:586)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 10:56:10 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:56:10 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T10:56:10.471406909, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 10:56:10 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/restaurant/profile.]
2025-12-04 10:56:10 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 10:56:20 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/stats
2025-12-04 10:56:20 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/pending-payments
2025-12-04 10:56:20 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/tables-occupied
2025-12-04 10:56:20 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/active-orders
2025-12-04 10:56:20 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/today-sales
2025-12-04 10:56:20 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:56:20 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:56:20 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:56:20 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:56:20 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:56:20 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/stats
2025-12-04 10:56:20 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/tables-occupied
2025-12-04 10:56:20 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/active-orders
2025-12-04 10:56:20 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/pending-payments
2025-12-04 10:56:20 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/stats", parameters={}
2025-12-04 10:56:20 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/tables-occupied", parameters={}
2025-12-04 10:56:20 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/active-orders", parameters={}
2025-12-04 10:56:20 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/pending-payments", parameters={}
2025-12-04 10:56:20 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/today-sales
2025-12-04 10:56:20 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getDashboardStats()
2025-12-04 10:56:20 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTablesOccupied()
2025-12-04 10:56:20 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getActiveOrders()
2025-12-04 10:56:20 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/today-sales", parameters={}
2025-12-04 10:56:20 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getPendingPayments()
2025-12-04 10:56:20 [http-nio-8881-exec-1] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:56:20 [http-nio-8881-exec-9] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:56:20 [http-nio-8881-exec-10] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:56:20 [http-nio-8881-exec-6] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:56:20 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTodaySales()
2025-12-04 10:56:20 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:56:20 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 10:56:20 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 10:56:20 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:56:20 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:56:20 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 10:56:20 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:56:20 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 10:56:20 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:56:20 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:56:20 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 10:56:20 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 10:56:20 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 10:56:20 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:56:20 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:56:20 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:56:20 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:56:20 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 10:56:20 [http-nio-8881-exec-4] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session
	at org.hibernate.collection.spi.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:636)
	at org.hibernate.collection.spi.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:219)
	at org.hibernate.collection.spi.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:615)
	at org.hibernate.collection.spi.AbstractPersistentCollection.read(AbstractPersistentCollection.java:138)
	at org.hibernate.collection.spi.PersistentBag.iterator(PersistentBag.java:369)
	at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1842)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.reduce(ReferencePipeline.java:657)
	at com.restaurant.billing.service.DashboardService.getTodaySales(DashboardService.java:80)
	at com.restaurant.billing.controller.DashboardController.getTodaySales(DashboardController.java:24)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 10:56:20 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:56:20 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T10:56:20.666306659, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 10:56:20 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 10:56:20 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session]
2025-12-04 10:56:20 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:56:20 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 10:56:20 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{activeOrders=0, pendingPayments=0, tablesOccupied=0, todaySales=0}]
2025-12-04 10:56:20 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:56:20 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/orders
2025-12-04 10:56:20 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:56:20 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/orders
2025-12-04 10:56:20 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/orders", parameters={}
2025-12-04 10:56:20 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#getAllOrders()
2025-12-04 10:56:20 [http-nio-8881-exec-2] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:56:20 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 10:56:20 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:56:20 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:56:20 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:56:20 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:56:20 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:56:20 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:56:20 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:56:20 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 10:56:20 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:56:20 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[OrderDto(id=3d2cc165-482d-4290-b220-105d1ad18880, orderNumber=ORD1764763565538, tableId=null, table (truncated)...]
2025-12-04 10:56:20 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:56:22 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/menu
2025-12-04 10:56:22 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:56:22 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/menu
2025-12-04 10:56:22 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/menu", parameters={}
2025-12-04 10:56:22 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.MenuController#getAllMenuItems()
2025-12-04 10:56:22 [http-nio-8881-exec-8] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:56:22 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        mi1_0.id,
        mi1_0.category_id,
        mi1_0.created_at,
        mi1_0.description,
        mi1_0.device_id,
        mi1_0.image_path,
        mi1_0.is_available,
        mi1_0.is_deleted,
        mi1_0.is_veg,
        mi1_0.name,
        mi1_0.preparation_time,
        mi1_0.price,
        mi1_0.synced_at,
        mi1_0.tenant_id,
        mi1_0.updated_at,
        mi1_0.version 
    from
        public.menu_items mi1_0 
    where
        mi1_0.tenant_id=? 
        and mi1_0.is_deleted=?
2025-12-04 10:56:22 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:56:22 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[MenuItemDto(id=8a5577b8-36d5-4a3d-9299-903f009a42b9, categoryId=6ed45abe-f8f6-4966-8126-a3f0d0bd0aa (truncated)...]
2025-12-04 10:56:22 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:56:22 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/categories?activeOnly=true
2025-12-04 10:56:22 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:56:22 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/categories?activeOnly=true
2025-12-04 10:56:22 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/categories?activeOnly=true", parameters={masked}
2025-12-04 10:56:22 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.CategoryController#getAllCategories(UserDetails, Boolean)
2025-12-04 10:56:22 [http-nio-8881-exec-5] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:56:22 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:56:22 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.display_order,
        c1_0.is_active,
        c1_0.name,
        c1_0.tenant_id,
        c1_0.updated_at 
    from
        public.categories c1_0 
    where
        c1_0.tenant_id=? 
        and c1_0.is_active=? 
    order by
        c1_0.display_order
2025-12-04 10:56:22 [http-nio-8881-exec-5] DEBUG c.r.billing.service.CategoryService - Found 2 categories for tenant cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:56:22 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:56:22 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[CategoryDto(id=6ed45abe-f8f6-4966-8126-a3f0d0bd0aaa, name=Main course, displayOrder=1), CategoryDto (truncated)...]
2025-12-04 10:56:22 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 10:56:50 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/orders
2025-12-04 10:56:50 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:56:50 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/orders
2025-12-04 10:56:50 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/orders", parameters={}
2025-12-04 10:56:50 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#createOrder(CreateOrderRequest)
2025-12-04 10:56:50 [http-nio-8881-exec-3] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:56:50 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [CreateOrderRequest(tableId=null, customerName=null, customerPhone=null, orderType=DINE_IN, items=[Or (truncated)...]
2025-12-04 10:56:50 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 10:56:50 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        mi1_0.id,
        mi1_0.category_id,
        mi1_0.created_at,
        mi1_0.description,
        mi1_0.device_id,
        mi1_0.image_path,
        mi1_0.is_available,
        mi1_0.is_deleted,
        mi1_0.is_veg,
        mi1_0.name,
        mi1_0.preparation_time,
        mi1_0.price,
        mi1_0.synced_at,
        mi1_0.tenant_id,
        mi1_0.updated_at,
        mi1_0.version 
    from
        public.menu_items mi1_0 
    where
        mi1_0.id=?
2025-12-04 10:56:50 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.order_id=?
2025-12-04 10:56:50 [http-nio-8881-exec-3] INFO  c.r.billing.service.OrderService - Bill generated for order: 2a7bfe9f-78cb-4fbd-bad1-616a5a7b7c7e
2025-12-04 10:56:50 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    insert 
    into
        public.orders
        (created_at, created_by, customer_name, customer_phone, device_id, discount_amount, is_deleted, notes, order_number, order_status, order_type, service_charge, subtotal, synced_at, table_id, tax_amount, tenant_id, total_amount, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-04 10:56:50 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    insert 
    into
        public.order_items
        (created_at, item_name, menu_item_id, order_id, quantity, special_instructions, status, total_price, unit_price, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-04 10:56:50 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    insert 
    into
        public.bills
        (bill_number, change_amount, created_at, discount_amount, generated_by, invoice_path, order_id, paid_amount, payment_method, payment_status, service_charge, subtotal, tax_amount, tenant_id, total_amount, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-04 10:56:50 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:56:50 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [OrderDto(id=2a7bfe9f-78cb-4fbd-bad1-616a5a7b7c7e, orderNumber=ORD1764826010489, tableId=null, tableN (truncated)...]
2025-12-04 10:56:50 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-12-04 10:56:50 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/sync
2025-12-04 10:56:50 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:56:50 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/sync
2025-12-04 10:56:50 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/sync", parameters={}
2025-12-04 10:56:50 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.SyncController#performSync(SyncRequest)
2025-12-04 10:56:50 [http-nio-8881-exec-7] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:56:50 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [SyncRequest(deviceId=d23c59b8-4056-4cc6-b9bc-6ac5018951cf, lastSyncTime=1970-01-01T05:30, data=[Sync (truncated)...]
2025-12-04 10:56:50 [http-nio-8881-exec-7] ERROR c.r.billing.service.SyncService - Sync error for item: 1ffeef27-7047-43b4-91f8-9d8247ffcc40
java.lang.IllegalArgumentException: Unknown entity type: order
	at com.restaurant.billing.service.SyncService.processSyncItem(SyncService.java:107)
	at com.restaurant.billing.service.SyncService.performSync(SyncService.java:34)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at com.restaurant.billing.service.SyncService$$SpringCGLIB$$0.performSync(<generated>)
	at com.restaurant.billing.controller.SyncController.performSync(SyncController.java:23)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 10:56:50 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 10:56:50 [http-nio-8881-exec-7] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
java.lang.IllegalArgumentException: No enum constant com.restaurant.billing.entity.SyncLog.SyncOperation.create
	at java.base/java.lang.Enum.valueOf(Enum.java:273)
	at com.restaurant.billing.entity.SyncLog$SyncOperation.valueOf(SyncLog.java:65)
	at com.restaurant.billing.service.SyncService.logSync(SyncService.java:158)
	at com.restaurant.billing.service.SyncService.performSync(SyncService.java:51)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at com.restaurant.billing.service.SyncService$$SpringCGLIB$$0.performSync(<generated>)
	at com.restaurant.billing.controller.SyncController.performSync(SyncController.java:23)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 10:56:50 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:56:50 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T10:56:50.522423994, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 10:56:50 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [java.lang.IllegalArgumentException: No enum constant com.restaurant.billing.entity.SyncLog.SyncOperation.create]
2025-12-04 10:56:50 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 10:58:49 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 10:58:49 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 10:58:49 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 10:58:49 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 10:58:49 [http-nio-8881-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-12-04 10:58:49 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 10:58:49 [http-nio-8881-exec-4] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-12-04 10:58:49 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 10:58:49 [http-nio-8881-exec-4] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/restaurant/profile.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:586)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 10:58:49 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 10:58:49 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T10:58:49.567078448, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 10:58:49 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/restaurant/profile.]
2025-12-04 10:58:49 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 10:59:18 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-04 10:59:18 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-12-04 10:59:18 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-12-04 11:00:01 [main] INFO  c.r.b.RestaurantBillingApplication - Starting RestaurantBillingApplication using Java 17.0.17 with PID 1122262 (/home/ubuntu/Documents/Mine/Restaurant-BE/build/classes/java/main started by ubuntu in /home/ubuntu/Documents/Mine/Restaurant-BE)
2025-12-04 11:00:01 [main] DEBUG c.r.b.RestaurantBillingApplication - Running with Spring Boot v3.3.10, Spring v6.1.18
2025-12-04 11:00:01 [main] INFO  c.r.b.RestaurantBillingApplication - No active profile set, falling back to 1 default profile: "default"
2025-12-04 11:00:02 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-04 11:00:02 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 44 ms. Found 14 JPA repository interfaces.
2025-12-04 11:00:02 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8881 (http)
2025-12-04 11:00:02 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-04 11:00:02 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-12-04 11:00:02 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-12-04 11:00:02 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1271 ms
2025-12-04 11:00:02 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-04 11:00:02 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.3.Final
2025-12-04 11:00:02 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-12-04 11:00:03 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-04 11:00:03 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-12-04 11:00:03 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@2c154508
2025-12-04 11:00:03 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-12-04 11:00:03 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-04 11:00:03 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-04 11:00:04 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-04 11:00:04 [main] DEBUG c.r.b.s.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-12-04 11:00:04 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-04 11:00:05 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-12-04 11:00:05 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 42 mappings in 'requestMappingHandlerMapping'
2025-12-04 11:00:05 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /uploads/**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-12-04 11:00:05 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-04 11:00:05 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-04 11:00:05 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-04 11:00:05 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8881 (http) with context path '/'
2025-12-04 11:00:05 [main] INFO  c.r.b.RestaurantBillingApplication - Started RestaurantBillingApplication in 4.84 seconds (process running for 5.081)
2025-12-04 11:00:38 [http-nio-8881-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-04 11:00:38 [http-nio-8881-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-12-04 11:00:38 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-12-04 11:00:38 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-12-04 11:00:38 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-12-04 11:00:38 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@5e4168dd
2025-12-04 11:00:38 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@3c809ee7
2025-12-04 11:00:38 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-12-04 11:00:38 [http-nio-8881-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-12-04 11:00:38 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 11:00:38 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:00:38 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 11:00:38 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 11:00:38 [http-nio-8881-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-12-04 11:00:38 [http-nio-8881-exec-1] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:00:38 [http-nio-8881-exec-1] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-12-04 11:00:38 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 11:00:38 [http-nio-8881-exec-1] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/restaurant/profile.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:586)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 11:00:38 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:00:38 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T11:00:38.382919270, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 11:00:38 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/restaurant/profile.]
2025-12-04 11:00:38 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 11:03:40 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 11:03:40 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:03:40 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 11:03:40 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 11:03:40 [http-nio-8881-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-12-04 11:03:40 [http-nio-8881-exec-2] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:03:40 [http-nio-8881-exec-2] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-12-04 11:03:40 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 11:03:40 [http-nio-8881-exec-2] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/restaurant/profile.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:586)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 11:03:40 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:03:40 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T11:03:40.748815668, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 11:03:40 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/restaurant/profile.]
2025-12-04 11:03:40 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 11:04:04 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-04 11:04:04 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-12-04 11:04:04 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-12-04 11:04:09 [main] INFO  c.r.b.RestaurantBillingApplication - Starting RestaurantBillingApplication using Java 17.0.17 with PID 1126537 (/home/ubuntu/Documents/Mine/Restaurant-BE/build/classes/java/main started by ubuntu in /home/ubuntu/Documents/Mine/Restaurant-BE)
2025-12-04 11:04:09 [main] DEBUG c.r.b.RestaurantBillingApplication - Running with Spring Boot v3.3.10, Spring v6.1.18
2025-12-04 11:04:09 [main] INFO  c.r.b.RestaurantBillingApplication - No active profile set, falling back to 1 default profile: "default"
2025-12-04 11:04:09 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-04 11:04:09 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 44 ms. Found 14 JPA repository interfaces.
2025-12-04 11:04:10 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8881 (http)
2025-12-04 11:04:10 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-04 11:04:10 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-12-04 11:04:10 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-12-04 11:04:10 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 990 ms
2025-12-04 11:04:10 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-04 11:04:10 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.3.Final
2025-12-04 11:04:10 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-12-04 11:04:10 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-04 11:04:10 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-12-04 11:04:10 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@270b8c2a
2025-12-04 11:04:10 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-12-04 11:04:10 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-04 11:04:11 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-04 11:04:11 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-04 11:04:11 [main] DEBUG c.r.b.s.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-12-04 11:04:12 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-04 11:04:12 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-12-04 11:04:12 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 43 mappings in 'requestMappingHandlerMapping'
2025-12-04 11:04:12 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /uploads/**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-12-04 11:04:12 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-04 11:04:12 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-04 11:04:12 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-04 11:04:13 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8881 (http) with context path '/'
2025-12-04 11:04:13 [main] INFO  c.r.b.RestaurantBillingApplication - Started RestaurantBillingApplication in 4.161 seconds (process running for 4.337)
2025-12-04 11:04:59 [http-nio-8881-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-04 11:04:59 [http-nio-8881-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-12-04 11:04:59 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-12-04 11:04:59 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-12-04 11:04:59 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-12-04 11:04:59 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@686ae6b3
2025-12-04 11:04:59 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@553fdf58
2025-12-04 11:04:59 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-12-04 11:04:59 [http-nio-8881-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-12-04 11:04:59 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 11:04:59 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:04:59 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 11:04:59 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 11:04:59 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#getRestaurantProfile()
2025-12-04 11:04:59 [http-nio-8881-exec-1] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:04:59 [http-nio-8881-exec-1] INFO  c.r.b.service.RestaurantService - Fetching restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:04:59 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 11:04:59 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:04:59 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 11:04:59 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:05:14 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 11:05:14 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:05:14 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 11:05:14 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 11:05:14 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#getRestaurantProfile()
2025-12-04 11:05:14 [http-nio-8881-exec-2] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:05:14 [http-nio-8881-exec-2] INFO  c.r.b.service.RestaurantService - Fetching restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:05:14 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 11:05:14 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:05:14 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 11:05:14 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:05:40 [main] INFO  c.r.b.RestaurantBillingApplication - Starting RestaurantBillingApplication using Java 17.0.17 with PID 1128367 (/home/ubuntu/Documents/Mine/Restaurant-BE/build/classes/java/main started by ubuntu in /home/ubuntu/Documents/Mine/Restaurant-BE)
2025-12-04 11:05:40 [main] DEBUG c.r.b.RestaurantBillingApplication - Running with Spring Boot v3.3.10, Spring v6.1.18
2025-12-04 11:05:40 [main] INFO  c.r.b.RestaurantBillingApplication - No active profile set, falling back to 1 default profile: "default"
2025-12-04 11:05:40 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-04 11:05:40 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 39 ms. Found 14 JPA repository interfaces.
2025-12-04 11:05:41 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8881 (http)
2025-12-04 11:05:41 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-04 11:05:41 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-12-04 11:05:41 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-12-04 11:05:41 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 888 ms
2025-12-04 11:05:41 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-04 11:05:41 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.3.Final
2025-12-04 11:05:41 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-12-04 11:05:41 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-04 11:05:41 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-12-04 11:05:41 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@73234691
2025-12-04 11:05:41 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-12-04 11:05:41 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-04 11:05:42 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-04 11:05:42 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-04 11:05:42 [main] DEBUG c.r.b.s.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-12-04 11:05:43 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-04 11:05:43 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-12-04 11:05:43 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 43 mappings in 'requestMappingHandlerMapping'
2025-12-04 11:05:43 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /uploads/**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-12-04 11:05:43 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-04 11:05:43 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-04 11:05:43 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-04 11:05:44 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'
2025-12-04 11:05:44 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-04 11:05:44 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-12-04 11:05:44 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-12-04 11:05:44 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-12-04 11:05:44 [main] ERROR o.s.b.d.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Web server failed to start. Port 8881 was already in use.

Action:

Identify and stop the process that's listening on port 8881 or configure this application to listen on another port.

2025-12-04 11:06:00 [main] INFO  c.r.b.RestaurantBillingApplication - Starting RestaurantBillingApplication using Java 17.0.17 with PID 1128952 (/home/ubuntu/Documents/Mine/Restaurant-BE/build/classes/java/main started by ubuntu in /home/ubuntu/Documents/Mine/Restaurant-BE)
2025-12-04 11:06:00 [main] DEBUG c.r.b.RestaurantBillingApplication - Running with Spring Boot v3.3.10, Spring v6.1.18
2025-12-04 11:06:00 [main] INFO  c.r.b.RestaurantBillingApplication - No active profile set, falling back to 1 default profile: "default"
2025-12-04 11:06:01 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-04 11:06:01 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 40 ms. Found 14 JPA repository interfaces.
2025-12-04 11:06:01 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8881 (http)
2025-12-04 11:06:01 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-04 11:06:01 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-12-04 11:06:01 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-12-04 11:06:01 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 898 ms
2025-12-04 11:06:01 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-04 11:06:01 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.3.Final
2025-12-04 11:06:01 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-12-04 11:06:02 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-04 11:06:02 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-12-04 11:06:02 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@b6136eb
2025-12-04 11:06:02 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-12-04 11:06:02 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-04 11:06:02 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-04 11:06:03 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-04 11:06:03 [main] DEBUG c.r.b.s.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-12-04 11:06:03 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-04 11:06:04 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-12-04 11:06:04 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 43 mappings in 'requestMappingHandlerMapping'
2025-12-04 11:06:04 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /uploads/**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-12-04 11:06:04 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-04 11:06:04 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-04 11:06:04 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-04 11:06:04 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'
2025-12-04 11:06:04 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-04 11:06:04 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-12-04 11:06:04 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-12-04 11:06:04 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-12-04 11:06:04 [main] ERROR o.s.b.d.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Web server failed to start. Port 8881 was already in use.

Action:

Identify and stop the process that's listening on port 8881 or configure this application to listen on another port.

2025-12-04 11:07:40 [main] INFO  c.r.b.RestaurantBillingApplication - Starting RestaurantBillingApplication using Java 17.0.17 with PID 1130516 (/home/ubuntu/Documents/Mine/Restaurant-BE/build/classes/java/main started by ubuntu in /home/ubuntu/Documents/Mine/Restaurant-BE)
2025-12-04 11:07:40 [main] DEBUG c.r.b.RestaurantBillingApplication - Running with Spring Boot v3.3.10, Spring v6.1.18
2025-12-04 11:07:40 [main] INFO  c.r.b.RestaurantBillingApplication - No active profile set, falling back to 1 default profile: "default"
2025-12-04 11:07:41 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-04 11:07:41 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 40 ms. Found 14 JPA repository interfaces.
2025-12-04 11:07:41 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8881 (http)
2025-12-04 11:07:41 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-04 11:07:41 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-12-04 11:07:41 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-12-04 11:07:41 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 893 ms
2025-12-04 11:07:41 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-04 11:07:41 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.3.Final
2025-12-04 11:07:41 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-12-04 11:07:41 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-04 11:07:41 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-12-04 11:07:42 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@2aa07d80
2025-12-04 11:07:42 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-12-04 11:07:42 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-04 11:07:42 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-04 11:07:43 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-04 11:07:43 [main] DEBUG c.r.b.s.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-12-04 11:07:43 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-04 11:07:43 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-12-04 11:07:44 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 43 mappings in 'requestMappingHandlerMapping'
2025-12-04 11:07:44 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /uploads/**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-12-04 11:07:44 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-04 11:07:44 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-04 11:07:44 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-04 11:07:44 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8881 (http) with context path '/'
2025-12-04 11:07:44 [main] INFO  c.r.b.RestaurantBillingApplication - Started RestaurantBillingApplication in 3.868 seconds (process running for 4.034)
2025-12-04 11:08:45 [http-nio-8881-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-04 11:08:45 [http-nio-8881-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-12-04 11:08:45 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-12-04 11:08:45 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-12-04 11:08:45 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-12-04 11:08:45 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@180ee8dd
2025-12-04 11:08:45 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@443ec909
2025-12-04 11:08:45 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-12-04 11:08:45 [http-nio-8881-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-12-04 11:08:45 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/auth/login
2025-12-04 11:08:45 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-12-04 11:08:45 [http-nio-8881-exec-2] ERROR c.r.billing.security.JwtUtil - Invalid JWT token: JWT expired at 2025-12-03T13:13:21Z. Current time: 2025-12-04T05:38:45Z, a difference of 59124909 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-12-04 11:08:45 [http-nio-8881-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-04 11:08:45 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-12-04 11:08:45 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-12-04 11:08:45 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.AuthController#login(LoginRequest)
2025-12-04 11:08:45 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(restaurantCode=REST14DAA490, username=Ganesh@gmail.com, password=Rest@1234)]
2025-12-04 11:08:45 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.restaurant_code=?
2025-12-04 11:08:45 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=? 
        and u1_0.tenant_id=?
2025-12-04 11:08:46 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    update
        public.users 
    set
        auth_provider=?,
        email=?,
        google_id=?,
        is_active=?,
        last_login=?,
        name=?,
        password_hash=?,
        phone=?,
        refresh_token=?,
        refresh_token_expiry=?,
        role=?,
        tenant_id=?,
        updated_at=? 
    where
        id=?
2025-12-04 11:08:46 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:08:46 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiT1dORVIiLCJ0ZW5hbnRJZCI6ImNjNzFkN2U0LWNmNj (truncated)...]
2025-12-04 11:08:46 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:08:46 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/today-sales
2025-12-04 11:08:46 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/active-orders
2025-12-04 11:08:46 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/pending-payments
2025-12-04 11:08:46 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/tables-occupied
2025-12-04 11:08:46 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/stats
2025-12-04 11:08:46 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/today-sales
2025-12-04 11:08:46 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/active-orders
2025-12-04 11:08:46 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/stats
2025-12-04 11:08:46 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/tables-occupied
2025-12-04 11:08:46 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/pending-payments
2025-12-04 11:08:46 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:08:46 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:08:46 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:08:46 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:08:46 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:08:46 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/tables-occupied
2025-12-04 11:08:46 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/pending-payments
2025-12-04 11:08:46 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/today-sales
2025-12-04 11:08:46 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/stats
2025-12-04 11:08:46 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/active-orders
2025-12-04 11:08:46 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/tables-occupied", parameters={}
2025-12-04 11:08:46 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/pending-payments", parameters={}
2025-12-04 11:08:46 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/stats", parameters={}
2025-12-04 11:08:46 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/today-sales", parameters={}
2025-12-04 11:08:46 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/active-orders", parameters={}
2025-12-04 11:08:46 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTodaySales()
2025-12-04 11:08:46 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getDashboardStats()
2025-12-04 11:08:46 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getPendingPayments()
2025-12-04 11:08:46 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTablesOccupied()
2025-12-04 11:08:46 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getActiveOrders()
2025-12-04 11:08:46 [http-nio-8881-exec-8] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:08:46 [http-nio-8881-exec-1] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:08:46 [http-nio-8881-exec-2] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:08:46 [http-nio-8881-exec-10] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:08:46 [http-nio-8881-exec-9] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:08:46 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 11:08:46 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:08:46 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 11:08:46 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:08:46 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 11:08:46 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 11:08:46 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 11:08:46 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:08:46 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 11:08:46 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 11:08:46 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:08:46 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:08:46 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 11:08:46 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:08:46 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 11:08:46 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 11:08:46 [http-nio-8881-exec-8] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session
	at org.hibernate.collection.spi.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:636)
	at org.hibernate.collection.spi.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:219)
	at org.hibernate.collection.spi.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:615)
	at org.hibernate.collection.spi.AbstractPersistentCollection.read(AbstractPersistentCollection.java:138)
	at org.hibernate.collection.spi.PersistentBag.iterator(PersistentBag.java:369)
	at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1842)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.reduce(ReferencePipeline.java:657)
	at com.restaurant.billing.service.DashboardService.getTodaySales(DashboardService.java:80)
	at com.restaurant.billing.controller.DashboardController.getTodaySales(DashboardController.java:24)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 11:08:46 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 11:08:46 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:08:46 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T11:08:46.468521960, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 11:08:46 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session]
2025-12-04 11:08:46 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 11:08:46 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 11:08:46 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:08:46 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{tablesOccupied=0, todaySales=0, activeOrders=0, pendingPayments=0}]
2025-12-04 11:08:46 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:08:46 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/orders
2025-12-04 11:08:46 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/orders
2025-12-04 11:08:46 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:08:46 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/orders
2025-12-04 11:08:46 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/orders", parameters={}
2025-12-04 11:08:46 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#getAllOrders()
2025-12-04 11:08:46 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:08:46 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 11:08:46 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:08:46 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:08:46 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:08:46 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:08:46 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:08:46 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:08:46 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:08:46 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:08:46 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:08:46 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:08:46 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[OrderDto(id=3d2cc165-482d-4290-b220-105d1ad18880, orderNumber=ORD1764763565538, tableId=null, table (truncated)...]
2025-12-04 11:08:46 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:08:49 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/restaurant/profile
2025-12-04 11:08:49 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 11:08:49 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:08:49 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 11:08:49 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 11:08:49 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#getRestaurantProfile()
2025-12-04 11:08:49 [http-nio-8881-exec-6] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:08:49 [http-nio-8881-exec-6] INFO  c.r.b.service.RestaurantService - Fetching restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:08:49 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 11:08:49 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:08:49 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 11:08:49 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:09:32 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/restaurant/profile
2025-12-04 11:09:32 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:09:32 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/restaurant/profile
2025-12-04 11:09:32 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/api/restaurant/profile", parameters={}
2025-12-04 11:09:32 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 11:09:32 [http-nio-8881-exec-7] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'PUT' is not supported
	at org.springframework.web.servlet.mvc.method.RequestMappingInfoHandlerMapping.handleNoMatch(RequestMappingInfoHandlerMapping.java:267)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.lookupHandlerMethod(AbstractHandlerMethodMapping.java:441)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.getHandlerInternal(AbstractHandlerMethodMapping.java:382)
	at org.springframework.web.servlet.mvc.method.RequestMappingInfoHandlerMapping.getHandlerInternal(RequestMappingInfoHandlerMapping.java:127)
	at org.springframework.web.servlet.mvc.method.RequestMappingInfoHandlerMapping.getHandlerInternal(RequestMappingInfoHandlerMapping.java:68)
	at org.springframework.web.servlet.handler.AbstractHandlerMapping.getHandler(AbstractHandlerMapping.java:507)
	at org.springframework.web.servlet.DispatcherServlet.getHandler(DispatcherServlet.java:1284)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1065)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:925)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:593)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 11:09:32 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:09:32 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T11:09:32.530760539, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 11:09:32 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'PUT' is not supported]
2025-12-04 11:09:32 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 11:09:50 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 11:09:50 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:09:50 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 11:09:50 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 11:09:50 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#getRestaurantProfile()
2025-12-04 11:09:50 [http-nio-8881-exec-8] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:09:50 [http-nio-8881-exec-8] INFO  c.r.b.service.RestaurantService - Fetching restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:09:50 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 11:09:50 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:09:50 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 11:09:50 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:10:10 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/restaurant/profile
2025-12-04 11:10:10 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:10:10 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/restaurant/profile
2025-12-04 11:10:10 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/api/restaurant/profile", parameters={}
2025-12-04 11:10:10 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 11:10:10 [http-nio-8881-exec-2] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'PUT' is not supported
	at org.springframework.web.servlet.mvc.method.RequestMappingInfoHandlerMapping.handleNoMatch(RequestMappingInfoHandlerMapping.java:267)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.lookupHandlerMethod(AbstractHandlerMethodMapping.java:441)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.getHandlerInternal(AbstractHandlerMethodMapping.java:382)
	at org.springframework.web.servlet.mvc.method.RequestMappingInfoHandlerMapping.getHandlerInternal(RequestMappingInfoHandlerMapping.java:127)
	at org.springframework.web.servlet.mvc.method.RequestMappingInfoHandlerMapping.getHandlerInternal(RequestMappingInfoHandlerMapping.java:68)
	at org.springframework.web.servlet.handler.AbstractHandlerMapping.getHandler(AbstractHandlerMapping.java:507)
	at org.springframework.web.servlet.DispatcherServlet.getHandler(DispatcherServlet.java:1284)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1065)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:925)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:593)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 11:10:10 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:10:10 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T11:10:10.574330194, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 11:10:10 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'PUT' is not supported]
2025-12-04 11:10:10 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 11:10:22 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/restaurant/profile
2025-12-04 11:10:22 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:10:22 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/restaurant/profile
2025-12-04 11:10:22 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/api/restaurant/profile", parameters={}
2025-12-04 11:10:22 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 11:10:22 [http-nio-8881-exec-3] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'PUT' is not supported
	at org.springframework.web.servlet.mvc.method.RequestMappingInfoHandlerMapping.handleNoMatch(RequestMappingInfoHandlerMapping.java:267)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.lookupHandlerMethod(AbstractHandlerMethodMapping.java:441)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.getHandlerInternal(AbstractHandlerMethodMapping.java:382)
	at org.springframework.web.servlet.mvc.method.RequestMappingInfoHandlerMapping.getHandlerInternal(RequestMappingInfoHandlerMapping.java:127)
	at org.springframework.web.servlet.mvc.method.RequestMappingInfoHandlerMapping.getHandlerInternal(RequestMappingInfoHandlerMapping.java:68)
	at org.springframework.web.servlet.handler.AbstractHandlerMapping.getHandler(AbstractHandlerMapping.java:507)
	at org.springframework.web.servlet.DispatcherServlet.getHandler(DispatcherServlet.java:1284)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1065)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:925)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:593)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 11:10:22 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:10:22 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T11:10:22.627735575, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 11:10:22 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'PUT' is not supported]
2025-12-04 11:10:22 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 11:12:09 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-04 11:12:09 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-12-04 11:12:09 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-12-04 11:15:11 [main] INFO  c.r.b.RestaurantBillingApplication - Starting RestaurantBillingApplication using Java 17.0.17 with PID 1137434 (/home/ubuntu/Documents/Mine/Restaurant-BE/build/classes/java/main started by ubuntu in /home/ubuntu/Documents/Mine/Restaurant-BE)
2025-12-04 11:15:11 [main] DEBUG c.r.b.RestaurantBillingApplication - Running with Spring Boot v3.3.10, Spring v6.1.18
2025-12-04 11:15:11 [main] INFO  c.r.b.RestaurantBillingApplication - No active profile set, falling back to 1 default profile: "default"
2025-12-04 11:15:11 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-04 11:15:11 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 40 ms. Found 14 JPA repository interfaces.
2025-12-04 11:15:12 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8881 (http)
2025-12-04 11:15:12 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-04 11:15:12 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-12-04 11:15:12 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-12-04 11:15:12 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 893 ms
2025-12-04 11:15:12 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-04 11:15:12 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.3.Final
2025-12-04 11:15:12 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-12-04 11:15:12 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-04 11:15:12 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-12-04 11:15:12 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@3355b8ff
2025-12-04 11:15:12 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-12-04 11:15:12 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-04 11:15:13 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-04 11:15:13 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-04 11:15:13 [main] DEBUG c.r.b.s.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-12-04 11:15:13 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-04 11:15:14 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-12-04 11:15:14 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 44 mappings in 'requestMappingHandlerMapping'
2025-12-04 11:15:14 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /uploads/**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-12-04 11:15:14 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-04 11:15:14 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-04 11:15:14 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-04 11:15:14 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8881 (http) with context path '/'
2025-12-04 11:15:14 [main] INFO  c.r.b.RestaurantBillingApplication - Started RestaurantBillingApplication in 3.924 seconds (process running for 4.09)
2025-12-04 11:15:32 [http-nio-8881-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-04 11:15:32 [http-nio-8881-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-12-04 11:15:32 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-12-04 11:15:32 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-12-04 11:15:32 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-12-04 11:15:32 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@761eaf72
2025-12-04 11:15:32 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@3086155a
2025-12-04 11:15:32 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-12-04 11:15:32 [http-nio-8881-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-12-04 11:15:32 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/restaurant/profile
2025-12-04 11:15:32 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:15:32 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/restaurant/profile
2025-12-04 11:15:32 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/api/restaurant/profile", parameters={}
2025-12-04 11:15:32 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#updateRestaurantProfile(UpdateRestaurantProfileRequest)
2025-12-04 11:15:32 [http-nio-8881-exec-1] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:15:32 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [UpdateRestaurantProfileRequest(restaurantName=null, ownerName=null, ownerPhone=null, address=kk stre (truncated)...]
2025-12-04 11:15:32 [http-nio-8881-exec-1] INFO  c.r.b.service.RestaurantService - Updating restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:15:32 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 11:15:32 [http-nio-8881-exec-1] INFO  c.r.b.service.RestaurantService - Restaurant profile updated successfully for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:15:32 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    update
        public.tenants 
    set
        address=?,
        city=?,
        currency=?,
        gstin=?,
        is_active=?,
        logo_path=?,
        max_storage_gb=?,
        max_users=?,
        owner_email=?,
        owner_name=?,
        owner_phone=?,
        pincode=?,
        razorpay_customer_id=?,
        razorpay_subscription_id=?,
        restaurant_code=?,
        restaurant_name=?,
        service_charge_rate=?,
        state=?,
        subscription_end_date=?,
        subscription_plan=?,
        subscription_start_date=?,
        subscription_status=?,
        tax_rate=?,
        timezone=?,
        trial_end_date=?,
        updated_at=? 
    where
        id=?
2025-12-04 11:15:32 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:15:32 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 11:15:32 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:15:43 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/orders
2025-12-04 11:15:43 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:15:43 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/orders
2025-12-04 11:15:43 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/orders", parameters={}
2025-12-04 11:15:43 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#getAllOrders()
2025-12-04 11:15:43 [http-nio-8881-exec-2] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:15:43 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 11:15:43 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:15:43 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:15:43 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:15:43 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:15:43 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:15:43 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:15:43 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:15:43 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:15:43 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:15:43 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:15:43 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[OrderDto(id=3d2cc165-482d-4290-b220-105d1ad18880, orderNumber=ORD1764763565538, tableId=null, table (truncated)...]
2025-12-04 11:15:43 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:15:44 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/today-sales
2025-12-04 11:15:44 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/active-orders
2025-12-04 11:15:44 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/pending-payments
2025-12-04 11:15:44 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:15:44 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:15:44 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:15:44 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/active-orders
2025-12-04 11:15:44 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/active-orders", parameters={}
2025-12-04 11:15:44 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getActiveOrders()
2025-12-04 11:15:44 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:15:44 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/today-sales
2025-12-04 11:15:44 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/pending-payments
2025-12-04 11:15:44 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/today-sales", parameters={}
2025-12-04 11:15:44 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/pending-payments", parameters={}
2025-12-04 11:15:44 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getPendingPayments()
2025-12-04 11:15:44 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTodaySales()
2025-12-04 11:15:44 [http-nio-8881-exec-5] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:15:44 [http-nio-8881-exec-3] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:15:44 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/tables-occupied
2025-12-04 11:15:44 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/stats
2025-12-04 11:15:44 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:15:44 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:15:44 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/stats
2025-12-04 11:15:44 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/tables-occupied
2025-12-04 11:15:44 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/stats", parameters={}
2025-12-04 11:15:44 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/tables-occupied", parameters={}
2025-12-04 11:15:44 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getDashboardStats()
2025-12-04 11:15:44 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTablesOccupied()
2025-12-04 11:15:44 [http-nio-8881-exec-7] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:15:44 [http-nio-8881-exec-6] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:15:44 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 11:15:44 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:15:44 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 11:15:44 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:15:44 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 11:15:44 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 11:15:44 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 11:15:44 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:15:44 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 11:15:44 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:15:44 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 11:15:44 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:15:44 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:15:44 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 11:15:44 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 11:15:44 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 11:15:44 [http-nio-8881-exec-3] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session
	at org.hibernate.collection.spi.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:636)
	at org.hibernate.collection.spi.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:219)
	at org.hibernate.collection.spi.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:615)
	at org.hibernate.collection.spi.AbstractPersistentCollection.read(AbstractPersistentCollection.java:138)
	at org.hibernate.collection.spi.PersistentBag.iterator(PersistentBag.java:369)
	at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1842)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.reduce(ReferencePipeline.java:657)
	at com.restaurant.billing.service.DashboardService.getTodaySales(DashboardService.java:80)
	at com.restaurant.billing.controller.DashboardController.getTodaySales(DashboardController.java:24)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 11:15:44 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 11:15:44 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:15:44 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T11:15:44.905709288, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 11:15:44 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 11:15:44 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session]
2025-12-04 11:15:44 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 11:15:44 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:15:44 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{pendingPayments=0, activeOrders=0, todaySales=0, tablesOccupied=0}]
2025-12-04 11:15:44 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:15:44 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/orders
2025-12-04 11:15:44 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:15:44 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/orders
2025-12-04 11:15:44 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/orders", parameters={}
2025-12-04 11:15:44 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#getAllOrders()
2025-12-04 11:15:44 [http-nio-8881-exec-8] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:15:44 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 11:15:44 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:15:44 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:15:44 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:15:44 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:15:44 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:15:44 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:15:44 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:15:44 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:15:44 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:15:44 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:15:44 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[OrderDto(id=3d2cc165-482d-4290-b220-105d1ad18880, orderNumber=ORD1764763565538, tableId=null, table (truncated)...]
2025-12-04 11:15:44 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:15:51 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/reports/day-wise?startDate=2025-11-27T11%3A15%3A51.268&endDate=2025-12-04T11%3A15%3A51.268
2025-12-04 11:15:51 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/reports/day-wise?startDate=2025-11-27T11%3A15%3A51.268&endDate=2025-12-04T11%3A15%3A51.268
2025-12-04 11:15:51 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:15:51 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/reports/day-wise?startDate=2025-11-27T11%3A15%3A51.268&endDate=2025-12-04T11%3A15%3A51.268
2025-12-04 11:15:51 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/day-wise?startDate=2025-11-27T11%3A15%3A51.268&endDate=2025-12-04T11%3A15%3A51.268", parameters={masked}
2025-12-04 11:15:51 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.ReportController#getDayWiseSales(LocalDateTime, LocalDateTime)
2025-12-04 11:15:51 [http-nio-8881-exec-10] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:15:51 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 11:15:51 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:15:51 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[{date=2025-12-03, totalSales=0}, {date=2025-12-04, totalSales=0}]]
2025-12-04 11:15:51 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:15:51 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/reports/product-wise?startDate=2025-11-27T11%3A15%3A51.268&endDate=2025-12-04T11%3A15%3A51.268
2025-12-04 11:15:51 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/reports/product-wise?startDate=2025-11-27T11%3A15%3A51.268&endDate=2025-12-04T11%3A15%3A51.268
2025-12-04 11:15:51 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:15:51 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/reports/product-wise?startDate=2025-11-27T11%3A15%3A51.268&endDate=2025-12-04T11%3A15%3A51.268
2025-12-04 11:15:51 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/product-wise?startDate=2025-11-27T11%3A15%3A51.268&endDate=2025-12-04T11%3A15%3A51.268", parameters={masked}
2025-12-04 11:15:51 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.ReportController#getProductWiseSales(LocalDateTime, LocalDateTime)
2025-12-04 11:15:51 [http-nio-8881-exec-2] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:15:51 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        oi1_0.menu_item_id,
        oi1_0.item_name,
        sum(oi1_0.quantity),
        sum(oi1_0.total_price) 
    from
        public.order_items oi1_0 
    join
        public.orders o1_0 
            on o1_0.id=oi1_0.order_id 
    where
        o1_0.tenant_id=? 
        and o1_0.created_at between ? and ? 
    group by
        oi1_0.menu_item_id,
        oi1_0.item_name 
    order by
        sum(oi1_0.total_price) desc
2025-12-04 11:15:51 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:15:51 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[{menuItemId=8a5577b8-36d5-4a3d-9299-903f009a42b9, totalRevenue=210.00, totalQuantity=14, itemName=T (truncated)...]
2025-12-04 11:15:51 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:15:53 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/reports/day-wise?startDate=2025-12-01T00%3A00%3A00.000&endDate=2025-12-04T11%3A15%3A53.129
2025-12-04 11:15:53 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/reports/day-wise?startDate=2025-12-01T00%3A00%3A00.000&endDate=2025-12-04T11%3A15%3A53.129
2025-12-04 11:15:53 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:15:53 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/reports/day-wise?startDate=2025-12-01T00%3A00%3A00.000&endDate=2025-12-04T11%3A15%3A53.129
2025-12-04 11:15:53 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/day-wise?startDate=2025-12-01T00%3A00%3A00.000&endDate=2025-12-04T11%3A15%3A53.129", parameters={masked}
2025-12-04 11:15:53 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.ReportController#getDayWiseSales(LocalDateTime, LocalDateTime)
2025-12-04 11:15:53 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:15:53 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 11:15:53 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:15:53 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[{date=2025-12-03, totalSales=0}, {date=2025-12-04, totalSales=0}]]
2025-12-04 11:15:53 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:15:53 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/reports/product-wise?startDate=2025-12-01T00%3A00%3A00.000&endDate=2025-12-04T11%3A15%3A53.129
2025-12-04 11:15:53 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/reports/product-wise?startDate=2025-12-01T00%3A00%3A00.000&endDate=2025-12-04T11%3A15%3A53.129
2025-12-04 11:15:53 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:15:53 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/reports/product-wise?startDate=2025-12-01T00%3A00%3A00.000&endDate=2025-12-04T11%3A15%3A53.129
2025-12-04 11:15:53 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/product-wise?startDate=2025-12-01T00%3A00%3A00.000&endDate=2025-12-04T11%3A15%3A53.129", parameters={masked}
2025-12-04 11:15:53 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.ReportController#getProductWiseSales(LocalDateTime, LocalDateTime)
2025-12-04 11:15:53 [http-nio-8881-exec-3] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:15:53 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        oi1_0.menu_item_id,
        oi1_0.item_name,
        sum(oi1_0.quantity),
        sum(oi1_0.total_price) 
    from
        public.order_items oi1_0 
    join
        public.orders o1_0 
            on o1_0.id=oi1_0.order_id 
    where
        o1_0.tenant_id=? 
        and o1_0.created_at between ? and ? 
    group by
        oi1_0.menu_item_id,
        oi1_0.item_name 
    order by
        sum(oi1_0.total_price) desc
2025-12-04 11:15:53 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:15:53 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[{menuItemId=8a5577b8-36d5-4a3d-9299-903f009a42b9, totalRevenue=210.00, totalQuantity=14, itemName=T (truncated)...]
2025-12-04 11:15:53 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:15:53 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/reports/day-wise?startDate=2025-11-27T11%3A15%3A53.825&endDate=2025-12-04T11%3A15%3A53.825
2025-12-04 11:15:53 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/reports/day-wise?startDate=2025-11-27T11%3A15%3A53.825&endDate=2025-12-04T11%3A15%3A53.825
2025-12-04 11:15:53 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:15:53 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/reports/day-wise?startDate=2025-11-27T11%3A15%3A53.825&endDate=2025-12-04T11%3A15%3A53.825
2025-12-04 11:15:53 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/day-wise?startDate=2025-11-27T11%3A15%3A53.825&endDate=2025-12-04T11%3A15%3A53.825", parameters={masked}
2025-12-04 11:15:53 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.ReportController#getDayWiseSales(LocalDateTime, LocalDateTime)
2025-12-04 11:15:53 [http-nio-8881-exec-8] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:15:53 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 11:15:53 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:15:53 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[{date=2025-12-03, totalSales=0}, {date=2025-12-04, totalSales=0}]]
2025-12-04 11:15:53 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:15:53 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/reports/product-wise?startDate=2025-11-27T11%3A15%3A53.825&endDate=2025-12-04T11%3A15%3A53.825
2025-12-04 11:15:53 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/reports/product-wise?startDate=2025-11-27T11%3A15%3A53.825&endDate=2025-12-04T11%3A15%3A53.825
2025-12-04 11:15:53 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:15:53 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/reports/product-wise?startDate=2025-11-27T11%3A15%3A53.825&endDate=2025-12-04T11%3A15%3A53.825
2025-12-04 11:15:53 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/product-wise?startDate=2025-11-27T11%3A15%3A53.825&endDate=2025-12-04T11%3A15%3A53.825", parameters={masked}
2025-12-04 11:15:53 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.ReportController#getProductWiseSales(LocalDateTime, LocalDateTime)
2025-12-04 11:15:53 [http-nio-8881-exec-10] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:15:53 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        oi1_0.menu_item_id,
        oi1_0.item_name,
        sum(oi1_0.quantity),
        sum(oi1_0.total_price) 
    from
        public.order_items oi1_0 
    join
        public.orders o1_0 
            on o1_0.id=oi1_0.order_id 
    where
        o1_0.tenant_id=? 
        and o1_0.created_at between ? and ? 
    group by
        oi1_0.menu_item_id,
        oi1_0.item_name 
    order by
        sum(oi1_0.total_price) desc
2025-12-04 11:15:53 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:15:53 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[{menuItemId=8a5577b8-36d5-4a3d-9299-903f009a42b9, totalRevenue=210.00, totalQuantity=14, itemName=T (truncated)...]
2025-12-04 11:15:53 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:15:54 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/reports/day-wise?startDate=2025-12-04T00%3A00%3A00.000&endDate=2025-12-04T11%3A15%3A54.761
2025-12-04 11:15:54 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/reports/day-wise?startDate=2025-12-04T00%3A00%3A00.000&endDate=2025-12-04T11%3A15%3A54.761
2025-12-04 11:15:54 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:15:54 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/reports/day-wise?startDate=2025-12-04T00%3A00%3A00.000&endDate=2025-12-04T11%3A15%3A54.761
2025-12-04 11:15:54 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/day-wise?startDate=2025-12-04T00%3A00%3A00.000&endDate=2025-12-04T11%3A15%3A54.761", parameters={masked}
2025-12-04 11:15:54 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.ReportController#getDayWiseSales(LocalDateTime, LocalDateTime)
2025-12-04 11:15:54 [http-nio-8881-exec-2] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:15:54 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 11:15:54 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:15:54 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[{date=2025-12-04, totalSales=0}]]
2025-12-04 11:15:54 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:15:54 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/reports/product-wise?startDate=2025-12-04T00%3A00%3A00.000&endDate=2025-12-04T11%3A15%3A54.761
2025-12-04 11:15:54 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/reports/product-wise?startDate=2025-12-04T00%3A00%3A00.000&endDate=2025-12-04T11%3A15%3A54.761
2025-12-04 11:15:54 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:15:54 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/reports/product-wise?startDate=2025-12-04T00%3A00%3A00.000&endDate=2025-12-04T11%3A15%3A54.761
2025-12-04 11:15:54 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/product-wise?startDate=2025-12-04T00%3A00%3A00.000&endDate=2025-12-04T11%3A15%3A54.761", parameters={masked}
2025-12-04 11:15:54 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.ReportController#getProductWiseSales(LocalDateTime, LocalDateTime)
2025-12-04 11:15:54 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:15:54 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        oi1_0.menu_item_id,
        oi1_0.item_name,
        sum(oi1_0.quantity),
        sum(oi1_0.total_price) 
    from
        public.order_items oi1_0 
    join
        public.orders o1_0 
            on o1_0.id=oi1_0.order_id 
    where
        o1_0.tenant_id=? 
        and o1_0.created_at between ? and ? 
    group by
        oi1_0.menu_item_id,
        oi1_0.item_name 
    order by
        sum(oi1_0.total_price) desc
2025-12-04 11:15:54 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:15:54 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[{menuItemId=910b21d2-8fbe-4306-9a30-db48d7361b2e, totalRevenue=100.00, totalQuantity=2, itemName=Po (truncated)...]
2025-12-04 11:15:54 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:15:56 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/orders
2025-12-04 11:15:56 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:15:56 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/orders
2025-12-04 11:15:56 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/orders", parameters={}
2025-12-04 11:15:56 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#getAllOrders()
2025-12-04 11:15:56 [http-nio-8881-exec-5] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:15:56 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 11:15:56 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:15:56 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:15:56 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:15:56 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:15:56 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:15:56 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:15:56 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:15:56 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:15:56 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:15:56 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:15:56 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[OrderDto(id=3d2cc165-482d-4290-b220-105d1ad18880, orderNumber=ORD1764763565538, tableId=null, table (truncated)...]
2025-12-04 11:15:56 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:15:57 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/menu
2025-12-04 11:15:57 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/menu
2025-12-04 11:15:57 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:15:57 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/menu
2025-12-04 11:15:57 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/menu", parameters={}
2025-12-04 11:15:57 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.MenuController#getAllMenuItems()
2025-12-04 11:15:57 [http-nio-8881-exec-7] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:15:57 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        mi1_0.id,
        mi1_0.category_id,
        mi1_0.created_at,
        mi1_0.description,
        mi1_0.device_id,
        mi1_0.image_path,
        mi1_0.is_available,
        mi1_0.is_deleted,
        mi1_0.is_veg,
        mi1_0.name,
        mi1_0.preparation_time,
        mi1_0.price,
        mi1_0.synced_at,
        mi1_0.tenant_id,
        mi1_0.updated_at,
        mi1_0.version 
    from
        public.menu_items mi1_0 
    where
        mi1_0.tenant_id=? 
        and mi1_0.is_deleted=?
2025-12-04 11:15:57 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:15:57 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[MenuItemDto(id=8a5577b8-36d5-4a3d-9299-903f009a42b9, categoryId=6ed45abe-f8f6-4966-8126-a3f0d0bd0aa (truncated)...]
2025-12-04 11:15:57 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:15:57 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/categories?activeOnly=true
2025-12-04 11:15:57 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/categories?activeOnly=true
2025-12-04 11:15:57 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:15:57 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/categories?activeOnly=true
2025-12-04 11:15:57 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/categories?activeOnly=true", parameters={masked}
2025-12-04 11:15:57 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.CategoryController#getAllCategories(UserDetails, Boolean)
2025-12-04 11:15:57 [http-nio-8881-exec-9] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:15:57 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:15:57 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.display_order,
        c1_0.is_active,
        c1_0.name,
        c1_0.tenant_id,
        c1_0.updated_at 
    from
        public.categories c1_0 
    where
        c1_0.tenant_id=? 
        and c1_0.is_active=? 
    order by
        c1_0.display_order
2025-12-04 11:15:57 [http-nio-8881-exec-9] DEBUG c.r.billing.service.CategoryService - Found 2 categories for tenant cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:15:57 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:15:57 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[CategoryDto(id=6ed45abe-f8f6-4966-8126-a3f0d0bd0aaa, name=Main course, displayOrder=1), CategoryDto (truncated)...]
2025-12-04 11:15:57 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:15:59 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/reports/day-wise?startDate=2025-11-27T11%3A15%3A58.990&endDate=2025-12-04T11%3A15%3A58.990
2025-12-04 11:15:59 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/reports/day-wise?startDate=2025-11-27T11%3A15%3A58.990&endDate=2025-12-04T11%3A15%3A58.990
2025-12-04 11:15:59 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:15:59 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/reports/day-wise?startDate=2025-11-27T11%3A15%3A58.990&endDate=2025-12-04T11%3A15%3A58.990
2025-12-04 11:15:59 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/day-wise?startDate=2025-11-27T11%3A15%3A58.990&endDate=2025-12-04T11%3A15%3A58.990", parameters={masked}
2025-12-04 11:15:59 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.ReportController#getDayWiseSales(LocalDateTime, LocalDateTime)
2025-12-04 11:15:59 [http-nio-8881-exec-1] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:15:59 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 11:15:59 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:15:59 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[{date=2025-12-03, totalSales=0}, {date=2025-12-04, totalSales=0}]]
2025-12-04 11:15:59 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:15:59 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/reports/product-wise?startDate=2025-11-27T11%3A15%3A58.990&endDate=2025-12-04T11%3A15%3A58.990
2025-12-04 11:15:59 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/reports/product-wise?startDate=2025-11-27T11%3A15%3A58.990&endDate=2025-12-04T11%3A15%3A58.990
2025-12-04 11:15:59 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:15:59 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/reports/product-wise?startDate=2025-11-27T11%3A15%3A58.990&endDate=2025-12-04T11%3A15%3A58.990
2025-12-04 11:15:59 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/product-wise?startDate=2025-11-27T11%3A15%3A58.990&endDate=2025-12-04T11%3A15%3A58.990", parameters={masked}
2025-12-04 11:15:59 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.ReportController#getProductWiseSales(LocalDateTime, LocalDateTime)
2025-12-04 11:15:59 [http-nio-8881-exec-6] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:15:59 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        oi1_0.menu_item_id,
        oi1_0.item_name,
        sum(oi1_0.quantity),
        sum(oi1_0.total_price) 
    from
        public.order_items oi1_0 
    join
        public.orders o1_0 
            on o1_0.id=oi1_0.order_id 
    where
        o1_0.tenant_id=? 
        and o1_0.created_at between ? and ? 
    group by
        oi1_0.menu_item_id,
        oi1_0.item_name 
    order by
        sum(oi1_0.total_price) desc
2025-12-04 11:15:59 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:15:59 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[{menuItemId=8a5577b8-36d5-4a3d-9299-903f009a42b9, totalRevenue=210.00, totalQuantity=14, itemName=T (truncated)...]
2025-12-04 11:15:59 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:16:00 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/menu
2025-12-04 11:16:00 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:16:00 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/menu
2025-12-04 11:16:00 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/menu", parameters={}
2025-12-04 11:16:00 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.MenuController#getAllMenuItems()
2025-12-04 11:16:00 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:16:00 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        mi1_0.id,
        mi1_0.category_id,
        mi1_0.created_at,
        mi1_0.description,
        mi1_0.device_id,
        mi1_0.image_path,
        mi1_0.is_available,
        mi1_0.is_deleted,
        mi1_0.is_veg,
        mi1_0.name,
        mi1_0.preparation_time,
        mi1_0.price,
        mi1_0.synced_at,
        mi1_0.tenant_id,
        mi1_0.updated_at,
        mi1_0.version 
    from
        public.menu_items mi1_0 
    where
        mi1_0.tenant_id=? 
        and mi1_0.is_deleted=?
2025-12-04 11:16:00 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:16:00 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[MenuItemDto(id=8a5577b8-36d5-4a3d-9299-903f009a42b9, categoryId=6ed45abe-f8f6-4966-8126-a3f0d0bd0aa (truncated)...]
2025-12-04 11:16:00 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:16:00 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/categories?activeOnly=true
2025-12-04 11:16:00 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:16:00 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/categories?activeOnly=true
2025-12-04 11:16:00 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/categories?activeOnly=true", parameters={masked}
2025-12-04 11:16:00 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.CategoryController#getAllCategories(UserDetails, Boolean)
2025-12-04 11:16:00 [http-nio-8881-exec-5] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:16:00 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:16:00 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.display_order,
        c1_0.is_active,
        c1_0.name,
        c1_0.tenant_id,
        c1_0.updated_at 
    from
        public.categories c1_0 
    where
        c1_0.tenant_id=? 
        and c1_0.is_active=? 
    order by
        c1_0.display_order
2025-12-04 11:16:00 [http-nio-8881-exec-5] DEBUG c.r.billing.service.CategoryService - Found 2 categories for tenant cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:16:00 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:16:00 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[CategoryDto(id=6ed45abe-f8f6-4966-8126-a3f0d0bd0aaa, name=Main course, displayOrder=1), CategoryDto (truncated)...]
2025-12-04 11:16:00 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:16:00 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/orders
2025-12-04 11:16:00 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:16:00 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/orders
2025-12-04 11:16:00 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/orders", parameters={}
2025-12-04 11:16:00 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#getAllOrders()
2025-12-04 11:16:00 [http-nio-8881-exec-3] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:16:00 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 11:16:00 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:16:00 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:16:00 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:16:00 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:16:00 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:16:00 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:16:00 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:16:00 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:16:00 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:16:00 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:16:00 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[OrderDto(id=3d2cc165-482d-4290-b220-105d1ad18880, orderNumber=ORD1764763565538, tableId=null, table (truncated)...]
2025-12-04 11:16:00 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:16:01 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/active-orders
2025-12-04 11:16:01 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/pending-payments
2025-12-04 11:16:01 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/today-sales
2025-12-04 11:16:01 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/tables-occupied
2025-12-04 11:16:01 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/stats
2025-12-04 11:16:01 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:16:01 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:16:01 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:16:01 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:16:01 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:16:01 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/stats
2025-12-04 11:16:01 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/today-sales
2025-12-04 11:16:01 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/active-orders
2025-12-04 11:16:01 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/stats", parameters={}
2025-12-04 11:16:01 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/active-orders", parameters={}
2025-12-04 11:16:01 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getDashboardStats()
2025-12-04 11:16:01 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/today-sales", parameters={}
2025-12-04 11:16:01 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getActiveOrders()
2025-12-04 11:16:01 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTodaySales()
2025-12-04 11:16:01 [http-nio-8881-exec-1] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:16:01 [http-nio-8881-exec-7] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:16:01 [http-nio-8881-exec-8] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:16:01 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/tables-occupied
2025-12-04 11:16:01 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/tables-occupied", parameters={}
2025-12-04 11:16:01 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTablesOccupied()
2025-12-04 11:16:01 [http-nio-8881-exec-10] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:16:01 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/pending-payments
2025-12-04 11:16:01 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/pending-payments", parameters={}
2025-12-04 11:16:01 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getPendingPayments()
2025-12-04 11:16:01 [http-nio-8881-exec-9] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:16:01 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 11:16:01 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 11:16:01 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 11:16:01 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 11:16:01 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 11:16:01 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:16:01 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 11:16:01 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:16:01 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 11:16:01 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:16:01 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 11:16:01 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:16:01 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 11:16:01 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 11:16:01 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:16:01 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:16:01 [http-nio-8881-exec-7] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session
	at org.hibernate.collection.spi.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:636)
	at org.hibernate.collection.spi.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:219)
	at org.hibernate.collection.spi.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:615)
	at org.hibernate.collection.spi.AbstractPersistentCollection.read(AbstractPersistentCollection.java:138)
	at org.hibernate.collection.spi.PersistentBag.iterator(PersistentBag.java:369)
	at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1842)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.reduce(ReferencePipeline.java:657)
	at com.restaurant.billing.service.DashboardService.getTodaySales(DashboardService.java:80)
	at com.restaurant.billing.controller.DashboardController.getTodaySales(DashboardController.java:24)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 11:16:01 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:16:01 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T11:16:01.298252897, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 11:16:01 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 11:16:01 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session]
2025-12-04 11:16:01 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 11:16:01 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 11:16:01 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:16:01 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{pendingPayments=0, activeOrders=0, todaySales=0, tablesOccupied=0}]
2025-12-04 11:16:01 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:16:01 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/orders
2025-12-04 11:16:01 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:16:01 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/orders
2025-12-04 11:16:01 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/orders", parameters={}
2025-12-04 11:16:01 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#getAllOrders()
2025-12-04 11:16:01 [http-nio-8881-exec-2] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:16:01 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 11:16:01 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:16:01 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:16:01 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:16:01 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:16:01 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:16:01 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:16:01 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:16:01 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:16:01 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:16:01 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:16:01 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[OrderDto(id=3d2cc165-482d-4290-b220-105d1ad18880, orderNumber=ORD1764763565538, tableId=null, table (truncated)...]
2025-12-04 11:16:01 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:16:04 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/menu
2025-12-04 11:16:04 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:16:04 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/menu
2025-12-04 11:16:04 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/menu", parameters={}
2025-12-04 11:16:04 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.MenuController#getAllMenuItems()
2025-12-04 11:16:04 [http-nio-8881-exec-6] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:16:04 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        mi1_0.id,
        mi1_0.category_id,
        mi1_0.created_at,
        mi1_0.description,
        mi1_0.device_id,
        mi1_0.image_path,
        mi1_0.is_available,
        mi1_0.is_deleted,
        mi1_0.is_veg,
        mi1_0.name,
        mi1_0.preparation_time,
        mi1_0.price,
        mi1_0.synced_at,
        mi1_0.tenant_id,
        mi1_0.updated_at,
        mi1_0.version 
    from
        public.menu_items mi1_0 
    where
        mi1_0.tenant_id=? 
        and mi1_0.is_deleted=?
2025-12-04 11:16:04 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:16:04 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[MenuItemDto(id=8a5577b8-36d5-4a3d-9299-903f009a42b9, categoryId=6ed45abe-f8f6-4966-8126-a3f0d0bd0aa (truncated)...]
2025-12-04 11:16:04 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:16:04 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/categories?activeOnly=true
2025-12-04 11:16:04 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:16:04 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/categories?activeOnly=true
2025-12-04 11:16:04 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/categories?activeOnly=true", parameters={masked}
2025-12-04 11:16:04 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.CategoryController#getAllCategories(UserDetails, Boolean)
2025-12-04 11:16:04 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:16:04 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:16:04 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.display_order,
        c1_0.is_active,
        c1_0.name,
        c1_0.tenant_id,
        c1_0.updated_at 
    from
        public.categories c1_0 
    where
        c1_0.tenant_id=? 
        and c1_0.is_active=? 
    order by
        c1_0.display_order
2025-12-04 11:16:04 [http-nio-8881-exec-4] DEBUG c.r.billing.service.CategoryService - Found 2 categories for tenant cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:16:04 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:16:04 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[CategoryDto(id=6ed45abe-f8f6-4966-8126-a3f0d0bd0aaa, name=Main course, displayOrder=1), CategoryDto (truncated)...]
2025-12-04 11:16:04 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:16:31 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/orders
2025-12-04 11:16:31 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:16:31 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/orders
2025-12-04 11:16:31 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/orders", parameters={}
2025-12-04 11:16:31 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#createOrder(CreateOrderRequest)
2025-12-04 11:16:31 [http-nio-8881-exec-5] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:16:31 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [CreateOrderRequest(tableId=null, customerName=null, customerPhone=null, orderType=DINE_IN, items=[Or (truncated)...]
2025-12-04 11:16:31 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 11:16:31 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        mi1_0.id,
        mi1_0.category_id,
        mi1_0.created_at,
        mi1_0.description,
        mi1_0.device_id,
        mi1_0.image_path,
        mi1_0.is_available,
        mi1_0.is_deleted,
        mi1_0.is_veg,
        mi1_0.name,
        mi1_0.preparation_time,
        mi1_0.price,
        mi1_0.synced_at,
        mi1_0.tenant_id,
        mi1_0.updated_at,
        mi1_0.version 
    from
        public.menu_items mi1_0 
    where
        mi1_0.id=?
2025-12-04 11:16:31 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.order_id=?
2025-12-04 11:16:31 [http-nio-8881-exec-5] INFO  c.r.billing.service.OrderService - Bill generated for order: 40a130cd-9661-4d05-98a2-11bda09e5976
2025-12-04 11:16:31 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    insert 
    into
        public.orders
        (created_at, created_by, customer_name, customer_phone, device_id, discount_amount, is_deleted, notes, order_number, order_status, order_type, service_charge, subtotal, synced_at, table_id, tax_amount, tenant_id, total_amount, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-04 11:16:31 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    insert 
    into
        public.order_items
        (created_at, item_name, menu_item_id, order_id, quantity, special_instructions, status, total_price, unit_price, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-04 11:16:31 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    insert 
    into
        public.bills
        (bill_number, change_amount, created_at, discount_amount, generated_by, invoice_path, order_id, paid_amount, payment_method, payment_status, service_charge, subtotal, tax_amount, tenant_id, total_amount, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-04 11:16:31 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:16:31 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [OrderDto(id=40a130cd-9661-4d05-98a2-11bda09e5976, orderNumber=ORD1764827191024, tableId=null, tableN (truncated)...]
2025-12-04 11:16:31 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-12-04 11:16:31 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/sync
2025-12-04 11:16:31 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/sync
2025-12-04 11:16:31 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:16:31 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/sync
2025-12-04 11:16:31 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/sync", parameters={}
2025-12-04 11:16:31 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.SyncController#performSync(SyncRequest)
2025-12-04 11:16:31 [http-nio-8881-exec-10] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:16:31 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [SyncRequest(deviceId=d23c59b8-4056-4cc6-b9bc-6ac5018951cf, lastSyncTime=1970-01-01T05:30, data=[Sync (truncated)...]
2025-12-04 11:16:31 [http-nio-8881-exec-10] ERROR c.r.billing.service.SyncService - Sync error for item: 40a130cd-9661-4d05-98a2-11bda09e5976
java.lang.IllegalArgumentException: Unknown entity type: order
	at com.restaurant.billing.service.SyncService.processSyncItem(SyncService.java:107)
	at com.restaurant.billing.service.SyncService.performSync(SyncService.java:34)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at com.restaurant.billing.service.SyncService$$SpringCGLIB$$0.performSync(<generated>)
	at com.restaurant.billing.controller.SyncController.performSync(SyncController.java:23)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 11:16:31 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 11:16:31 [http-nio-8881-exec-10] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
java.lang.IllegalArgumentException: No enum constant com.restaurant.billing.entity.SyncLog.SyncOperation.create
	at java.base/java.lang.Enum.valueOf(Enum.java:273)
	at com.restaurant.billing.entity.SyncLog$SyncOperation.valueOf(SyncLog.java:65)
	at com.restaurant.billing.service.SyncService.logSync(SyncService.java:158)
	at com.restaurant.billing.service.SyncService.performSync(SyncService.java:51)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at com.restaurant.billing.service.SyncService$$SpringCGLIB$$0.performSync(<generated>)
	at com.restaurant.billing.controller.SyncController.performSync(SyncController.java:23)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 11:16:31 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:16:31 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T11:16:31.085135762, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 11:16:31 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [java.lang.IllegalArgumentException: No enum constant com.restaurant.billing.entity.SyncLog.SyncOperation.create]
2025-12-04 11:16:31 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 11:16:56 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 11:16:56 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:16:56 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 11:16:56 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 11:16:56 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#getRestaurantProfile()
2025-12-04 11:16:56 [http-nio-8881-exec-8] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:16:56 [http-nio-8881-exec-8] INFO  c.r.b.service.RestaurantService - Fetching restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:16:56 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 11:16:56 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:16:56 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 11:16:56 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:17:44 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 11:17:44 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:17:44 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 11:17:44 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 11:17:44 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#getRestaurantProfile()
2025-12-04 11:17:44 [http-nio-8881-exec-1] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:17:44 [http-nio-8881-exec-1] INFO  c.r.b.service.RestaurantService - Fetching restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:17:44 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 11:17:44 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:17:44 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 11:17:44 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:17:53 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/today-sales
2025-12-04 11:17:53 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/active-orders
2025-12-04 11:17:53 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/pending-payments
2025-12-04 11:17:53 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/tables-occupied
2025-12-04 11:17:53 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/stats
2025-12-04 11:17:53 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:17:53 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:17:53 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:17:53 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:17:53 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:17:53 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/today-sales
2025-12-04 11:17:53 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/stats
2025-12-04 11:17:53 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/today-sales", parameters={}
2025-12-04 11:17:53 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/stats", parameters={}
2025-12-04 11:17:53 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/pending-payments
2025-12-04 11:17:53 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/tables-occupied
2025-12-04 11:17:53 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/active-orders
2025-12-04 11:17:53 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/pending-payments", parameters={}
2025-12-04 11:17:53 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTodaySales()
2025-12-04 11:17:53 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getDashboardStats()
2025-12-04 11:17:53 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/tables-occupied", parameters={}
2025-12-04 11:17:53 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/active-orders", parameters={}
2025-12-04 11:17:53 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getPendingPayments()
2025-12-04 11:17:53 [http-nio-8881-exec-2] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:17:53 [http-nio-8881-exec-3] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:17:53 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTablesOccupied()
2025-12-04 11:17:53 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getActiveOrders()
2025-12-04 11:17:53 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:17:53 [http-nio-8881-exec-5] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:17:53 [http-nio-8881-exec-6] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:17:53 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 11:17:53 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 11:17:53 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 11:17:53 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 11:17:53 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 11:17:53 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:17:53 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 11:17:53 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:17:53 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 11:17:53 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:17:53 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 11:17:53 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 11:17:53 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:17:53 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 11:17:53 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:17:53 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:17:53 [http-nio-8881-exec-2] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session
	at org.hibernate.collection.spi.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:636)
	at org.hibernate.collection.spi.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:219)
	at org.hibernate.collection.spi.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:615)
	at org.hibernate.collection.spi.AbstractPersistentCollection.read(AbstractPersistentCollection.java:138)
	at org.hibernate.collection.spi.PersistentBag.iterator(PersistentBag.java:369)
	at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1842)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.reduce(ReferencePipeline.java:657)
	at com.restaurant.billing.service.DashboardService.getTodaySales(DashboardService.java:80)
	at com.restaurant.billing.controller.DashboardController.getTodaySales(DashboardController.java:24)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 11:17:53 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:17:53 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T11:17:53.313092222, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 11:17:53 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session]
2025-12-04 11:17:53 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 11:17:53 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 11:17:53 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 11:17:53 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:17:53 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{pendingPayments=0, activeOrders=0, todaySales=0, tablesOccupied=0}]
2025-12-04 11:17:53 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:17:53 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/orders
2025-12-04 11:17:53 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:17:53 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/orders
2025-12-04 11:17:53 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/orders", parameters={}
2025-12-04 11:17:53 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#getAllOrders()
2025-12-04 11:17:53 [http-nio-8881-exec-10] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:17:53 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 11:17:53 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:17:53 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:17:53 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:17:53 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:17:53 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:17:53 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:17:53 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:17:53 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:17:53 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:17:53 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:17:53 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:17:53 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[OrderDto(id=3d2cc165-482d-4290-b220-105d1ad18880, orderNumber=ORD1764763565538, tableId=null, table (truncated)...]
2025-12-04 11:17:53 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:17:59 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/orders
2025-12-04 11:17:59 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:17:59 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/orders
2025-12-04 11:17:59 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/orders", parameters={}
2025-12-04 11:17:59 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#getAllOrders()
2025-12-04 11:17:59 [http-nio-8881-exec-8] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:17:59 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 11:17:59 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:17:59 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:17:59 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:17:59 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:17:59 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:17:59 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:17:59 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:17:59 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:17:59 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:17:59 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:17:59 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:17:59 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[OrderDto(id=3d2cc165-482d-4290-b220-105d1ad18880, orderNumber=ORD1764763565538, tableId=null, table (truncated)...]
2025-12-04 11:17:59 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:18:01 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/menu
2025-12-04 11:18:01 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:18:01 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/menu
2025-12-04 11:18:01 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/menu", parameters={}
2025-12-04 11:18:01 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.MenuController#getAllMenuItems()
2025-12-04 11:18:01 [http-nio-8881-exec-7] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:18:01 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        mi1_0.id,
        mi1_0.category_id,
        mi1_0.created_at,
        mi1_0.description,
        mi1_0.device_id,
        mi1_0.image_path,
        mi1_0.is_available,
        mi1_0.is_deleted,
        mi1_0.is_veg,
        mi1_0.name,
        mi1_0.preparation_time,
        mi1_0.price,
        mi1_0.synced_at,
        mi1_0.tenant_id,
        mi1_0.updated_at,
        mi1_0.version 
    from
        public.menu_items mi1_0 
    where
        mi1_0.tenant_id=? 
        and mi1_0.is_deleted=?
2025-12-04 11:18:01 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:18:01 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[MenuItemDto(id=8a5577b8-36d5-4a3d-9299-903f009a42b9, categoryId=6ed45abe-f8f6-4966-8126-a3f0d0bd0aa (truncated)...]
2025-12-04 11:18:01 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:18:01 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/categories?activeOnly=true
2025-12-04 11:18:01 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:18:01 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/categories?activeOnly=true
2025-12-04 11:18:01 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/categories?activeOnly=true", parameters={masked}
2025-12-04 11:18:01 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.CategoryController#getAllCategories(UserDetails, Boolean)
2025-12-04 11:18:01 [http-nio-8881-exec-9] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:18:01 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:18:01 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.display_order,
        c1_0.is_active,
        c1_0.name,
        c1_0.tenant_id,
        c1_0.updated_at 
    from
        public.categories c1_0 
    where
        c1_0.tenant_id=? 
        and c1_0.is_active=? 
    order by
        c1_0.display_order
2025-12-04 11:18:01 [http-nio-8881-exec-9] DEBUG c.r.billing.service.CategoryService - Found 2 categories for tenant cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:18:01 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:18:01 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[CategoryDto(id=6ed45abe-f8f6-4966-8126-a3f0d0bd0aaa, name=Main course, displayOrder=1), CategoryDto (truncated)...]
2025-12-04 11:18:01 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:18:03 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/reports/day-wise?startDate=2025-11-27T11%3A18%3A03.090&endDate=2025-12-04T11%3A18%3A03.090
2025-12-04 11:18:03 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/reports/day-wise?startDate=2025-11-27T11%3A18%3A03.090&endDate=2025-12-04T11%3A18%3A03.090
2025-12-04 11:18:03 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:18:03 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/reports/day-wise?startDate=2025-11-27T11%3A18%3A03.090&endDate=2025-12-04T11%3A18%3A03.090
2025-12-04 11:18:03 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/day-wise?startDate=2025-11-27T11%3A18%3A03.090&endDate=2025-12-04T11%3A18%3A03.090", parameters={masked}
2025-12-04 11:18:03 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.ReportController#getDayWiseSales(LocalDateTime, LocalDateTime)
2025-12-04 11:18:03 [http-nio-8881-exec-5] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:18:03 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 11:18:03 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:18:03 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[{date=2025-12-03, totalSales=0}, {date=2025-12-04, totalSales=0}]]
2025-12-04 11:18:03 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:18:03 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/reports/product-wise?startDate=2025-11-27T11%3A18%3A03.090&endDate=2025-12-04T11%3A18%3A03.090
2025-12-04 11:18:03 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/reports/product-wise?startDate=2025-11-27T11%3A18%3A03.090&endDate=2025-12-04T11%3A18%3A03.090
2025-12-04 11:18:03 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:18:03 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/reports/product-wise?startDate=2025-11-27T11%3A18%3A03.090&endDate=2025-12-04T11%3A18%3A03.090
2025-12-04 11:18:03 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/product-wise?startDate=2025-11-27T11%3A18%3A03.090&endDate=2025-12-04T11%3A18%3A03.090", parameters={masked}
2025-12-04 11:18:03 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.ReportController#getProductWiseSales(LocalDateTime, LocalDateTime)
2025-12-04 11:18:03 [http-nio-8881-exec-6] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:18:03 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        oi1_0.menu_item_id,
        oi1_0.item_name,
        sum(oi1_0.quantity),
        sum(oi1_0.total_price) 
    from
        public.order_items oi1_0 
    join
        public.orders o1_0 
            on o1_0.id=oi1_0.order_id 
    where
        o1_0.tenant_id=? 
        and o1_0.created_at between ? and ? 
    group by
        oi1_0.menu_item_id,
        oi1_0.item_name 
    order by
        sum(oi1_0.total_price) desc
2025-12-04 11:18:03 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:18:03 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[{menuItemId=8a5577b8-36d5-4a3d-9299-903f009a42b9, totalRevenue=225.00, totalQuantity=15, itemName=T (truncated)...]
2025-12-04 11:18:03 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:18:04 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/menu
2025-12-04 11:18:04 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:18:04 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/menu
2025-12-04 11:18:04 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/menu", parameters={}
2025-12-04 11:18:04 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.MenuController#getAllMenuItems()
2025-12-04 11:18:04 [http-nio-8881-exec-2] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:18:04 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        mi1_0.id,
        mi1_0.category_id,
        mi1_0.created_at,
        mi1_0.description,
        mi1_0.device_id,
        mi1_0.image_path,
        mi1_0.is_available,
        mi1_0.is_deleted,
        mi1_0.is_veg,
        mi1_0.name,
        mi1_0.preparation_time,
        mi1_0.price,
        mi1_0.synced_at,
        mi1_0.tenant_id,
        mi1_0.updated_at,
        mi1_0.version 
    from
        public.menu_items mi1_0 
    where
        mi1_0.tenant_id=? 
        and mi1_0.is_deleted=?
2025-12-04 11:18:04 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:18:04 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[MenuItemDto(id=8a5577b8-36d5-4a3d-9299-903f009a42b9, categoryId=6ed45abe-f8f6-4966-8126-a3f0d0bd0aa (truncated)...]
2025-12-04 11:18:04 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:18:04 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/categories?activeOnly=true
2025-12-04 11:18:04 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:18:04 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/categories?activeOnly=true
2025-12-04 11:18:04 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/categories?activeOnly=true", parameters={masked}
2025-12-04 11:18:04 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.CategoryController#getAllCategories(UserDetails, Boolean)
2025-12-04 11:18:04 [http-nio-8881-exec-3] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:18:04 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:18:04 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.display_order,
        c1_0.is_active,
        c1_0.name,
        c1_0.tenant_id,
        c1_0.updated_at 
    from
        public.categories c1_0 
    where
        c1_0.tenant_id=? 
        and c1_0.is_active=? 
    order by
        c1_0.display_order
2025-12-04 11:18:04 [http-nio-8881-exec-3] DEBUG c.r.billing.service.CategoryService - Found 2 categories for tenant cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:18:04 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:18:04 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[CategoryDto(id=6ed45abe-f8f6-4966-8126-a3f0d0bd0aaa, name=Main course, displayOrder=1), CategoryDto (truncated)...]
2025-12-04 11:18:04 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:18:39 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 11:18:39 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:18:39 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 11:18:39 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 11:18:39 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#getRestaurantProfile()
2025-12-04 11:18:39 [http-nio-8881-exec-10] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:18:39 [http-nio-8881-exec-10] INFO  c.r.b.service.RestaurantService - Fetching restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:18:39 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 11:18:39 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:18:39 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 11:18:39 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:29:18 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/auth/login
2025-12-04 11:29:18 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-12-04 11:29:18 [http-nio-8881-exec-4] ERROR c.r.billing.security.JwtUtil - Invalid JWT token: JWT expired at 2025-12-03T13:13:21Z. Current time: 2025-12-04T05:59:18Z, a difference of 60357095 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-12-04 11:29:18 [http-nio-8881-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-04 11:29:18 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-12-04 11:29:18 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-12-04 11:29:18 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.AuthController#login(LoginRequest)
2025-12-04 11:29:18 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(restaurantCode=REST14DAA490, username=Ganesh@gmail.com, password=Rest@1234)]
2025-12-04 11:29:18 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.restaurant_code=?
2025-12-04 11:29:18 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=? 
        and u1_0.tenant_id=?
2025-12-04 11:29:18 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    update
        public.users 
    set
        auth_provider=?,
        email=?,
        google_id=?,
        is_active=?,
        last_login=?,
        name=?,
        password_hash=?,
        phone=?,
        refresh_token=?,
        refresh_token_expiry=?,
        role=?,
        tenant_id=?,
        updated_at=? 
    where
        id=?
2025-12-04 11:29:18 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:29:18 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiT1dORVIiLCJ0ZW5hbnRJZCI6ImNjNzFkN2U0LWNmNj (truncated)...]
2025-12-04 11:29:18 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:29:18 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/today-sales
2025-12-04 11:29:18 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/active-orders
2025-12-04 11:29:18 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/pending-payments
2025-12-04 11:29:18 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/tables-occupied
2025-12-04 11:29:18 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/stats
2025-12-04 11:29:18 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/today-sales
2025-12-04 11:29:18 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/pending-payments
2025-12-04 11:29:18 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/active-orders
2025-12-04 11:29:18 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/tables-occupied
2025-12-04 11:29:18 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/stats
2025-12-04 11:29:18 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:29:18 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:29:18 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:29:18 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:29:18 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:29:18 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/stats
2025-12-04 11:29:18 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/today-sales
2025-12-04 11:29:18 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/active-orders
2025-12-04 11:29:18 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/tables-occupied
2025-12-04 11:29:18 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/pending-payments
2025-12-04 11:29:18 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/today-sales", parameters={}
2025-12-04 11:29:18 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/tables-occupied", parameters={}
2025-12-04 11:29:18 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/active-orders", parameters={}
2025-12-04 11:29:18 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/stats", parameters={}
2025-12-04 11:29:18 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/pending-payments", parameters={}
2025-12-04 11:29:18 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getActiveOrders()
2025-12-04 11:29:18 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTodaySales()
2025-12-04 11:29:18 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getPendingPayments()
2025-12-04 11:29:18 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTablesOccupied()
2025-12-04 11:29:18 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getDashboardStats()
2025-12-04 11:29:18 [http-nio-8881-exec-9] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:29:18 [http-nio-8881-exec-1] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:29:18 [http-nio-8881-exec-5] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:29:18 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:29:18 [http-nio-8881-exec-7] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:29:18 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 11:29:18 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 11:29:18 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 11:29:18 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 11:29:18 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 11:29:18 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:29:18 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 11:29:18 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:29:18 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:29:18 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 11:29:18 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:29:18 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:29:18 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 11:29:18 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 11:29:18 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 11:29:18 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:29:18 [http-nio-8881-exec-9] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session
	at org.hibernate.collection.spi.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:636)
	at org.hibernate.collection.spi.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:219)
	at org.hibernate.collection.spi.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:615)
	at org.hibernate.collection.spi.AbstractPersistentCollection.read(AbstractPersistentCollection.java:138)
	at org.hibernate.collection.spi.PersistentBag.iterator(PersistentBag.java:369)
	at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1842)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.reduce(ReferencePipeline.java:657)
	at com.restaurant.billing.service.DashboardService.getTodaySales(DashboardService.java:80)
	at com.restaurant.billing.controller.DashboardController.getTodaySales(DashboardController.java:24)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 11:29:18 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:29:18 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T11:29:18.520261821, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 11:29:18 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session]
2025-12-04 11:29:18 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 11:29:18 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 11:29:18 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 11:29:18 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:29:18 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{pendingPayments=0, activeOrders=0, todaySales=0, tablesOccupied=0}]
2025-12-04 11:29:18 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:29:18 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/orders
2025-12-04 11:29:18 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/orders
2025-12-04 11:29:18 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:29:18 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/orders
2025-12-04 11:29:18 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/orders", parameters={}
2025-12-04 11:29:18 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#getAllOrders()
2025-12-04 11:29:18 [http-nio-8881-exec-2] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:29:18 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 11:29:18 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:29:18 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:29:18 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:29:18 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:29:18 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:29:18 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:29:18 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:29:18 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:29:18 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:29:18 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:29:18 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:29:18 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[OrderDto(id=3d2cc165-482d-4290-b220-105d1ad18880, orderNumber=ORD1764763565538, tableId=null, table (truncated)...]
2025-12-04 11:29:18 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:29:22 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/restaurant/profile
2025-12-04 11:29:22 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 11:29:22 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:29:22 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 11:29:22 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 11:29:22 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#getRestaurantProfile()
2025-12-04 11:29:22 [http-nio-8881-exec-10] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:29:22 [http-nio-8881-exec-10] INFO  c.r.b.service.RestaurantService - Fetching restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:29:22 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 11:29:22 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:29:22 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 11:29:22 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:30:38 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-12-04 11:30:38 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:30:38 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-12-04 11:30:38 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-12-04 11:30:38 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.AuthController#login(LoginRequest)
2025-12-04 11:30:38 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(restaurantCode=REST14DAA490, username=Ganesh@gmail.com, password=Rest@1234)]
2025-12-04 11:30:38 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.restaurant_code=?
2025-12-04 11:30:38 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=? 
        and u1_0.tenant_id=?
2025-12-04 11:30:38 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    update
        public.users 
    set
        auth_provider=?,
        email=?,
        google_id=?,
        is_active=?,
        last_login=?,
        name=?,
        password_hash=?,
        phone=?,
        refresh_token=?,
        refresh_token_expiry=?,
        role=?,
        tenant_id=?,
        updated_at=? 
    where
        id=?
2025-12-04 11:30:38 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:30:38 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiT1dORVIiLCJ0ZW5hbnRJZCI6ImNjNzFkN2U0LWNmNj (truncated)...]
2025-12-04 11:30:38 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:30:38 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/today-sales
2025-12-04 11:30:38 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/active-orders
2025-12-04 11:30:38 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/pending-payments
2025-12-04 11:30:38 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/tables-occupied
2025-12-04 11:30:38 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/stats
2025-12-04 11:30:38 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:30:38 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:30:38 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:30:38 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:30:38 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:30:38 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/today-sales
2025-12-04 11:30:38 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/stats
2025-12-04 11:30:38 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/tables-occupied
2025-12-04 11:30:38 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/stats", parameters={}
2025-12-04 11:30:38 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/today-sales", parameters={}
2025-12-04 11:30:38 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/tables-occupied", parameters={}
2025-12-04 11:30:38 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/pending-payments
2025-12-04 11:30:38 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/active-orders
2025-12-04 11:30:38 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTodaySales()
2025-12-04 11:30:38 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/active-orders", parameters={}
2025-12-04 11:30:38 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/pending-payments", parameters={}
2025-12-04 11:30:38 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTablesOccupied()
2025-12-04 11:30:38 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getDashboardStats()
2025-12-04 11:30:38 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getActiveOrders()
2025-12-04 11:30:38 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:30:38 [http-nio-8881-exec-10] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:30:38 [http-nio-8881-exec-3] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:30:38 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getPendingPayments()
2025-12-04 11:30:38 [http-nio-8881-exec-6] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:30:38 [http-nio-8881-exec-2] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:30:38 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 11:30:38 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 11:30:38 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 11:30:38 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 11:30:38 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 11:30:38 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:30:38 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:30:38 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 11:30:38 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 11:30:38 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 11:30:38 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:30:38 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 11:30:38 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 11:30:38 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:30:38 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:30:38 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:30:38 [http-nio-8881-exec-4] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session
	at org.hibernate.collection.spi.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:636)
	at org.hibernate.collection.spi.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:219)
	at org.hibernate.collection.spi.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:615)
	at org.hibernate.collection.spi.AbstractPersistentCollection.read(AbstractPersistentCollection.java:138)
	at org.hibernate.collection.spi.PersistentBag.iterator(PersistentBag.java:369)
	at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1842)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.reduce(ReferencePipeline.java:657)
	at com.restaurant.billing.service.DashboardService.getTodaySales(DashboardService.java:80)
	at com.restaurant.billing.controller.DashboardController.getTodaySales(DashboardController.java:24)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 11:30:38 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:30:38 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T11:30:38.560293337, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 11:30:38 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 11:30:38 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session]
2025-12-04 11:30:38 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 11:30:38 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 11:30:38 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:30:38 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{pendingPayments=0, activeOrders=0, todaySales=0, tablesOccupied=0}]
2025-12-04 11:30:38 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:30:38 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/orders
2025-12-04 11:30:38 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:30:38 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/orders
2025-12-04 11:30:38 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/orders", parameters={}
2025-12-04 11:30:38 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#getAllOrders()
2025-12-04 11:30:38 [http-nio-8881-exec-8] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:30:38 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 11:30:38 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:30:38 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:30:38 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:30:38 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:30:38 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:30:38 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:30:38 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:30:38 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:30:38 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:30:38 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:30:38 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:30:38 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[OrderDto(id=3d2cc165-482d-4290-b220-105d1ad18880, orderNumber=ORD1764763565538, tableId=null, table (truncated)...]
2025-12-04 11:30:38 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:31:05 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 11:31:05 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:31:05 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 11:31:05 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 11:31:05 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#getRestaurantProfile()
2025-12-04 11:31:05 [http-nio-8881-exec-7] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:31:05 [http-nio-8881-exec-7] INFO  c.r.b.service.RestaurantService - Fetching restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:31:05 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 11:31:05 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:31:05 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 11:31:05 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:32:06 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 11:32:06 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:32:06 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 11:32:06 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 11:32:06 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#getRestaurantProfile()
2025-12-04 11:32:06 [http-nio-8881-exec-6] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:32:06 [http-nio-8881-exec-6] INFO  c.r.b.service.RestaurantService - Fetching restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:32:06 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 11:32:06 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:32:06 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 11:32:06 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:32:22 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/orders
2025-12-04 11:32:22 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:32:22 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/orders
2025-12-04 11:32:22 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/orders", parameters={}
2025-12-04 11:32:22 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#getAllOrders()
2025-12-04 11:32:22 [http-nio-8881-exec-3] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:32:22 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 11:32:22 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:32:22 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:32:22 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:32:22 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:32:22 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:32:22 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:32:22 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:32:22 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:32:22 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:32:22 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:32:22 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:32:22 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[OrderDto(id=3d2cc165-482d-4290-b220-105d1ad18880, orderNumber=ORD1764763565538, tableId=null, table (truncated)...]
2025-12-04 11:32:22 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:32:23 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/today-sales
2025-12-04 11:32:23 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/pending-payments
2025-12-04 11:32:23 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/tables-occupied
2025-12-04 11:32:23 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/active-orders
2025-12-04 11:32:23 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/stats
2025-12-04 11:32:23 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:32:23 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:32:23 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:32:23 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:32:23 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:32:23 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/tables-occupied
2025-12-04 11:32:23 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/active-orders
2025-12-04 11:32:23 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/pending-payments
2025-12-04 11:32:23 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/today-sales
2025-12-04 11:32:23 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/active-orders", parameters={}
2025-12-04 11:32:23 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/pending-payments", parameters={}
2025-12-04 11:32:23 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/today-sales", parameters={}
2025-12-04 11:32:23 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/tables-occupied", parameters={}
2025-12-04 11:32:23 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getActiveOrders()
2025-12-04 11:32:23 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTodaySales()
2025-12-04 11:32:23 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTablesOccupied()
2025-12-04 11:32:23 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getPendingPayments()
2025-12-04 11:32:23 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:32:23 [http-nio-8881-exec-8] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:32:23 [http-nio-8881-exec-7] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:32:23 [http-nio-8881-exec-10] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:32:23 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/stats
2025-12-04 11:32:23 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/stats", parameters={}
2025-12-04 11:32:23 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getDashboardStats()
2025-12-04 11:32:23 [http-nio-8881-exec-5] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:32:23 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 11:32:23 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 11:32:23 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 11:32:23 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 11:32:23 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 11:32:23 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:32:23 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 11:32:23 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:32:23 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 11:32:23 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:32:23 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 11:32:23 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 11:32:23 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:32:23 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:32:23 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:32:23 [http-nio-8881-exec-4] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session
	at org.hibernate.collection.spi.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:636)
	at org.hibernate.collection.spi.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:219)
	at org.hibernate.collection.spi.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:615)
	at org.hibernate.collection.spi.AbstractPersistentCollection.read(AbstractPersistentCollection.java:138)
	at org.hibernate.collection.spi.PersistentBag.iterator(PersistentBag.java:369)
	at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1842)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.reduce(ReferencePipeline.java:657)
	at com.restaurant.billing.service.DashboardService.getTodaySales(DashboardService.java:80)
	at com.restaurant.billing.controller.DashboardController.getTodaySales(DashboardController.java:24)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 11:32:23 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:32:23 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T11:32:23.226858453, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 11:32:23 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 11:32:23 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session]
2025-12-04 11:32:23 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 11:32:23 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 11:32:23 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 11:32:23 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:32:23 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{pendingPayments=0, activeOrders=0, todaySales=0, tablesOccupied=0}]
2025-12-04 11:32:23 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:32:23 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/orders
2025-12-04 11:32:23 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:32:23 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/orders
2025-12-04 11:32:23 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/orders", parameters={}
2025-12-04 11:32:23 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#getAllOrders()
2025-12-04 11:32:23 [http-nio-8881-exec-1] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:32:23 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 11:32:23 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:32:23 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:32:23 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:32:23 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:32:23 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:32:23 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:32:23 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:32:23 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:32:23 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:32:23 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:32:23 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:32:23 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[OrderDto(id=3d2cc165-482d-4290-b220-105d1ad18880, orderNumber=ORD1764763565538, tableId=null, table (truncated)...]
2025-12-04 11:32:23 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:32:26 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 11:32:26 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:32:26 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 11:32:26 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 11:32:26 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#getRestaurantProfile()
2025-12-04 11:32:26 [http-nio-8881-exec-9] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:32:26 [http-nio-8881-exec-9] INFO  c.r.b.service.RestaurantService - Fetching restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:32:26 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 11:32:26 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:32:26 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 11:32:26 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:32:36 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 11:32:36 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:32:36 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 11:32:36 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 11:32:36 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#getRestaurantProfile()
2025-12-04 11:32:36 [http-nio-8881-exec-2] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:32:36 [http-nio-8881-exec-2] INFO  c.r.b.service.RestaurantService - Fetching restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:32:36 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 11:32:36 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:32:36 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 11:32:36 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:32:44 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/orders
2025-12-04 11:32:44 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:32:44 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/orders
2025-12-04 11:32:44 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/orders", parameters={}
2025-12-04 11:32:44 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#getAllOrders()
2025-12-04 11:32:44 [http-nio-8881-exec-6] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:32:44 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 11:32:44 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:32:44 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:32:44 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:32:44 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:32:44 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:32:44 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:32:44 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:32:44 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:32:44 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:32:44 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:32:44 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:32:44 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[OrderDto(id=3d2cc165-482d-4290-b220-105d1ad18880, orderNumber=ORD1764763565538, tableId=null, table (truncated)...]
2025-12-04 11:32:44 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:32:45 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/active-orders
2025-12-04 11:32:45 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/today-sales
2025-12-04 11:32:45 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/pending-payments
2025-12-04 11:32:45 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/tables-occupied
2025-12-04 11:32:45 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/stats
2025-12-04 11:32:45 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:32:45 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:32:45 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:32:45 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:32:45 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:32:45 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/today-sales
2025-12-04 11:32:45 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/active-orders
2025-12-04 11:32:45 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/tables-occupied
2025-12-04 11:32:45 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/stats
2025-12-04 11:32:45 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/pending-payments
2025-12-04 11:32:45 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/tables-occupied", parameters={}
2025-12-04 11:32:45 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/today-sales", parameters={}
2025-12-04 11:32:45 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/active-orders", parameters={}
2025-12-04 11:32:45 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/pending-payments", parameters={}
2025-12-04 11:32:45 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/stats", parameters={}
2025-12-04 11:32:45 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getActiveOrders()
2025-12-04 11:32:45 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTablesOccupied()
2025-12-04 11:32:45 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTodaySales()
2025-12-04 11:32:45 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getPendingPayments()
2025-12-04 11:32:45 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getDashboardStats()
2025-12-04 11:32:45 [http-nio-8881-exec-7] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:32:45 [http-nio-8881-exec-3] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:32:45 [http-nio-8881-exec-8] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:32:45 [http-nio-8881-exec-10] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:32:45 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:32:45 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 11:32:45 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 11:32:45 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 11:32:45 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 11:32:45 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 11:32:45 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:32:45 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 11:32:45 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:32:45 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 11:32:45 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:32:45 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 11:32:45 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 11:32:45 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:32:45 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:32:45 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:32:45 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 11:32:45 [http-nio-8881-exec-3] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session
	at org.hibernate.collection.spi.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:636)
	at org.hibernate.collection.spi.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:219)
	at org.hibernate.collection.spi.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:615)
	at org.hibernate.collection.spi.AbstractPersistentCollection.read(AbstractPersistentCollection.java:138)
	at org.hibernate.collection.spi.PersistentBag.iterator(PersistentBag.java:369)
	at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1842)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.reduce(ReferencePipeline.java:657)
	at com.restaurant.billing.service.DashboardService.getTodaySales(DashboardService.java:80)
	at com.restaurant.billing.controller.DashboardController.getTodaySales(DashboardController.java:24)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 11:32:45 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:32:45 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T11:32:45.874354157, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 11:32:45 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session]
2025-12-04 11:32:45 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 11:32:45 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 11:32:45 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 11:32:45 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:32:45 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{pendingPayments=0, activeOrders=0, todaySales=0, tablesOccupied=0}]
2025-12-04 11:32:45 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:32:45 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/orders
2025-12-04 11:32:45 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:32:45 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/orders
2025-12-04 11:32:45 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/orders", parameters={}
2025-12-04 11:32:45 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#getAllOrders()
2025-12-04 11:32:45 [http-nio-8881-exec-5] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:32:45 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 11:32:45 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:32:45 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:32:45 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:32:45 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:32:45 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:32:45 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:32:45 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:32:45 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:32:45 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:32:45 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:32:45 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:32:45 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[OrderDto(id=3d2cc165-482d-4290-b220-105d1ad18880, orderNumber=ORD1764763565538, tableId=null, table (truncated)...]
2025-12-04 11:32:45 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:32:51 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/menu
2025-12-04 11:32:51 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/menu
2025-12-04 11:32:51 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:32:51 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/menu
2025-12-04 11:32:51 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/menu", parameters={}
2025-12-04 11:32:51 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.MenuController#getAllMenuItems()
2025-12-04 11:32:51 [http-nio-8881-exec-9] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:32:51 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        mi1_0.id,
        mi1_0.category_id,
        mi1_0.created_at,
        mi1_0.description,
        mi1_0.device_id,
        mi1_0.image_path,
        mi1_0.is_available,
        mi1_0.is_deleted,
        mi1_0.is_veg,
        mi1_0.name,
        mi1_0.preparation_time,
        mi1_0.price,
        mi1_0.synced_at,
        mi1_0.tenant_id,
        mi1_0.updated_at,
        mi1_0.version 
    from
        public.menu_items mi1_0 
    where
        mi1_0.tenant_id=? 
        and mi1_0.is_deleted=?
2025-12-04 11:32:51 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:32:51 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[MenuItemDto(id=8a5577b8-36d5-4a3d-9299-903f009a42b9, categoryId=6ed45abe-f8f6-4966-8126-a3f0d0bd0aa (truncated)...]
2025-12-04 11:32:51 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:32:51 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/categories?activeOnly=true
2025-12-04 11:32:51 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/categories?activeOnly=true
2025-12-04 11:32:51 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:32:51 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/categories?activeOnly=true
2025-12-04 11:32:51 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/categories?activeOnly=true", parameters={masked}
2025-12-04 11:32:51 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.CategoryController#getAllCategories(UserDetails, Boolean)
2025-12-04 11:32:51 [http-nio-8881-exec-6] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:32:51 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:32:51 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.display_order,
        c1_0.is_active,
        c1_0.name,
        c1_0.tenant_id,
        c1_0.updated_at 
    from
        public.categories c1_0 
    where
        c1_0.tenant_id=? 
        and c1_0.is_active=? 
    order by
        c1_0.display_order
2025-12-04 11:32:51 [http-nio-8881-exec-6] DEBUG c.r.billing.service.CategoryService - Found 2 categories for tenant cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:32:51 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:32:51 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[CategoryDto(id=6ed45abe-f8f6-4966-8126-a3f0d0bd0aaa, name=Main course, displayOrder=1), CategoryDto (truncated)...]
2025-12-04 11:32:51 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:32:54 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/orders
2025-12-04 11:32:54 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:32:54 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/orders
2025-12-04 11:32:54 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/orders", parameters={}
2025-12-04 11:32:54 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#createOrder(CreateOrderRequest)
2025-12-04 11:32:54 [http-nio-8881-exec-10] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:32:54 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [CreateOrderRequest(tableId=null, customerName=null, customerPhone=null, orderType=DINE_IN, items=[Or (truncated)...]
2025-12-04 11:32:54 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 11:32:54 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        mi1_0.id,
        mi1_0.category_id,
        mi1_0.created_at,
        mi1_0.description,
        mi1_0.device_id,
        mi1_0.image_path,
        mi1_0.is_available,
        mi1_0.is_deleted,
        mi1_0.is_veg,
        mi1_0.name,
        mi1_0.preparation_time,
        mi1_0.price,
        mi1_0.synced_at,
        mi1_0.tenant_id,
        mi1_0.updated_at,
        mi1_0.version 
    from
        public.menu_items mi1_0 
    where
        mi1_0.id=?
2025-12-04 11:32:54 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.order_id=?
2025-12-04 11:32:54 [http-nio-8881-exec-10] INFO  c.r.billing.service.OrderService - Bill generated for order: d8d9041b-9302-4e6b-aca6-a1bdd40625aa
2025-12-04 11:32:54 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    insert 
    into
        public.orders
        (created_at, created_by, customer_name, customer_phone, device_id, discount_amount, is_deleted, notes, order_number, order_status, order_type, service_charge, subtotal, synced_at, table_id, tax_amount, tenant_id, total_amount, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-04 11:32:54 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    insert 
    into
        public.order_items
        (created_at, item_name, menu_item_id, order_id, quantity, special_instructions, status, total_price, unit_price, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-04 11:32:54 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    insert 
    into
        public.bills
        (bill_number, change_amount, created_at, discount_amount, generated_by, invoice_path, order_id, paid_amount, payment_method, payment_status, service_charge, subtotal, tax_amount, tenant_id, total_amount, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-04 11:32:54 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:32:54 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [OrderDto(id=d8d9041b-9302-4e6b-aca6-a1bdd40625aa, orderNumber=ORD1764828174821, tableId=null, tableN (truncated)...]
2025-12-04 11:32:54 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-12-04 11:32:54 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/sync
2025-12-04 11:32:54 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/sync
2025-12-04 11:32:54 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:32:54 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/sync
2025-12-04 11:32:54 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/sync", parameters={}
2025-12-04 11:32:54 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.SyncController#performSync(SyncRequest)
2025-12-04 11:32:54 [http-nio-8881-exec-7] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:32:54 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [SyncRequest(deviceId=d23c59b8-4056-4cc6-b9bc-6ac5018951cf, lastSyncTime=1970-01-01T05:30, data=[Sync (truncated)...]
2025-12-04 11:32:54 [http-nio-8881-exec-7] ERROR c.r.billing.service.SyncService - Sync error for item: d8d9041b-9302-4e6b-aca6-a1bdd40625aa
java.lang.IllegalArgumentException: Unknown entity type: order
	at com.restaurant.billing.service.SyncService.processSyncItem(SyncService.java:107)
	at com.restaurant.billing.service.SyncService.performSync(SyncService.java:34)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at com.restaurant.billing.service.SyncService$$SpringCGLIB$$0.performSync(<generated>)
	at com.restaurant.billing.controller.SyncController.performSync(SyncController.java:23)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 11:32:54 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 11:32:54 [http-nio-8881-exec-7] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
java.lang.IllegalArgumentException: No enum constant com.restaurant.billing.entity.SyncLog.SyncOperation.create
	at java.base/java.lang.Enum.valueOf(Enum.java:273)
	at com.restaurant.billing.entity.SyncLog$SyncOperation.valueOf(SyncLog.java:65)
	at com.restaurant.billing.service.SyncService.logSync(SyncService.java:158)
	at com.restaurant.billing.service.SyncService.performSync(SyncService.java:51)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at com.restaurant.billing.service.SyncService$$SpringCGLIB$$0.performSync(<generated>)
	at com.restaurant.billing.controller.SyncController.performSync(SyncController.java:23)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 11:32:54 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:32:54 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T11:32:54.861186818, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 11:32:54 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [java.lang.IllegalArgumentException: No enum constant com.restaurant.billing.entity.SyncLog.SyncOperation.create]
2025-12-04 11:32:54 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 11:32:55 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 11:32:55 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:32:55 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 11:32:55 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 11:32:55 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#getRestaurantProfile()
2025-12-04 11:32:55 [http-nio-8881-exec-3] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:32:55 [http-nio-8881-exec-3] INFO  c.r.b.service.RestaurantService - Fetching restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:32:55 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 11:32:55 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:32:55 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 11:32:55 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:33:56 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/auth/login
2025-12-04 11:33:56 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-12-04 11:33:56 [http-nio-8881-exec-2] ERROR c.r.billing.security.JwtUtil - Invalid JWT token: JWT expired at 2025-12-03T13:13:21Z. Current time: 2025-12-04T06:03:56Z, a difference of 60635890 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-12-04 11:33:56 [http-nio-8881-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-04 11:33:56 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-12-04 11:33:56 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-12-04 11:33:56 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.AuthController#login(LoginRequest)
2025-12-04 11:33:56 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(restaurantCode=REST14DAA490, username=Ganesh@gmail.com, password=Rest@1234)]
2025-12-04 11:33:56 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.restaurant_code=?
2025-12-04 11:33:56 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=? 
        and u1_0.tenant_id=?
2025-12-04 11:33:56 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    update
        public.users 
    set
        auth_provider=?,
        email=?,
        google_id=?,
        is_active=?,
        last_login=?,
        name=?,
        password_hash=?,
        phone=?,
        refresh_token=?,
        refresh_token_expiry=?,
        role=?,
        tenant_id=?,
        updated_at=? 
    where
        id=?
2025-12-04 11:33:56 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:33:56 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiT1dORVIiLCJ0ZW5hbnRJZCI6ImNjNzFkN2U0LWNmNj (truncated)...]
2025-12-04 11:33:56 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:33:57 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/today-sales
2025-12-04 11:33:57 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/active-orders
2025-12-04 11:33:57 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/pending-payments
2025-12-04 11:33:57 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/tables-occupied
2025-12-04 11:33:57 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/stats
2025-12-04 11:33:57 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/today-sales
2025-12-04 11:33:57 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/pending-payments
2025-12-04 11:33:57 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/active-orders
2025-12-04 11:33:57 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/stats
2025-12-04 11:33:57 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/tables-occupied
2025-12-04 11:33:57 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:33:57 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:33:57 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/today-sales
2025-12-04 11:33:57 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/today-sales", parameters={}
2025-12-04 11:33:57 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTodaySales()
2025-12-04 11:33:57 [http-nio-8881-exec-5] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:33:57 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:33:57 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/pending-payments
2025-12-04 11:33:57 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:33:57 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/pending-payments", parameters={}
2025-12-04 11:33:57 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:33:57 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getPendingPayments()
2025-12-04 11:33:57 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:33:57 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 11:33:57 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/active-orders
2025-12-04 11:33:57 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 11:33:57 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 11:33:57 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/active-orders", parameters={}
2025-12-04 11:33:57 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getActiveOrders()
2025-12-04 11:33:57 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/tables-occupied
2025-12-04 11:33:57 [http-nio-8881-exec-1] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:33:57 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/stats
2025-12-04 11:33:57 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/tables-occupied", parameters={}
2025-12-04 11:33:57 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/stats", parameters={}
2025-12-04 11:33:57 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTablesOccupied()
2025-12-04 11:33:57 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getDashboardStats()
2025-12-04 11:33:57 [http-nio-8881-exec-9] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:33:57 [http-nio-8881-exec-2] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:33:57 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:33:57 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 11:33:57 [http-nio-8881-exec-5] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session
	at org.hibernate.collection.spi.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:636)
	at org.hibernate.collection.spi.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:219)
	at org.hibernate.collection.spi.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:615)
	at org.hibernate.collection.spi.AbstractPersistentCollection.read(AbstractPersistentCollection.java:138)
	at org.hibernate.collection.spi.PersistentBag.iterator(PersistentBag.java:369)
	at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1842)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.reduce(ReferencePipeline.java:657)
	at com.restaurant.billing.service.DashboardService.getTodaySales(DashboardService.java:80)
	at com.restaurant.billing.controller.DashboardController.getTodaySales(DashboardController.java:24)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 11:33:57 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 11:33:57 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:33:57 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T11:33:57.274237288, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 11:33:57 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 11:33:57 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 11:33:57 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:33:57 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session]
2025-12-04 11:33:57 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 11:33:57 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:33:57 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:33:57 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 11:33:57 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 11:33:57 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:33:57 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:33:57 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 11:33:57 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 11:33:57 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 11:33:57 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:33:57 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{pendingPayments=0, activeOrders=0, todaySales=0, tablesOccupied=0}]
2025-12-04 11:33:57 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:33:57 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/orders
2025-12-04 11:33:57 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/orders
2025-12-04 11:33:57 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:33:57 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/orders
2025-12-04 11:33:57 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/orders", parameters={}
2025-12-04 11:33:57 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#getAllOrders()
2025-12-04 11:33:57 [http-nio-8881-exec-10] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:33:57 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 11:33:57 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:33:57 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:33:57 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:33:57 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:33:57 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:33:57 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:33:57 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:33:57 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:33:57 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:33:57 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:33:57 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:33:57 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:33:57 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[OrderDto(id=3d2cc165-482d-4290-b220-105d1ad18880, orderNumber=ORD1764763565538, tableId=null, table (truncated)...]
2025-12-04 11:33:57 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:34:00 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/restaurant/profile
2025-12-04 11:34:00 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 11:34:00 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:34:00 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 11:34:00 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 11:34:00 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#getRestaurantProfile()
2025-12-04 11:34:00 [http-nio-8881-exec-6] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:34:00 [http-nio-8881-exec-6] INFO  c.r.b.service.RestaurantService - Fetching restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:34:00 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 11:34:00 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:34:00 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 11:34:00 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:34:24 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/restaurant/profile
2025-12-04 11:34:24 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:34:24 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/restaurant/profile
2025-12-04 11:34:24 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/api/restaurant/profile", parameters={}
2025-12-04 11:34:24 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#updateRestaurantProfile(UpdateRestaurantProfileRequest)
2025-12-04 11:34:24 [http-nio-8881-exec-3] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:34:24 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [UpdateRestaurantProfileRequest(restaurantName=null, ownerName=null, ownerPhone=null, address=kk stre (truncated)...]
2025-12-04 11:34:24 [http-nio-8881-exec-3] INFO  c.r.b.service.RestaurantService - Updating restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:34:24 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 11:34:24 [http-nio-8881-exec-3] INFO  c.r.b.service.RestaurantService - Restaurant profile updated successfully for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:34:24 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:34:24 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 11:34:24 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:34:27 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 11:34:27 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:34:27 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 11:34:27 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 11:34:27 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#getRestaurantProfile()
2025-12-04 11:34:27 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:34:27 [http-nio-8881-exec-4] INFO  c.r.b.service.RestaurantService - Fetching restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:34:27 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 11:34:27 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:34:27 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 11:34:27 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:35:30 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/restaurant/profile
2025-12-04 11:35:30 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:35:30 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/restaurant/profile
2025-12-04 11:35:30 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/api/restaurant/profile", parameters={}
2025-12-04 11:35:30 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#updateRestaurantProfile(UpdateRestaurantProfileRequest)
2025-12-04 11:35:30 [http-nio-8881-exec-7] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:35:30 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [UpdateRestaurantProfileRequest(restaurantName=null, ownerName=null, ownerPhone=null, address=kk stre (truncated)...]
2025-12-04 11:35:30 [http-nio-8881-exec-7] INFO  c.r.b.service.RestaurantService - Updating restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:35:30 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 11:35:30 [http-nio-8881-exec-7] INFO  c.r.b.service.RestaurantService - Restaurant profile updated successfully for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:35:30 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:35:30 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 11:35:30 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:36:54 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 11:36:54 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:36:54 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 11:36:54 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 11:36:54 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#getRestaurantProfile()
2025-12-04 11:36:54 [http-nio-8881-exec-8] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:36:54 [http-nio-8881-exec-8] INFO  c.r.b.service.RestaurantService - Fetching restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:36:54 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 11:36:54 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:36:54 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 11:36:54 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:37:05 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/restaurant/profile
2025-12-04 11:37:05 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:37:05 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/restaurant/profile
2025-12-04 11:37:05 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/api/restaurant/profile", parameters={}
2025-12-04 11:37:05 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#updateRestaurantProfile(UpdateRestaurantProfileRequest)
2025-12-04 11:37:05 [http-nio-8881-exec-6] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:37:05 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [UpdateRestaurantProfileRequest(restaurantName=null, ownerName=null, ownerPhone=null, address=kk stre (truncated)...]
2025-12-04 11:37:05 [http-nio-8881-exec-6] INFO  c.r.b.service.RestaurantService - Updating restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:37:05 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 11:37:05 [http-nio-8881-exec-6] INFO  c.r.b.service.RestaurantService - Restaurant profile updated successfully for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:37:05 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    update
        public.tenants 
    set
        address=?,
        city=?,
        currency=?,
        gstin=?,
        is_active=?,
        logo_path=?,
        max_storage_gb=?,
        max_users=?,
        owner_email=?,
        owner_name=?,
        owner_phone=?,
        pincode=?,
        razorpay_customer_id=?,
        razorpay_subscription_id=?,
        restaurant_code=?,
        restaurant_name=?,
        service_charge_rate=?,
        state=?,
        subscription_end_date=?,
        subscription_plan=?,
        subscription_start_date=?,
        subscription_status=?,
        tax_rate=?,
        timezone=?,
        trial_end_date=?,
        updated_at=? 
    where
        id=?
2025-12-04 11:37:05 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:37:05 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 11:37:05 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:37:17 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 11:37:17 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:37:17 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 11:37:17 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 11:37:17 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#getRestaurantProfile()
2025-12-04 11:37:17 [http-nio-8881-exec-3] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:37:17 [http-nio-8881-exec-3] INFO  c.r.b.service.RestaurantService - Fetching restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:37:17 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 11:37:17 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:37:17 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 11:37:17 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:38:01 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/restaurant/profile
2025-12-04 11:38:01 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:38:01 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/restaurant/profile
2025-12-04 11:38:01 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/api/restaurant/profile", parameters={}
2025-12-04 11:38:01 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#updateRestaurantProfile(UpdateRestaurantProfileRequest)
2025-12-04 11:38:01 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:38:01 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [UpdateRestaurantProfileRequest(restaurantName=null, ownerName=null, ownerPhone=null, address=kk stre (truncated)...]
2025-12-04 11:38:01 [http-nio-8881-exec-4] INFO  c.r.b.service.RestaurantService - Updating restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:38:01 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 11:38:01 [http-nio-8881-exec-4] INFO  c.r.b.service.RestaurantService - Restaurant profile updated successfully for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:38:01 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:38:01 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 11:38:01 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:38:58 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/auth/login
2025-12-04 11:38:58 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-12-04 11:38:58 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:38:58 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-12-04 11:38:58 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-12-04 11:38:58 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.AuthController#login(LoginRequest)
2025-12-04 11:38:58 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(restaurantCode=REST14DAA490, username=Ganesh@gmail.com, password=Rest@1234)]
2025-12-04 11:38:58 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.restaurant_code=?
2025-12-04 11:38:58 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=? 
        and u1_0.tenant_id=?
2025-12-04 11:38:59 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    update
        public.users 
    set
        auth_provider=?,
        email=?,
        google_id=?,
        is_active=?,
        last_login=?,
        name=?,
        password_hash=?,
        phone=?,
        refresh_token=?,
        refresh_token_expiry=?,
        role=?,
        tenant_id=?,
        updated_at=? 
    where
        id=?
2025-12-04 11:38:59 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:38:59 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiT1dORVIiLCJ0ZW5hbnRJZCI6ImNjNzFkN2U0LWNmNj (truncated)...]
2025-12-04 11:38:59 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:38:59 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/today-sales
2025-12-04 11:38:59 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/active-orders
2025-12-04 11:38:59 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/pending-payments
2025-12-04 11:38:59 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/today-sales
2025-12-04 11:38:59 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/active-orders
2025-12-04 11:38:59 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/stats
2025-12-04 11:38:59 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/tables-occupied
2025-12-04 11:38:59 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/pending-payments
2025-12-04 11:38:59 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:38:59 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:38:59 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:38:59 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/stats
2025-12-04 11:38:59 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/tables-occupied
2025-12-04 11:38:59 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/today-sales
2025-12-04 11:38:59 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/active-orders
2025-12-04 11:38:59 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/today-sales", parameters={}
2025-12-04 11:38:59 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/active-orders", parameters={}
2025-12-04 11:38:59 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/pending-payments
2025-12-04 11:38:59 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getActiveOrders()
2025-12-04 11:38:59 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/pending-payments", parameters={}
2025-12-04 11:38:59 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTodaySales()
2025-12-04 11:38:59 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:38:59 [http-nio-8881-exec-8] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:38:59 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getPendingPayments()
2025-12-04 11:38:59 [http-nio-8881-exec-9] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:38:59 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 11:38:59 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 11:38:59 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 11:38:59 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:38:59 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:38:59 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:38:59 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:38:59 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 11:38:59 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 11:38:59 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 11:38:59 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/tables-occupied
2025-12-04 11:38:59 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:38:59 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:38:59 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/stats
2025-12-04 11:38:59 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/tables-occupied", parameters={}
2025-12-04 11:38:59 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/stats", parameters={}
2025-12-04 11:38:59 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTablesOccupied()
2025-12-04 11:38:59 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getDashboardStats()
2025-12-04 11:38:59 [http-nio-8881-exec-5] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:38:59 [http-nio-8881-exec-1] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:38:59 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 11:38:59 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 11:38:59 [http-nio-8881-exec-8] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session
	at org.hibernate.collection.spi.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:636)
	at org.hibernate.collection.spi.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:219)
	at org.hibernate.collection.spi.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:615)
	at org.hibernate.collection.spi.AbstractPersistentCollection.read(AbstractPersistentCollection.java:138)
	at org.hibernate.collection.spi.PersistentBag.iterator(PersistentBag.java:369)
	at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1842)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.reduce(ReferencePipeline.java:657)
	at com.restaurant.billing.service.DashboardService.getTodaySales(DashboardService.java:80)
	at com.restaurant.billing.controller.DashboardController.getTodaySales(DashboardController.java:24)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 11:38:59 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:38:59 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T11:38:59.368454624, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 11:38:59 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:38:59 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 11:38:59 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session]
2025-12-04 11:38:59 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 11:38:59 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:38:59 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 11:38:59 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 11:38:59 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 11:38:59 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:38:59 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{pendingPayments=0, activeOrders=0, todaySales=0, tablesOccupied=0}]
2025-12-04 11:38:59 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:38:59 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/orders
2025-12-04 11:38:59 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/orders
2025-12-04 11:38:59 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:38:59 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/orders
2025-12-04 11:38:59 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/orders", parameters={}
2025-12-04 11:38:59 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#getAllOrders()
2025-12-04 11:38:59 [http-nio-8881-exec-7] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:38:59 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 11:38:59 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:38:59 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:38:59 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:38:59 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:38:59 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:38:59 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:38:59 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:38:59 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:38:59 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:38:59 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:38:59 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:38:59 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:38:59 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[OrderDto(id=3d2cc165-482d-4290-b220-105d1ad18880, orderNumber=ORD1764763565538, tableId=null, table (truncated)...]
2025-12-04 11:38:59 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:39:03 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/menu
2025-12-04 11:39:03 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/menu
2025-12-04 11:39:03 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:39:03 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/menu
2025-12-04 11:39:03 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/menu", parameters={}
2025-12-04 11:39:03 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.MenuController#getAllMenuItems()
2025-12-04 11:39:03 [http-nio-8881-exec-3] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:39:03 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        mi1_0.id,
        mi1_0.category_id,
        mi1_0.created_at,
        mi1_0.description,
        mi1_0.device_id,
        mi1_0.image_path,
        mi1_0.is_available,
        mi1_0.is_deleted,
        mi1_0.is_veg,
        mi1_0.name,
        mi1_0.preparation_time,
        mi1_0.price,
        mi1_0.synced_at,
        mi1_0.tenant_id,
        mi1_0.updated_at,
        mi1_0.version 
    from
        public.menu_items mi1_0 
    where
        mi1_0.tenant_id=? 
        and mi1_0.is_deleted=?
2025-12-04 11:39:03 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:39:03 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[MenuItemDto(id=8a5577b8-36d5-4a3d-9299-903f009a42b9, categoryId=6ed45abe-f8f6-4966-8126-a3f0d0bd0aa (truncated)...]
2025-12-04 11:39:03 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:39:03 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/categories?activeOnly=true
2025-12-04 11:39:03 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/categories?activeOnly=true
2025-12-04 11:39:03 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:39:03 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/categories?activeOnly=true
2025-12-04 11:39:03 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/categories?activeOnly=true", parameters={masked}
2025-12-04 11:39:03 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.CategoryController#getAllCategories(UserDetails, Boolean)
2025-12-04 11:39:03 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:39:03 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:39:03 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.display_order,
        c1_0.is_active,
        c1_0.name,
        c1_0.tenant_id,
        c1_0.updated_at 
    from
        public.categories c1_0 
    where
        c1_0.tenant_id=? 
        and c1_0.is_active=? 
    order by
        c1_0.display_order
2025-12-04 11:39:03 [http-nio-8881-exec-4] DEBUG c.r.billing.service.CategoryService - Found 2 categories for tenant cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:39:03 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:39:03 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[CategoryDto(id=6ed45abe-f8f6-4966-8126-a3f0d0bd0aaa, name=Main course, displayOrder=1), CategoryDto (truncated)...]
2025-12-04 11:39:03 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:39:07 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/orders
2025-12-04 11:39:07 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:39:07 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/orders
2025-12-04 11:39:07 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/orders", parameters={}
2025-12-04 11:39:07 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#createOrder(CreateOrderRequest)
2025-12-04 11:39:07 [http-nio-8881-exec-9] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:39:07 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [CreateOrderRequest(tableId=null, customerName=null, customerPhone=null, orderType=DINE_IN, items=[Or (truncated)...]
2025-12-04 11:39:07 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 11:39:07 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        mi1_0.id,
        mi1_0.category_id,
        mi1_0.created_at,
        mi1_0.description,
        mi1_0.device_id,
        mi1_0.image_path,
        mi1_0.is_available,
        mi1_0.is_deleted,
        mi1_0.is_veg,
        mi1_0.name,
        mi1_0.preparation_time,
        mi1_0.price,
        mi1_0.synced_at,
        mi1_0.tenant_id,
        mi1_0.updated_at,
        mi1_0.version 
    from
        public.menu_items mi1_0 
    where
        mi1_0.id=?
2025-12-04 11:39:07 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.order_id=?
2025-12-04 11:39:07 [http-nio-8881-exec-9] INFO  c.r.billing.service.OrderService - Bill generated for order: d4525aa9-864e-4547-95d3-e7b384541bcc
2025-12-04 11:39:07 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    insert 
    into
        public.orders
        (created_at, created_by, customer_name, customer_phone, device_id, discount_amount, is_deleted, notes, order_number, order_status, order_type, service_charge, subtotal, synced_at, table_id, tax_amount, tenant_id, total_amount, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-04 11:39:07 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    insert 
    into
        public.order_items
        (created_at, item_name, menu_item_id, order_id, quantity, special_instructions, status, total_price, unit_price, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-04 11:39:07 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    insert 
    into
        public.bills
        (bill_number, change_amount, created_at, discount_amount, generated_by, invoice_path, order_id, paid_amount, payment_method, payment_status, service_charge, subtotal, tax_amount, tenant_id, total_amount, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-04 11:39:07 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:39:07 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [OrderDto(id=d4525aa9-864e-4547-95d3-e7b384541bcc, orderNumber=ORD1764828547536, tableId=null, tableN (truncated)...]
2025-12-04 11:39:07 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-12-04 11:39:07 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/sync
2025-12-04 11:39:07 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/sync
2025-12-04 11:39:07 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:39:07 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/sync
2025-12-04 11:39:07 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/sync", parameters={}
2025-12-04 11:39:07 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.SyncController#performSync(SyncRequest)
2025-12-04 11:39:07 [http-nio-8881-exec-5] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:39:07 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [SyncRequest(deviceId=d23c59b8-4056-4cc6-b9bc-6ac5018951cf, lastSyncTime=1970-01-01T05:30, data=[Sync (truncated)...]
2025-12-04 11:39:07 [http-nio-8881-exec-5] ERROR c.r.billing.service.SyncService - Sync error for item: d4525aa9-864e-4547-95d3-e7b384541bcc
java.lang.IllegalArgumentException: Unknown entity type: order
	at com.restaurant.billing.service.SyncService.processSyncItem(SyncService.java:107)
	at com.restaurant.billing.service.SyncService.performSync(SyncService.java:34)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at com.restaurant.billing.service.SyncService$$SpringCGLIB$$0.performSync(<generated>)
	at com.restaurant.billing.controller.SyncController.performSync(SyncController.java:23)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 11:39:07 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 11:39:07 [http-nio-8881-exec-5] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
java.lang.IllegalArgumentException: No enum constant com.restaurant.billing.entity.SyncLog.SyncOperation.create
	at java.base/java.lang.Enum.valueOf(Enum.java:273)
	at com.restaurant.billing.entity.SyncLog$SyncOperation.valueOf(SyncLog.java:65)
	at com.restaurant.billing.service.SyncService.logSync(SyncService.java:158)
	at com.restaurant.billing.service.SyncService.performSync(SyncService.java:51)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at com.restaurant.billing.service.SyncService$$SpringCGLIB$$0.performSync(<generated>)
	at com.restaurant.billing.controller.SyncController.performSync(SyncController.java:23)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 11:39:07 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:39:07 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T11:39:07.575324288, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 11:39:07 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [java.lang.IllegalArgumentException: No enum constant com.restaurant.billing.entity.SyncLog.SyncOperation.create]
2025-12-04 11:39:07 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 11:39:07 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/restaurant/profile
2025-12-04 11:39:07 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 11:39:07 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:39:07 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 11:39:07 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 11:39:07 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#getRestaurantProfile()
2025-12-04 11:39:07 [http-nio-8881-exec-2] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:39:07 [http-nio-8881-exec-2] INFO  c.r.b.service.RestaurantService - Fetching restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:39:07 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 11:39:07 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:39:07 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 11:39:07 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:39:33 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-04 11:39:33 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-12-04 11:39:33 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-12-04 11:39:36 [main] INFO  c.r.b.RestaurantBillingApplication - Starting RestaurantBillingApplication using Java 17.0.17 with PID 1163216 (/home/ubuntu/Documents/Mine/Restaurant-BE/build/classes/java/main started by ubuntu in /home/ubuntu/Documents/Mine/Restaurant-BE)
2025-12-04 11:39:36 [main] DEBUG c.r.b.RestaurantBillingApplication - Running with Spring Boot v3.3.10, Spring v6.1.18
2025-12-04 11:39:36 [main] INFO  c.r.b.RestaurantBillingApplication - No active profile set, falling back to 1 default profile: "default"
2025-12-04 11:39:37 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-04 11:39:37 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 45 ms. Found 14 JPA repository interfaces.
2025-12-04 11:39:37 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8881 (http)
2025-12-04 11:39:37 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-04 11:39:37 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-12-04 11:39:37 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-12-04 11:39:37 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 920 ms
2025-12-04 11:39:37 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-04 11:39:37 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.3.Final
2025-12-04 11:39:37 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-12-04 11:39:37 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-04 11:39:37 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-12-04 11:39:37 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@413eaf5d
2025-12-04 11:39:37 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-12-04 11:39:38 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-04 11:39:38 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-04 11:39:39 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-04 11:39:39 [main] DEBUG c.r.b.s.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-12-04 11:39:39 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-04 11:39:39 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-12-04 11:39:39 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 44 mappings in 'requestMappingHandlerMapping'
2025-12-04 11:39:40 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /uploads/**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-12-04 11:39:40 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-04 11:39:40 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-04 11:39:40 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-04 11:39:40 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8881 (http) with context path '/'
2025-12-04 11:39:40 [main] INFO  c.r.b.RestaurantBillingApplication - Started RestaurantBillingApplication in 3.927 seconds (process running for 4.102)
2025-12-04 11:40:32 [http-nio-8881-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-04 11:40:32 [http-nio-8881-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-12-04 11:40:32 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-12-04 11:40:32 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-12-04 11:40:32 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-12-04 11:40:32 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@5c3d91bc
2025-12-04 11:40:32 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@1f879e78
2025-12-04 11:40:32 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-12-04 11:40:32 [http-nio-8881-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-12-04 11:40:32 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/auth/login
2025-12-04 11:40:32 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-12-04 11:40:32 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:40:32 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-12-04 11:40:32 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-12-04 11:40:32 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.AuthController#login(LoginRequest)
2025-12-04 11:40:32 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(restaurantCode=REST14DAA490, username=Ganesh@gmail.com, password=Rest@1234)]
2025-12-04 11:40:32 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.restaurant_code=?
2025-12-04 11:40:32 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=? 
        and u1_0.tenant_id=?
2025-12-04 11:40:32 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    update
        public.users 
    set
        auth_provider=?,
        email=?,
        google_id=?,
        is_active=?,
        last_login=?,
        name=?,
        password_hash=?,
        phone=?,
        refresh_token=?,
        refresh_token_expiry=?,
        role=?,
        tenant_id=?,
        updated_at=? 
    where
        id=?
2025-12-04 11:40:32 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:40:32 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiT1dORVIiLCJ0ZW5hbnRJZCI6ImNjNzFkN2U0LWNmNj (truncated)...]
2025-12-04 11:40:32 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:40:33 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/today-sales
2025-12-04 11:40:33 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/active-orders
2025-12-04 11:40:33 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/pending-payments
2025-12-04 11:40:33 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/tables-occupied
2025-12-04 11:40:33 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/stats
2025-12-04 11:40:33 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/today-sales
2025-12-04 11:40:33 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/pending-payments
2025-12-04 11:40:33 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/tables-occupied
2025-12-04 11:40:33 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/active-orders
2025-12-04 11:40:33 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/stats
2025-12-04 11:40:33 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:40:33 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:40:33 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:40:33 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:40:33 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:40:33 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/today-sales
2025-12-04 11:40:33 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/today-sales", parameters={}
2025-12-04 11:40:33 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTodaySales()
2025-12-04 11:40:33 [http-nio-8881-exec-8] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:40:33 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/stats
2025-12-04 11:40:33 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/stats", parameters={}
2025-12-04 11:40:33 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/tables-occupied
2025-12-04 11:40:33 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/active-orders
2025-12-04 11:40:33 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/pending-payments
2025-12-04 11:40:33 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/tables-occupied", parameters={}
2025-12-04 11:40:33 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/active-orders", parameters={}
2025-12-04 11:40:33 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/pending-payments", parameters={}
2025-12-04 11:40:33 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getDashboardStats()
2025-12-04 11:40:33 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTablesOccupied()
2025-12-04 11:40:33 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getActiveOrders()
2025-12-04 11:40:33 [http-nio-8881-exec-2] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:40:33 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getPendingPayments()
2025-12-04 11:40:33 [http-nio-8881-exec-9] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:40:33 [http-nio-8881-exec-1] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:40:33 [http-nio-8881-exec-10] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:40:33 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 11:40:33 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:40:33 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 11:40:33 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:40:33 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 11:40:33 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 11:40:33 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 11:40:33 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 11:40:33 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:40:33 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 11:40:33 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:40:33 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 11:40:33 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:40:33 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 11:40:33 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:40:33 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 11:40:33 [http-nio-8881-exec-8] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session
	at org.hibernate.collection.spi.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:636)
	at org.hibernate.collection.spi.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:219)
	at org.hibernate.collection.spi.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:615)
	at org.hibernate.collection.spi.AbstractPersistentCollection.read(AbstractPersistentCollection.java:138)
	at org.hibernate.collection.spi.PersistentBag.iterator(PersistentBag.java:369)
	at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1842)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.reduce(ReferencePipeline.java:657)
	at com.restaurant.billing.service.DashboardService.getTodaySales(DashboardService.java:80)
	at com.restaurant.billing.controller.DashboardController.getTodaySales(DashboardController.java:24)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 11:40:33 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 11:40:33 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:40:33 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T11:40:33.068485267, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 11:40:33 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session]
2025-12-04 11:40:33 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 11:40:33 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 11:40:33 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:40:33 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{activeOrders=0, todaySales=0, tablesOccupied=0, pendingPayments=0}]
2025-12-04 11:40:33 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:40:33 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/orders
2025-12-04 11:40:33 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/orders
2025-12-04 11:40:33 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:40:33 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/orders
2025-12-04 11:40:33 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/orders", parameters={}
2025-12-04 11:40:33 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#getAllOrders()
2025-12-04 11:40:33 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:40:33 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 11:40:33 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:40:33 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:40:33 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:40:33 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:40:33 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:40:33 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:40:33 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:40:33 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:40:33 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:40:33 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:40:33 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:40:33 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:40:33 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:40:33 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[OrderDto(id=3d2cc165-482d-4290-b220-105d1ad18880, orderNumber=ORD1764763565538, tableId=null, table (truncated)...]
2025-12-04 11:40:33 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:40:36 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/restaurant/profile
2025-12-04 11:40:36 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 11:40:36 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:40:36 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 11:40:36 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 11:40:36 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#getRestaurantProfile()
2025-12-04 11:40:36 [http-nio-8881-exec-6] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:40:36 [http-nio-8881-exec-6] INFO  c.r.b.service.RestaurantService - Fetching restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:40:36 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 11:40:36 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:40:36 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 11:40:36 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:40:43 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/restaurant/profile
2025-12-04 11:40:43 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:40:43 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/restaurant/profile
2025-12-04 11:40:43 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/api/restaurant/profile", parameters={}
2025-12-04 11:40:43 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#updateRestaurantProfile(UpdateRestaurantProfileRequest)
2025-12-04 11:40:43 [http-nio-8881-exec-7] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:40:43 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [UpdateRestaurantProfileRequest(restaurantName=Ganesh, ownerEmail=Ganesh@gmail.com, ownerName=null, o (truncated)...]
2025-12-04 11:40:43 [http-nio-8881-exec-7] INFO  c.r.b.service.RestaurantService - Updating restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:40:43 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 11:40:43 [http-nio-8881-exec-7] INFO  c.r.b.service.RestaurantService - Restaurant profile updated successfully for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:40:43 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    update
        public.tenants 
    set
        address=?,
        city=?,
        currency=?,
        gstin=?,
        is_active=?,
        logo_path=?,
        max_storage_gb=?,
        max_users=?,
        owner_email=?,
        owner_name=?,
        owner_phone=?,
        pincode=?,
        razorpay_customer_id=?,
        razorpay_subscription_id=?,
        restaurant_code=?,
        restaurant_name=?,
        service_charge_rate=?,
        state=?,
        subscription_end_date=?,
        subscription_plan=?,
        subscription_start_date=?,
        subscription_status=?,
        tax_rate=?,
        timezone=?,
        trial_end_date=?,
        updated_at=? 
    where
        id=?
2025-12-04 11:40:43 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:40:43 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 11:40:43 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:40:46 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 11:40:46 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:40:46 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 11:40:46 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 11:40:46 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#getRestaurantProfile()
2025-12-04 11:40:46 [http-nio-8881-exec-1] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:40:46 [http-nio-8881-exec-1] INFO  c.r.b.service.RestaurantService - Fetching restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:40:46 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 11:40:46 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:40:46 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 11:40:46 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:41:10 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/restaurant/profile
2025-12-04 11:41:10 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:41:10 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/restaurant/profile
2025-12-04 11:41:10 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/api/restaurant/profile", parameters={}
2025-12-04 11:41:10 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#updateRestaurantProfile(UpdateRestaurantProfileRequest)
2025-12-04 11:41:10 [http-nio-8881-exec-10] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:41:10 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [UpdateRestaurantProfileRequest(restaurantName=Ganesh, ownerEmail=Ganesh@gmail.com, ownerName=null, o (truncated)...]
2025-12-04 11:41:10 [http-nio-8881-exec-10] INFO  c.r.b.service.RestaurantService - Updating restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:41:10 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 11:41:10 [http-nio-8881-exec-10] INFO  c.r.b.service.RestaurantService - Restaurant profile updated successfully for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:41:10 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    update
        public.tenants 
    set
        address=?,
        city=?,
        currency=?,
        gstin=?,
        is_active=?,
        logo_path=?,
        max_storage_gb=?,
        max_users=?,
        owner_email=?,
        owner_name=?,
        owner_phone=?,
        pincode=?,
        razorpay_customer_id=?,
        razorpay_subscription_id=?,
        restaurant_code=?,
        restaurant_name=?,
        service_charge_rate=?,
        state=?,
        subscription_end_date=?,
        subscription_plan=?,
        subscription_start_date=?,
        subscription_status=?,
        tax_rate=?,
        timezone=?,
        trial_end_date=?,
        updated_at=? 
    where
        id=?
2025-12-04 11:41:10 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:41:10 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 11:41:10 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:42:05 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/restaurant/profile
2025-12-04 11:42:05 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:42:05 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/restaurant/profile
2025-12-04 11:42:05 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/api/restaurant/profile", parameters={}
2025-12-04 11:42:05 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#updateRestaurantProfile(UpdateRestaurantProfileRequest)
2025-12-04 11:42:05 [http-nio-8881-exec-3] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:42:05 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [UpdateRestaurantProfileRequest(restaurantName=Ganesh, ownerEmail=Ganesh@gmail.com, ownerName=null, o (truncated)...]
2025-12-04 11:42:05 [http-nio-8881-exec-3] INFO  c.r.b.service.RestaurantService - Updating restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:42:05 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 11:42:05 [http-nio-8881-exec-3] INFO  c.r.b.service.RestaurantService - Restaurant profile updated successfully for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:42:05 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:42:05 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 11:42:05 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:42:13 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 11:42:13 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:42:13 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 11:42:13 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 11:42:13 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#getRestaurantProfile()
2025-12-04 11:42:13 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:42:13 [http-nio-8881-exec-4] INFO  c.r.b.service.RestaurantService - Fetching restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:42:13 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 11:42:13 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:42:13 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 11:42:13 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:42:33 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/restaurant/profile
2025-12-04 11:42:33 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:42:33 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/restaurant/profile
2025-12-04 11:42:33 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/api/restaurant/profile", parameters={}
2025-12-04 11:42:33 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#updateRestaurantProfile(UpdateRestaurantProfileRequest)
2025-12-04 11:42:33 [http-nio-8881-exec-5] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:42:33 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [UpdateRestaurantProfileRequest(restaurantName=Ganesh, ownerEmail=Ganesh@gmail.com, ownerName=null, o (truncated)...]
2025-12-04 11:42:33 [http-nio-8881-exec-5] INFO  c.r.b.service.RestaurantService - Updating restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:42:33 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 11:42:33 [http-nio-8881-exec-5] INFO  c.r.b.service.RestaurantService - Restaurant profile updated successfully for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:42:33 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    update
        public.tenants 
    set
        address=?,
        city=?,
        currency=?,
        gstin=?,
        is_active=?,
        logo_path=?,
        max_storage_gb=?,
        max_users=?,
        owner_email=?,
        owner_name=?,
        owner_phone=?,
        pincode=?,
        razorpay_customer_id=?,
        razorpay_subscription_id=?,
        restaurant_code=?,
        restaurant_name=?,
        service_charge_rate=?,
        state=?,
        subscription_end_date=?,
        subscription_plan=?,
        subscription_start_date=?,
        subscription_status=?,
        tax_rate=?,
        timezone=?,
        trial_end_date=?,
        updated_at=? 
    where
        id=?
2025-12-04 11:42:33 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:42:33 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 11:42:33 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:42:36 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 11:42:36 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:42:36 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 11:42:36 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 11:42:36 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#getRestaurantProfile()
2025-12-04 11:42:36 [http-nio-8881-exec-6] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:42:36 [http-nio-8881-exec-6] INFO  c.r.b.service.RestaurantService - Fetching restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:42:36 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 11:42:36 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:42:36 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 11:42:36 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:45:44 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/auth/login
2025-12-04 11:45:44 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-12-04 11:45:44 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:45:44 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-12-04 11:45:44 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-12-04 11:45:44 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.AuthController#login(LoginRequest)
2025-12-04 11:45:44 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(restaurantCode=REST14DAA490, username=Ganesh@gmail.com, password=Rest@1234)]
2025-12-04 11:45:44 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.restaurant_code=?
2025-12-04 11:45:44 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=? 
        and u1_0.tenant_id=?
2025-12-04 11:45:44 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    update
        public.users 
    set
        auth_provider=?,
        email=?,
        google_id=?,
        is_active=?,
        last_login=?,
        name=?,
        password_hash=?,
        phone=?,
        refresh_token=?,
        refresh_token_expiry=?,
        role=?,
        tenant_id=?,
        updated_at=? 
    where
        id=?
2025-12-04 11:45:44 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:45:44 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiT1dORVIiLCJ0ZW5hbnRJZCI6ImNjNzFkN2U0LWNmNj (truncated)...]
2025-12-04 11:45:44 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:45:44 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/today-sales
2025-12-04 11:45:44 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/active-orders
2025-12-04 11:45:44 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/pending-payments
2025-12-04 11:45:44 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/tables-occupied
2025-12-04 11:45:44 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/today-sales
2025-12-04 11:45:44 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/stats
2025-12-04 11:45:44 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/active-orders
2025-12-04 11:45:44 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/pending-payments
2025-12-04 11:45:44 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/tables-occupied
2025-12-04 11:45:44 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/stats
2025-12-04 11:45:44 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:45:44 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:45:44 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:45:44 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:45:44 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/pending-payments
2025-12-04 11:45:44 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/active-orders
2025-12-04 11:45:44 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/today-sales
2025-12-04 11:45:44 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/tables-occupied
2025-12-04 11:45:44 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/pending-payments", parameters={}
2025-12-04 11:45:44 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:45:44 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/today-sales", parameters={}
2025-12-04 11:45:44 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/active-orders", parameters={}
2025-12-04 11:45:44 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/tables-occupied", parameters={}
2025-12-04 11:45:44 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getPendingPayments()
2025-12-04 11:45:44 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getActiveOrders()
2025-12-04 11:45:44 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTablesOccupied()
2025-12-04 11:45:44 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTodaySales()
2025-12-04 11:45:44 [http-nio-8881-exec-7] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:45:44 [http-nio-8881-exec-6] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:45:44 [http-nio-8881-exec-1] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:45:44 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:45:44 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 11:45:44 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 11:45:44 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 11:45:44 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 11:45:44 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/stats
2025-12-04 11:45:44 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/stats", parameters={}
2025-12-04 11:45:44 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getDashboardStats()
2025-12-04 11:45:44 [http-nio-8881-exec-10] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:45:44 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:45:44 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 11:45:44 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:45:44 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:45:44 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:45:44 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 11:45:44 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 11:45:44 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 11:45:44 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:45:44 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 11:45:44 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:45:44 [http-nio-8881-exec-4] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session
	at org.hibernate.collection.spi.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:636)
	at org.hibernate.collection.spi.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:219)
	at org.hibernate.collection.spi.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:615)
	at org.hibernate.collection.spi.AbstractPersistentCollection.read(AbstractPersistentCollection.java:138)
	at org.hibernate.collection.spi.PersistentBag.iterator(PersistentBag.java:369)
	at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1842)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.reduce(ReferencePipeline.java:657)
	at com.restaurant.billing.service.DashboardService.getTodaySales(DashboardService.java:80)
	at com.restaurant.billing.controller.DashboardController.getTodaySales(DashboardController.java:24)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 11:45:44 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:45:44 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T11:45:44.546869784, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 11:45:44 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session]
2025-12-04 11:45:44 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 11:45:44 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 11:45:44 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 11:45:44 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 11:45:44 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:45:44 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{activeOrders=0, todaySales=0, tablesOccupied=0, pendingPayments=0}]
2025-12-04 11:45:44 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:45:44 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/orders
2025-12-04 11:45:44 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/orders
2025-12-04 11:45:44 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:45:44 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/orders
2025-12-04 11:45:44 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/orders", parameters={}
2025-12-04 11:45:44 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#getAllOrders()
2025-12-04 11:45:44 [http-nio-8881-exec-9] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:45:44 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 11:45:44 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:45:44 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:45:44 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:45:44 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:45:44 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:45:44 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:45:44 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:45:44 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:45:44 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:45:44 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:45:44 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:45:44 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 11:45:44 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:45:44 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[OrderDto(id=3d2cc165-482d-4290-b220-105d1ad18880, orderNumber=ORD1764763565538, tableId=null, table (truncated)...]
2025-12-04 11:45:44 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:45:47 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/restaurant/profile
2025-12-04 11:45:47 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 11:45:47 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:45:47 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 11:45:47 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 11:45:47 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#getRestaurantProfile()
2025-12-04 11:45:47 [http-nio-8881-exec-3] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:45:47 [http-nio-8881-exec-3] INFO  c.r.b.service.RestaurantService - Fetching restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:45:47 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 11:45:47 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:45:47 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 11:45:47 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:45:55 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/restaurant/logo
2025-12-04 11:45:55 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/restaurant/logo
2025-12-04 11:45:55 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:45:55 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/restaurant/logo
2025-12-04 11:45:55 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/restaurant/logo", parameters={multipart}
2025-12-04 11:45:55 [http-nio-8881-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-12-04 11:45:55 [http-nio-8881-exec-1] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:45:55 [http-nio-8881-exec-1] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-12-04 11:45:55 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 11:45:55 [http-nio-8881-exec-1] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/restaurant/logo.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:586)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 11:45:55 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:45:55 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T11:45:55.225801591, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 11:45:55 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/restaurant/logo.]
2025-12-04 11:45:55 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 11:45:55 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/restaurant/profile
2025-12-04 11:45:55 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:45:55 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/restaurant/profile
2025-12-04 11:45:55 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/api/restaurant/profile", parameters={}
2025-12-04 11:45:55 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#updateRestaurantProfile(UpdateRestaurantProfileRequest)
2025-12-04 11:45:55 [http-nio-8881-exec-6] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:45:55 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [UpdateRestaurantProfileRequest(restaurantName=Ganesh, ownerEmail=Ganesh@gmail.com, ownerName=null, o (truncated)...]
2025-12-04 11:45:55 [http-nio-8881-exec-6] INFO  c.r.b.service.RestaurantService - Updating restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:45:55 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 11:45:55 [http-nio-8881-exec-6] INFO  c.r.b.service.RestaurantService - Restaurant profile updated successfully for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:45:55 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    update
        public.tenants 
    set
        address=?,
        city=?,
        currency=?,
        gstin=?,
        is_active=?,
        logo_path=?,
        max_storage_gb=?,
        max_users=?,
        owner_email=?,
        owner_name=?,
        owner_phone=?,
        pincode=?,
        razorpay_customer_id=?,
        razorpay_subscription_id=?,
        restaurant_code=?,
        restaurant_name=?,
        service_charge_rate=?,
        state=?,
        subscription_end_date=?,
        subscription_plan=?,
        subscription_start_date=?,
        subscription_status=?,
        tax_rate=?,
        timezone=?,
        trial_end_date=?,
        updated_at=? 
    where
        id=?
2025-12-04 11:45:55 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:45:55 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 11:45:55 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:45:58 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 11:45:58 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:45:58 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 11:45:58 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 11:45:58 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#getRestaurantProfile()
2025-12-04 11:45:58 [http-nio-8881-exec-7] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:45:58 [http-nio-8881-exec-7] INFO  c.r.b.service.RestaurantService - Fetching restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:45:58 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 11:45:58 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:45:58 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 11:45:58 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:46:21 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/restaurant/logo
2025-12-04 11:46:21 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:46:21 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/restaurant/logo
2025-12-04 11:46:21 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/restaurant/logo", parameters={multipart}
2025-12-04 11:46:21 [http-nio-8881-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-12-04 11:46:21 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:46:21 [http-nio-8881-exec-4] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-12-04 11:46:21 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 11:46:21 [http-nio-8881-exec-4] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/restaurant/logo.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:586)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 11:46:21 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:46:21 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T11:46:21.356258666, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 11:46:21 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/restaurant/logo.]
2025-12-04 11:46:21 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 11:46:21 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/restaurant/profile
2025-12-04 11:46:21 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:46:21 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/restaurant/profile
2025-12-04 11:46:21 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/api/restaurant/profile", parameters={}
2025-12-04 11:46:21 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#updateRestaurantProfile(UpdateRestaurantProfileRequest)
2025-12-04 11:46:21 [http-nio-8881-exec-10] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:46:21 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [UpdateRestaurantProfileRequest(restaurantName=Ganesh, ownerEmail=Ganesh@gmail.com, ownerName=null, o (truncated)...]
2025-12-04 11:46:21 [http-nio-8881-exec-10] INFO  c.r.b.service.RestaurantService - Updating restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:46:21 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 11:46:21 [http-nio-8881-exec-10] INFO  c.r.b.service.RestaurantService - Restaurant profile updated successfully for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:46:21 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    update
        public.tenants 
    set
        address=?,
        city=?,
        currency=?,
        gstin=?,
        is_active=?,
        logo_path=?,
        max_storage_gb=?,
        max_users=?,
        owner_email=?,
        owner_name=?,
        owner_phone=?,
        pincode=?,
        razorpay_customer_id=?,
        razorpay_subscription_id=?,
        restaurant_code=?,
        restaurant_name=?,
        service_charge_rate=?,
        state=?,
        subscription_end_date=?,
        subscription_plan=?,
        subscription_start_date=?,
        subscription_status=?,
        tax_rate=?,
        timezone=?,
        trial_end_date=?,
        updated_at=? 
    where
        id=?
2025-12-04 11:46:21 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:46:21 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 11:46:21 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:46:51 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/restaurant/logo
2025-12-04 11:46:51 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:46:51 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/restaurant/logo
2025-12-04 11:46:51 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/restaurant/logo", parameters={multipart}
2025-12-04 11:46:51 [http-nio-8881-exec-9] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-12-04 11:46:51 [http-nio-8881-exec-9] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:46:51 [http-nio-8881-exec-9] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-12-04 11:46:51 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 11:46:51 [http-nio-8881-exec-9] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/restaurant/logo.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:586)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 11:46:51 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:46:51 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T11:46:51.839492333, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 11:46:51 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource api/restaurant/logo.]
2025-12-04 11:46:51 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 11:46:51 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/restaurant/profile
2025-12-04 11:46:51 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:46:51 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/restaurant/profile
2025-12-04 11:46:51 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/api/restaurant/profile", parameters={}
2025-12-04 11:46:51 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#updateRestaurantProfile(UpdateRestaurantProfileRequest)
2025-12-04 11:46:51 [http-nio-8881-exec-2] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:46:51 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [UpdateRestaurantProfileRequest(restaurantName=Ganesh, ownerEmail=Ganesh@gmail.com, ownerName=null, o (truncated)...]
2025-12-04 11:46:51 [http-nio-8881-exec-2] INFO  c.r.b.service.RestaurantService - Updating restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:46:51 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 11:46:51 [http-nio-8881-exec-2] INFO  c.r.b.service.RestaurantService - Restaurant profile updated successfully for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:46:51 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:46:51 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 11:46:51 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:53:47 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-04 11:53:47 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-12-04 11:53:47 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-12-04 11:53:51 [main] INFO  c.r.b.RestaurantBillingApplication - Starting RestaurantBillingApplication using Java 17.0.17 with PID 1178690 (/home/ubuntu/Documents/Mine/Restaurant-BE/build/classes/java/main started by ubuntu in /home/ubuntu/Documents/Mine/Restaurant-BE)
2025-12-04 11:53:51 [main] DEBUG c.r.b.RestaurantBillingApplication - Running with Spring Boot v3.3.10, Spring v6.1.18
2025-12-04 11:53:51 [main] INFO  c.r.b.RestaurantBillingApplication - No active profile set, falling back to 1 default profile: "default"
2025-12-04 11:53:52 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-04 11:53:52 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 39 ms. Found 14 JPA repository interfaces.
2025-12-04 11:53:52 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8881 (http)
2025-12-04 11:53:52 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-04 11:53:52 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-12-04 11:53:52 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-12-04 11:53:52 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 885 ms
2025-12-04 11:53:52 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-04 11:53:52 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.3.Final
2025-12-04 11:53:52 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-12-04 11:53:53 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-04 11:53:53 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-12-04 11:53:53 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@2aa07d80
2025-12-04 11:53:53 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-12-04 11:53:53 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-04 11:53:53 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-04 11:53:54 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-04 11:53:54 [main] DEBUG c.r.b.s.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-12-04 11:53:54 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-04 11:53:55 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-12-04 11:53:55 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 45 mappings in 'requestMappingHandlerMapping'
2025-12-04 11:53:55 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /uploads/**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-12-04 11:53:55 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-04 11:53:55 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-04 11:53:55 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-04 11:53:55 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8881 (http) with context path '/'
2025-12-04 11:53:55 [main] INFO  c.r.b.RestaurantBillingApplication - Started RestaurantBillingApplication in 4.074 seconds (process running for 4.238)
2025-12-04 11:53:55 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-04 11:53:55 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-12-04 11:53:55 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-12-04 11:53:59 [main] INFO  c.r.b.RestaurantBillingApplication - Starting RestaurantBillingApplication using Java 17.0.17 with PID 1179113 (/home/ubuntu/Documents/Mine/Restaurant-BE/build/classes/java/main started by ubuntu in /home/ubuntu/Documents/Mine/Restaurant-BE)
2025-12-04 11:53:59 [main] DEBUG c.r.b.RestaurantBillingApplication - Running with Spring Boot v3.3.10, Spring v6.1.18
2025-12-04 11:53:59 [main] INFO  c.r.b.RestaurantBillingApplication - No active profile set, falling back to 1 default profile: "default"
2025-12-04 11:53:59 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-04 11:53:59 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 40 ms. Found 14 JPA repository interfaces.
2025-12-04 11:53:59 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8881 (http)
2025-12-04 11:53:59 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-04 11:53:59 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-12-04 11:54:00 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-12-04 11:54:00 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 913 ms
2025-12-04 11:54:00 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-04 11:54:00 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.3.Final
2025-12-04 11:54:00 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-12-04 11:54:00 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-04 11:54:00 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-12-04 11:54:00 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@4e61a863
2025-12-04 11:54:00 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-12-04 11:54:00 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-04 11:54:01 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-04 11:54:01 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-04 11:54:01 [main] DEBUG c.r.b.s.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-12-04 11:54:01 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-04 11:54:02 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-12-04 11:54:02 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 45 mappings in 'requestMappingHandlerMapping'
2025-12-04 11:54:02 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /uploads/**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-12-04 11:54:02 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-04 11:54:02 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-04 11:54:02 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-04 11:54:02 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8881 (http) with context path '/'
2025-12-04 11:54:02 [main] INFO  c.r.b.RestaurantBillingApplication - Started RestaurantBillingApplication in 3.966 seconds (process running for 4.128)
2025-12-04 11:56:38 [http-nio-8881-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-04 11:56:38 [http-nio-8881-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-12-04 11:56:38 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-12-04 11:56:38 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-12-04 11:56:38 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-12-04 11:56:38 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@7b83476f
2025-12-04 11:56:38 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@3c638904
2025-12-04 11:56:38 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-12-04 11:56:38 [http-nio-8881-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-12-04 11:56:38 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/restaurant/logo
2025-12-04 11:56:38 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:56:38 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/restaurant/logo
2025-12-04 11:56:38 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/restaurant/logo", parameters={multipart}
2025-12-04 11:56:38 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#uploadLogo(MultipartFile)
2025-12-04 11:56:38 [http-nio-8881-exec-1] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:56:38 [http-nio-8881-exec-1] DEBUG o.s.web.method.HandlerMethod - Could not resolve parameter [0] in public org.springframework.http.ResponseEntity<com.restaurant.billing.dto.auth.TenantDto> com.restaurant.billing.controller.RestaurantController.uploadLogo(org.springframework.web.multipart.MultipartFile) throws java.io.IOException: Required part 'logo' is not present.
2025-12-04 11:56:38 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 11:56:38 [http-nio-8881-exec-1] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
org.springframework.web.multipart.support.MissingServletRequestPartException: Required part 'logo' is not present.
	at org.springframework.web.method.annotation.RequestParamMethodArgumentResolver.handleMissingValueInternal(RequestParamMethodArgumentResolver.java:216)
	at org.springframework.web.method.annotation.RequestParamMethodArgumentResolver.handleMissingValue(RequestParamMethodArgumentResolver.java:196)
	at org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:125)
	at org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:122)
	at org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:224)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:178)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 11:56:38 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:56:38 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T11:56:38.882414813, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 11:56:38 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.multipart.support.MissingServletRequestPartException: Required part 'logo' is not present.]
2025-12-04 11:56:38 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 11:56:38 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/restaurant/profile
2025-12-04 11:56:38 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:56:38 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/restaurant/profile
2025-12-04 11:56:38 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/api/restaurant/profile", parameters={}
2025-12-04 11:56:38 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#updateRestaurantProfile(UpdateRestaurantProfileRequest)
2025-12-04 11:56:38 [http-nio-8881-exec-2] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:56:38 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [UpdateRestaurantProfileRequest(restaurantName=Ganesh, ownerEmail=Ganesh@gmail.com, ownerName=null, o (truncated)...]
2025-12-04 11:56:38 [http-nio-8881-exec-2] INFO  c.r.b.service.RestaurantService - Updating restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:56:38 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 11:56:38 [http-nio-8881-exec-2] INFO  c.r.b.service.RestaurantService - Restaurant profile updated successfully for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:56:38 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:56:39 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 11:56:39 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:56:55 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/restaurant/logo
2025-12-04 11:56:55 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:56:55 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/restaurant/logo
2025-12-04 11:56:55 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/restaurant/logo", parameters={multipart}
2025-12-04 11:56:55 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#uploadLogo(MultipartFile)
2025-12-04 11:56:55 [http-nio-8881-exec-3] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:56:55 [http-nio-8881-exec-3] DEBUG o.s.web.method.HandlerMethod - Could not resolve parameter [0] in public org.springframework.http.ResponseEntity<com.restaurant.billing.dto.auth.TenantDto> com.restaurant.billing.controller.RestaurantController.uploadLogo(org.springframework.web.multipart.MultipartFile) throws java.io.IOException: Required part 'logo' is not present.
2025-12-04 11:56:55 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 11:56:55 [http-nio-8881-exec-3] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
org.springframework.web.multipart.support.MissingServletRequestPartException: Required part 'logo' is not present.
	at org.springframework.web.method.annotation.RequestParamMethodArgumentResolver.handleMissingValueInternal(RequestParamMethodArgumentResolver.java:216)
	at org.springframework.web.method.annotation.RequestParamMethodArgumentResolver.handleMissingValue(RequestParamMethodArgumentResolver.java:196)
	at org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:125)
	at org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:122)
	at org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:224)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:178)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 11:56:55 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:56:55 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T11:56:55.017708268, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 11:56:55 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.multipart.support.MissingServletRequestPartException: Required part 'logo' is not present.]
2025-12-04 11:56:55 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 11:56:55 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/restaurant/profile
2025-12-04 11:56:55 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:56:55 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/restaurant/profile
2025-12-04 11:56:55 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/api/restaurant/profile", parameters={}
2025-12-04 11:56:55 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#updateRestaurantProfile(UpdateRestaurantProfileRequest)
2025-12-04 11:56:55 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:56:55 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [UpdateRestaurantProfileRequest(restaurantName=Ganesh, ownerEmail=Ganesh@gmail.com, ownerName=null, o (truncated)...]
2025-12-04 11:56:55 [http-nio-8881-exec-4] INFO  c.r.b.service.RestaurantService - Updating restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:56:55 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 11:56:55 [http-nio-8881-exec-4] INFO  c.r.b.service.RestaurantService - Restaurant profile updated successfully for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:56:55 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:56:55 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 11:56:55 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:57:03 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 11:57:03 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:57:03 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 11:57:03 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 11:57:03 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#getRestaurantProfile()
2025-12-04 11:57:03 [http-nio-8881-exec-5] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:57:03 [http-nio-8881-exec-5] INFO  c.r.b.service.RestaurantService - Fetching restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:57:03 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 11:57:03 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:57:03 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 11:57:03 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:57:27 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/restaurant/logo
2025-12-04 11:57:27 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:57:27 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/restaurant/logo
2025-12-04 11:57:27 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/restaurant/logo", parameters={multipart}
2025-12-04 11:57:27 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#uploadLogo(MultipartFile)
2025-12-04 11:57:27 [http-nio-8881-exec-6] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:57:27 [http-nio-8881-exec-6] DEBUG o.s.web.method.HandlerMethod - Could not resolve parameter [0] in public org.springframework.http.ResponseEntity<com.restaurant.billing.dto.auth.TenantDto> com.restaurant.billing.controller.RestaurantController.uploadLogo(org.springframework.web.multipart.MultipartFile) throws java.io.IOException: Required part 'logo' is not present.
2025-12-04 11:57:27 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 11:57:27 [http-nio-8881-exec-6] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
org.springframework.web.multipart.support.MissingServletRequestPartException: Required part 'logo' is not present.
	at org.springframework.web.method.annotation.RequestParamMethodArgumentResolver.handleMissingValueInternal(RequestParamMethodArgumentResolver.java:216)
	at org.springframework.web.method.annotation.RequestParamMethodArgumentResolver.handleMissingValue(RequestParamMethodArgumentResolver.java:196)
	at org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:125)
	at org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:122)
	at org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:224)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:178)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 11:57:27 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:57:27 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T11:57:27.481298336, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 11:57:27 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.multipart.support.MissingServletRequestPartException: Required part 'logo' is not present.]
2025-12-04 11:57:27 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 11:57:27 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/restaurant/profile
2025-12-04 11:57:27 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:57:27 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/restaurant/profile
2025-12-04 11:57:27 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/api/restaurant/profile", parameters={}
2025-12-04 11:57:27 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#updateRestaurantProfile(UpdateRestaurantProfileRequest)
2025-12-04 11:57:27 [http-nio-8881-exec-7] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:57:27 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [UpdateRestaurantProfileRequest(restaurantName=Ganesh, ownerEmail=Ganesh@gmail.com, ownerName=null, o (truncated)...]
2025-12-04 11:57:27 [http-nio-8881-exec-7] INFO  c.r.b.service.RestaurantService - Updating restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:57:27 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 11:57:27 [http-nio-8881-exec-7] INFO  c.r.b.service.RestaurantService - Restaurant profile updated successfully for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:57:27 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    update
        public.tenants 
    set
        address=?,
        city=?,
        currency=?,
        gstin=?,
        is_active=?,
        logo_path=?,
        max_storage_gb=?,
        max_users=?,
        owner_email=?,
        owner_name=?,
        owner_phone=?,
        pincode=?,
        razorpay_customer_id=?,
        razorpay_subscription_id=?,
        restaurant_code=?,
        restaurant_name=?,
        service_charge_rate=?,
        state=?,
        subscription_end_date=?,
        subscription_plan=?,
        subscription_start_date=?,
        subscription_status=?,
        tax_rate=?,
        timezone=?,
        trial_end_date=?,
        updated_at=? 
    where
        id=?
2025-12-04 11:57:27 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:57:27 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 11:57:27 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:59:42 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-04 11:59:42 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-12-04 11:59:42 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-12-04 11:59:48 [main] INFO  c.r.b.RestaurantBillingApplication - Starting RestaurantBillingApplication using Java 17.0.17 with PID 1185424 (/home/ubuntu/Documents/Mine/Restaurant-BE/build/classes/java/main started by ubuntu in /home/ubuntu/Documents/Mine/Restaurant-BE)
2025-12-04 11:59:48 [main] DEBUG c.r.b.RestaurantBillingApplication - Running with Spring Boot v3.3.10, Spring v6.1.18
2025-12-04 11:59:48 [main] INFO  c.r.b.RestaurantBillingApplication - No active profile set, falling back to 1 default profile: "default"
2025-12-04 11:59:48 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-04 11:59:48 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 41 ms. Found 14 JPA repository interfaces.
2025-12-04 11:59:49 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8881 (http)
2025-12-04 11:59:49 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-04 11:59:49 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-12-04 11:59:49 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-12-04 11:59:49 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 954 ms
2025-12-04 11:59:49 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-04 11:59:49 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.3.Final
2025-12-04 11:59:49 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-12-04 11:59:49 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-04 11:59:49 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-12-04 11:59:49 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@413eaf5d
2025-12-04 11:59:49 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-12-04 11:59:49 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-04 11:59:50 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-04 11:59:50 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-04 11:59:51 [main] DEBUG c.r.b.s.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-12-04 11:59:51 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-04 11:59:51 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-12-04 11:59:51 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 45 mappings in 'requestMappingHandlerMapping'
2025-12-04 11:59:51 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /uploads/**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-12-04 11:59:51 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-04 11:59:52 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-04 11:59:52 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-04 11:59:52 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8881 (http) with context path '/'
2025-12-04 11:59:52 [main] INFO  c.r.b.RestaurantBillingApplication - Started RestaurantBillingApplication in 4.141 seconds (process running for 4.316)
2025-12-04 11:59:57 [http-nio-8881-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-04 11:59:57 [http-nio-8881-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-12-04 11:59:57 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-12-04 11:59:57 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-12-04 11:59:57 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-12-04 11:59:57 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@55623ed5
2025-12-04 11:59:57 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@aab2419
2025-12-04 11:59:57 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-12-04 11:59:57 [http-nio-8881-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-12-04 11:59:57 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/restaurant/logo
2025-12-04 11:59:57 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:59:57 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/restaurant/logo
2025-12-04 11:59:57 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/restaurant/logo", parameters={multipart}
2025-12-04 11:59:57 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#uploadLogo(MultipartFile, MultipartFile, MultipartFile)
2025-12-04 11:59:57 [http-nio-8881-exec-1] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:59:57 [http-nio-8881-exec-1] INFO  c.r.b.service.RestaurantService - Uploading logo for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:59:57 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 11:59:57 [http-nio-8881-exec-1] INFO  c.r.b.service.FileStorageService - File stored: ./uploads/logos/66d8ac99-3f68-42a4-bad2-747c1e061cc8.png
2025-12-04 11:59:57 [http-nio-8881-exec-1] INFO  c.r.b.service.RestaurantService - Logo uploaded successfully for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:59:57 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    update
        public.tenants 
    set
        address=?,
        city=?,
        currency=?,
        gstin=?,
        is_active=?,
        logo_path=?,
        max_storage_gb=?,
        max_users=?,
        owner_email=?,
        owner_name=?,
        owner_phone=?,
        pincode=?,
        razorpay_customer_id=?,
        razorpay_subscription_id=?,
        restaurant_code=?,
        restaurant_name=?,
        service_charge_rate=?,
        state=?,
        subscription_end_date=?,
        subscription_plan=?,
        subscription_start_date=?,
        subscription_status=?,
        tax_rate=?,
        timezone=?,
        trial_end_date=?,
        updated_at=? 
    where
        id=?
2025-12-04 11:59:57 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:59:57 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 11:59:57 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 11:59:57 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/restaurant/profile
2025-12-04 11:59:57 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 11:59:57 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/restaurant/profile
2025-12-04 11:59:57 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/api/restaurant/profile", parameters={}
2025-12-04 11:59:57 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#updateRestaurantProfile(UpdateRestaurantProfileRequest)
2025-12-04 11:59:57 [http-nio-8881-exec-2] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:59:57 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [UpdateRestaurantProfileRequest(restaurantName=Ganesh, ownerEmail=Ganesh@gmail.com, ownerName=null, o (truncated)...]
2025-12-04 11:59:57 [http-nio-8881-exec-2] INFO  c.r.b.service.RestaurantService - Updating restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:59:57 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 11:59:57 [http-nio-8881-exec-2] INFO  c.r.b.service.RestaurantService - Restaurant profile updated successfully for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 11:59:57 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 11:59:57 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 11:59:57 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:00:17 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/restaurant/logo
2025-12-04 12:00:17 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:00:17 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/restaurant/logo
2025-12-04 12:00:17 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/restaurant/logo", parameters={multipart}
2025-12-04 12:00:17 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#uploadLogo(MultipartFile, MultipartFile, MultipartFile)
2025-12-04 12:00:17 [http-nio-8881-exec-3] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:00:17 [http-nio-8881-exec-3] INFO  c.r.b.service.RestaurantService - Uploading logo for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:00:17 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 12:00:17 [http-nio-8881-exec-3] INFO  c.r.b.service.FileStorageService - File deleted: ./uploads/logos/66d8ac99-3f68-42a4-bad2-747c1e061cc8.png
2025-12-04 12:00:17 [http-nio-8881-exec-3] INFO  c.r.b.service.FileStorageService - File stored: ./uploads/logos/875c1fba-9a1e-465d-90a3-8819df72656e.png
2025-12-04 12:00:17 [http-nio-8881-exec-3] INFO  c.r.b.service.RestaurantService - Logo uploaded successfully for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:00:17 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    update
        public.tenants 
    set
        address=?,
        city=?,
        currency=?,
        gstin=?,
        is_active=?,
        logo_path=?,
        max_storage_gb=?,
        max_users=?,
        owner_email=?,
        owner_name=?,
        owner_phone=?,
        pincode=?,
        razorpay_customer_id=?,
        razorpay_subscription_id=?,
        restaurant_code=?,
        restaurant_name=?,
        service_charge_rate=?,
        state=?,
        subscription_end_date=?,
        subscription_plan=?,
        subscription_start_date=?,
        subscription_status=?,
        tax_rate=?,
        timezone=?,
        trial_end_date=?,
        updated_at=? 
    where
        id=?
2025-12-04 12:00:17 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:00:17 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 12:00:17 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:00:17 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/restaurant/profile
2025-12-04 12:00:17 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:00:17 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/restaurant/profile
2025-12-04 12:00:17 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/api/restaurant/profile", parameters={}
2025-12-04 12:00:17 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#updateRestaurantProfile(UpdateRestaurantProfileRequest)
2025-12-04 12:00:17 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:00:17 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [UpdateRestaurantProfileRequest(restaurantName=Ganesh, ownerEmail=Ganesh@gmail.com, ownerName=null, o (truncated)...]
2025-12-04 12:00:17 [http-nio-8881-exec-4] INFO  c.r.b.service.RestaurantService - Updating restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:00:17 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 12:00:17 [http-nio-8881-exec-4] INFO  c.r.b.service.RestaurantService - Restaurant profile updated successfully for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:00:17 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:00:17 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 12:00:17 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:00:42 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 12:00:42 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:00:42 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 12:00:42 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 12:00:42 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#getRestaurantProfile()
2025-12-04 12:00:42 [http-nio-8881-exec-5] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:00:42 [http-nio-8881-exec-5] INFO  c.r.b.service.RestaurantService - Fetching restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:00:42 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 12:00:42 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:00:42 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 12:00:42 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:00:54 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/restaurant/logo
2025-12-04 12:00:54 [http-nio-8881-exec-6] ERROR c.r.billing.security.JwtUtil - Invalid JWT token: JWT expired at 2025-12-04T06:30:44Z. Current time: 2025-12-04T06:30:54Z, a difference of 10252 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-12-04 12:00:54 [http-nio-8881-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-04 12:00:54 [http-nio-8881-exec-6] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-12-04 12:00:54 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /error
2025-12-04 12:00:54 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /error
2025-12-04 12:00:54 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for POST "/error", parameters={multipart}
2025-12-04 12:00:54 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-12-04 12:00:54 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:00:54 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Thu Dec 04 12:00:54 IST 2025, status=403, error=Forbidden, message=Access Denied, path=/a (truncated)...]
2025-12-04 12:00:54 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-12-04 12:00:54 [http-nio-8881-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-04 12:00:54 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/restaurant/profile
2025-12-04 12:00:54 [http-nio-8881-exec-7] ERROR c.r.billing.security.JwtUtil - Invalid JWT token: JWT expired at 2025-12-04T06:30:44Z. Current time: 2025-12-04T06:30:54Z, a difference of 10312 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-12-04 12:00:54 [http-nio-8881-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-04 12:00:54 [http-nio-8881-exec-7] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-12-04 12:00:54 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /error
2025-12-04 12:00:54 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /error
2025-12-04 12:00:54 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for PUT "/error", parameters={}
2025-12-04 12:00:54 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-12-04 12:00:54 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:00:54 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Thu Dec 04 12:00:54 IST 2025, status=403, error=Forbidden, message=Access Denied, path=/a (truncated)...]
2025-12-04 12:00:54 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-12-04 12:00:54 [http-nio-8881-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-04 12:01:34 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/restaurant/logo
2025-12-04 12:01:34 [http-nio-8881-exec-8] ERROR c.r.billing.security.JwtUtil - Invalid JWT token: JWT expired at 2025-12-04T06:30:44Z. Current time: 2025-12-04T06:31:34Z, a difference of 50316 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-12-04 12:01:34 [http-nio-8881-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-04 12:01:34 [http-nio-8881-exec-8] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-12-04 12:01:34 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /error
2025-12-04 12:01:34 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /error
2025-12-04 12:01:34 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for POST "/error", parameters={multipart}
2025-12-04 12:01:34 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-12-04 12:01:34 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:01:34 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Thu Dec 04 12:01:34 IST 2025, status=403, error=Forbidden, message=Access Denied, path=/a (truncated)...]
2025-12-04 12:01:34 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-12-04 12:01:34 [http-nio-8881-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-04 12:01:34 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/restaurant/profile
2025-12-04 12:01:34 [http-nio-8881-exec-9] ERROR c.r.billing.security.JwtUtil - Invalid JWT token: JWT expired at 2025-12-04T06:30:44Z. Current time: 2025-12-04T06:31:34Z, a difference of 50350 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-12-04 12:01:34 [http-nio-8881-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-04 12:01:34 [http-nio-8881-exec-9] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-12-04 12:01:34 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /error
2025-12-04 12:01:34 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /error
2025-12-04 12:01:34 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for PUT "/error", parameters={}
2025-12-04 12:01:34 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-12-04 12:01:34 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:01:34 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Thu Dec 04 12:01:34 IST 2025, status=403, error=Forbidden, message=Access Denied, path=/a (truncated)...]
2025-12-04 12:01:34 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-12-04 12:01:34 [http-nio-8881-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-04 12:01:40 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 12:01:40 [http-nio-8881-exec-10] ERROR c.r.billing.security.JwtUtil - Invalid JWT token: JWT expired at 2025-12-04T06:30:44Z. Current time: 2025-12-04T06:31:40Z, a difference of 56962 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-12-04 12:01:40 [http-nio-8881-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-04 12:01:40 [http-nio-8881-exec-10] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-12-04 12:01:40 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-12-04 12:01:40 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-12-04 12:01:40 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-12-04 12:01:40 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-12-04 12:01:40 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:01:40 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Thu Dec 04 12:01:40 IST 2025, status=403, error=Forbidden, message=Access Denied, path=/a (truncated)...]
2025-12-04 12:01:40 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-12-04 12:01:40 [http-nio-8881-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-04 12:01:42 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 12:01:42 [http-nio-8881-exec-1] ERROR c.r.billing.security.JwtUtil - Invalid JWT token: JWT expired at 2025-12-04T06:30:44Z. Current time: 2025-12-04T06:31:42Z, a difference of 58316 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-12-04 12:01:42 [http-nio-8881-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-04 12:01:42 [http-nio-8881-exec-1] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-12-04 12:01:42 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-12-04 12:01:42 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-12-04 12:01:42 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-12-04 12:01:42 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-12-04 12:01:42 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:01:42 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Thu Dec 04 12:01:42 IST 2025, status=403, error=Forbidden, message=Access Denied, path=/a (truncated)...]
2025-12-04 12:01:42 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-12-04 12:01:42 [http-nio-8881-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-04 12:02:05 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-04 12:02:05 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-12-04 12:02:05 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-12-04 12:02:09 [main] INFO  c.r.b.RestaurantBillingApplication - Starting RestaurantBillingApplication using Java 17.0.17 with PID 1188571 (/home/ubuntu/Documents/Mine/Restaurant-BE/build/classes/java/main started by ubuntu in /home/ubuntu/Documents/Mine/Restaurant-BE)
2025-12-04 12:02:09 [main] DEBUG c.r.b.RestaurantBillingApplication - Running with Spring Boot v3.3.10, Spring v6.1.18
2025-12-04 12:02:09 [main] INFO  c.r.b.RestaurantBillingApplication - No active profile set, falling back to 1 default profile: "default"
2025-12-04 12:02:10 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-04 12:02:10 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 44 ms. Found 14 JPA repository interfaces.
2025-12-04 12:02:10 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8881 (http)
2025-12-04 12:02:10 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-04 12:02:10 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-12-04 12:02:10 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-12-04 12:02:10 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 960 ms
2025-12-04 12:02:11 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-04 12:02:11 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.3.Final
2025-12-04 12:02:11 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-12-04 12:02:11 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-04 12:02:11 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-12-04 12:02:11 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@3e28af44
2025-12-04 12:02:11 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-12-04 12:02:11 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-04 12:02:12 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-04 12:02:12 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-04 12:02:12 [main] DEBUG c.r.b.s.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-12-04 12:02:12 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-04 12:02:13 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-12-04 12:02:13 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 45 mappings in 'requestMappingHandlerMapping'
2025-12-04 12:02:13 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /uploads/**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-12-04 12:02:13 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-04 12:02:13 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-04 12:02:13 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-04 12:02:13 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8881 (http) with context path '/'
2025-12-04 12:02:13 [main] INFO  c.r.b.RestaurantBillingApplication - Started RestaurantBillingApplication in 4.246 seconds (process running for 4.411)
2025-12-04 12:03:29 [http-nio-8881-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-04 12:03:29 [http-nio-8881-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-12-04 12:03:29 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-12-04 12:03:29 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-12-04 12:03:29 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-12-04 12:03:29 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@32f53573
2025-12-04 12:03:29 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@387f581e
2025-12-04 12:03:29 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-12-04 12:03:29 [http-nio-8881-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-12-04 12:03:29 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/auth/login
2025-12-04 12:03:29 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-12-04 12:03:29 [http-nio-8881-exec-2] ERROR c.r.billing.security.JwtUtil - Invalid JWT token: JWT expired at 2025-12-04T06:23:59Z. Current time: 2025-12-04T06:33:29Z, a difference of 570445 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-12-04 12:03:29 [http-nio-8881-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-04 12:03:29 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-12-04 12:03:29 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-12-04 12:03:29 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.AuthController#login(LoginRequest)
2025-12-04 12:03:29 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(restaurantCode=REST14DAA490, username=Ganesh@gmail.com, password=Rest@1234)]
2025-12-04 12:03:29 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.restaurant_code=?
2025-12-04 12:03:29 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=? 
        and u1_0.tenant_id=?
2025-12-04 12:03:29 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    update
        public.users 
    set
        auth_provider=?,
        email=?,
        google_id=?,
        is_active=?,
        last_login=?,
        name=?,
        password_hash=?,
        phone=?,
        refresh_token=?,
        refresh_token_expiry=?,
        role=?,
        tenant_id=?,
        updated_at=? 
    where
        id=?
2025-12-04 12:03:29 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:03:29 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiT1dORVIiLCJ0ZW5hbnRJZCI6ImNjNzFkN2U0LWNmNj (truncated)...]
2025-12-04 12:03:29 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:03:29 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/today-sales
2025-12-04 12:03:29 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/active-orders
2025-12-04 12:03:29 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/pending-payments
2025-12-04 12:03:29 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/tables-occupied
2025-12-04 12:03:29 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/stats
2025-12-04 12:03:29 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/today-sales
2025-12-04 12:03:29 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/pending-payments
2025-12-04 12:03:29 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/tables-occupied
2025-12-04 12:03:29 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/active-orders
2025-12-04 12:03:29 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/stats
2025-12-04 12:03:29 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:03:29 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:03:30 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:03:30 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:03:30 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:03:30 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/pending-payments
2025-12-04 12:03:30 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/today-sales
2025-12-04 12:03:30 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/active-orders
2025-12-04 12:03:30 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/tables-occupied
2025-12-04 12:03:30 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/today-sales", parameters={}
2025-12-04 12:03:30 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/stats
2025-12-04 12:03:30 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/stats", parameters={}
2025-12-04 12:03:30 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getDashboardStats()
2025-12-04 12:03:30 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/pending-payments", parameters={}
2025-12-04 12:03:30 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/active-orders", parameters={}
2025-12-04 12:03:30 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/tables-occupied", parameters={}
2025-12-04 12:03:30 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTodaySales()
2025-12-04 12:03:30 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getPendingPayments()
2025-12-04 12:03:30 [http-nio-8881-exec-8] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:03:30 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getActiveOrders()
2025-12-04 12:03:30 [http-nio-8881-exec-10] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:03:30 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTablesOccupied()
2025-12-04 12:03:30 [http-nio-8881-exec-2] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:03:30 [http-nio-8881-exec-1] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:03:30 [http-nio-8881-exec-9] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:03:30 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 12:03:30 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:03:30 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 12:03:30 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:03:30 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 12:03:30 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 12:03:30 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 12:03:30 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:03:30 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 12:03:30 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 12:03:30 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:03:30 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 12:03:30 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:03:30 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 12:03:30 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:03:30 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 12:03:30 [http-nio-8881-exec-8] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session
	at org.hibernate.collection.spi.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:636)
	at org.hibernate.collection.spi.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:219)
	at org.hibernate.collection.spi.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:615)
	at org.hibernate.collection.spi.AbstractPersistentCollection.read(AbstractPersistentCollection.java:138)
	at org.hibernate.collection.spi.PersistentBag.iterator(PersistentBag.java:369)
	at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1842)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.reduce(ReferencePipeline.java:657)
	at com.restaurant.billing.service.DashboardService.getTodaySales(DashboardService.java:80)
	at com.restaurant.billing.controller.DashboardController.getTodaySales(DashboardController.java:24)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 12:03:30 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 12:03:30 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:03:30 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T12:03:30.059984539, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 12:03:30 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session]
2025-12-04 12:03:30 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 12:03:30 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 12:03:30 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:03:30 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{tablesOccupied=0, pendingPayments=0, activeOrders=0, todaySales=0}]
2025-12-04 12:03:30 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:03:30 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/orders
2025-12-04 12:03:30 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/orders
2025-12-04 12:03:30 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:03:30 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/orders
2025-12-04 12:03:30 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/orders", parameters={}
2025-12-04 12:03:30 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#getAllOrders()
2025-12-04 12:03:30 [http-nio-8881-exec-5] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:03:30 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 12:03:30 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:03:30 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:03:30 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:03:30 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:03:30 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:03:30 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:03:30 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:03:30 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:03:30 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:03:30 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:03:30 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:03:30 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:03:30 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:03:30 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[OrderDto(id=3d2cc165-482d-4290-b220-105d1ad18880, orderNumber=ORD1764763565538, tableId=null, table (truncated)...]
2025-12-04 12:03:30 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:03:38 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/restaurant/profile
2025-12-04 12:03:38 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 12:03:38 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:03:38 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 12:03:38 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 12:03:38 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#getRestaurantProfile()
2025-12-04 12:03:38 [http-nio-8881-exec-6] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:03:38 [http-nio-8881-exec-6] INFO  c.r.b.service.RestaurantService - Fetching restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:03:38 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 12:03:38 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:03:38 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 12:03:38 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:03:58 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/restaurant/logo
2025-12-04 12:03:58 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/restaurant/logo
2025-12-04 12:03:58 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:03:58 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/restaurant/logo
2025-12-04 12:03:58 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/restaurant/logo", parameters={multipart}
2025-12-04 12:03:58 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#uploadLogo(MultipartFile, MultipartFile, MultipartFile)
2025-12-04 12:03:58 [http-nio-8881-exec-1] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:03:58 [http-nio-8881-exec-1] INFO  c.r.b.service.RestaurantService - Uploading logo for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:03:58 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 12:03:58 [http-nio-8881-exec-1] INFO  c.r.b.service.FileStorageService - File deleted: ./uploads/logos/875c1fba-9a1e-465d-90a3-8819df72656e.png
2025-12-04 12:03:58 [http-nio-8881-exec-1] INFO  c.r.b.service.FileStorageService - File stored: ./uploads/logos/beb184af-0003-4163-b4b7-82c81a9adbf3.png
2025-12-04 12:03:58 [http-nio-8881-exec-1] INFO  c.r.b.service.RestaurantService - Logo uploaded successfully for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:03:58 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    update
        public.tenants 
    set
        address=?,
        city=?,
        currency=?,
        gstin=?,
        is_active=?,
        logo_path=?,
        max_storage_gb=?,
        max_users=?,
        owner_email=?,
        owner_name=?,
        owner_phone=?,
        pincode=?,
        razorpay_customer_id=?,
        razorpay_subscription_id=?,
        restaurant_code=?,
        restaurant_name=?,
        service_charge_rate=?,
        state=?,
        subscription_end_date=?,
        subscription_plan=?,
        subscription_start_date=?,
        subscription_status=?,
        tax_rate=?,
        timezone=?,
        trial_end_date=?,
        updated_at=? 
    where
        id=?
2025-12-04 12:03:58 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:03:58 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 12:03:58 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:03:58 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/restaurant/profile
2025-12-04 12:03:58 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:03:58 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/restaurant/profile
2025-12-04 12:03:58 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/api/restaurant/profile", parameters={}
2025-12-04 12:03:58 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#updateRestaurantProfile(UpdateRestaurantProfileRequest)
2025-12-04 12:03:58 [http-nio-8881-exec-9] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:03:58 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [UpdateRestaurantProfileRequest(restaurantName=Ganesh, ownerEmail=Ganesh@gmail.com, ownerName=null, o (truncated)...]
2025-12-04 12:03:58 [http-nio-8881-exec-9] INFO  c.r.b.service.RestaurantService - Updating restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:03:58 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 12:03:58 [http-nio-8881-exec-9] INFO  c.r.b.service.RestaurantService - Restaurant profile updated successfully for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:03:58 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    update
        public.tenants 
    set
        address=?,
        city=?,
        currency=?,
        gstin=?,
        is_active=?,
        logo_path=?,
        max_storage_gb=?,
        max_users=?,
        owner_email=?,
        owner_name=?,
        owner_phone=?,
        pincode=?,
        razorpay_customer_id=?,
        razorpay_subscription_id=?,
        restaurant_code=?,
        restaurant_name=?,
        service_charge_rate=?,
        state=?,
        subscription_end_date=?,
        subscription_plan=?,
        subscription_start_date=?,
        subscription_status=?,
        tax_rate=?,
        timezone=?,
        trial_end_date=?,
        updated_at=? 
    where
        id=?
2025-12-04 12:03:58 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:03:58 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 12:03:58 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:06:42 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/auth/login
2025-12-04 12:06:42 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-12-04 12:06:42 [http-nio-8881-exec-4] ERROR c.r.billing.security.JwtUtil - Invalid JWT token: JWT expired at 2025-12-04T06:23:59Z. Current time: 2025-12-04T06:36:42Z, a difference of 763842 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-12-04 12:06:42 [http-nio-8881-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-04 12:06:42 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-12-04 12:06:42 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-12-04 12:06:42 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.AuthController#login(LoginRequest)
2025-12-04 12:06:42 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(restaurantCode=REST14DAA490, username=Ganesh@gmail.com, password=Rest@1234)]
2025-12-04 12:06:42 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.restaurant_code=?
2025-12-04 12:06:42 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=? 
        and u1_0.tenant_id=?
2025-12-04 12:06:42 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    update
        public.users 
    set
        auth_provider=?,
        email=?,
        google_id=?,
        is_active=?,
        last_login=?,
        name=?,
        password_hash=?,
        phone=?,
        refresh_token=?,
        refresh_token_expiry=?,
        role=?,
        tenant_id=?,
        updated_at=? 
    where
        id=?
2025-12-04 12:06:42 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:06:42 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiT1dORVIiLCJ0ZW5hbnRJZCI6ImNjNzFkN2U0LWNmNj (truncated)...]
2025-12-04 12:06:42 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:06:43 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/today-sales
2025-12-04 12:06:43 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/active-orders
2025-12-04 12:06:43 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/pending-payments
2025-12-04 12:06:43 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/tables-occupied
2025-12-04 12:06:43 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/stats
2025-12-04 12:06:43 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/today-sales
2025-12-04 12:06:43 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/active-orders
2025-12-04 12:06:43 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/pending-payments
2025-12-04 12:06:43 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/tables-occupied
2025-12-04 12:06:43 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/stats
2025-12-04 12:06:43 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:06:43 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:06:43 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:06:43 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:06:43 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:06:43 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/today-sales
2025-12-04 12:06:43 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/today-sales", parameters={}
2025-12-04 12:06:43 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/tables-occupied
2025-12-04 12:06:43 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTodaySales()
2025-12-04 12:06:43 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/tables-occupied", parameters={}
2025-12-04 12:06:43 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/stats
2025-12-04 12:06:43 [http-nio-8881-exec-8] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:06:43 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/stats", parameters={}
2025-12-04 12:06:43 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTablesOccupied()
2025-12-04 12:06:43 [http-nio-8881-exec-5] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:06:43 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getDashboardStats()
2025-12-04 12:06:43 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/active-orders
2025-12-04 12:06:43 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/active-orders", parameters={}
2025-12-04 12:06:43 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:06:43 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getActiveOrders()
2025-12-04 12:06:43 [http-nio-8881-exec-2] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:06:43 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 12:06:43 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/pending-payments
2025-12-04 12:06:43 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/pending-payments", parameters={}
2025-12-04 12:06:43 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getPendingPayments()
2025-12-04 12:06:43 [http-nio-8881-exec-3] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:06:43 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 12:06:43 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 12:06:43 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 12:06:43 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:06:43 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 12:06:43 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 12:06:43 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:06:43 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 12:06:43 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 12:06:43 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:06:43 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:06:43 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 12:06:43 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 12:06:43 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:06:43 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:06:43 [http-nio-8881-exec-8] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session
	at org.hibernate.collection.spi.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:636)
	at org.hibernate.collection.spi.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:219)
	at org.hibernate.collection.spi.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:615)
	at org.hibernate.collection.spi.AbstractPersistentCollection.read(AbstractPersistentCollection.java:138)
	at org.hibernate.collection.spi.PersistentBag.iterator(PersistentBag.java:369)
	at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1842)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.reduce(ReferencePipeline.java:657)
	at com.restaurant.billing.service.DashboardService.getTodaySales(DashboardService.java:80)
	at com.restaurant.billing.controller.DashboardController.getTodaySales(DashboardController.java:24)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 12:06:43 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:06:43 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T12:06:43.234188647, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 12:06:43 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session]
2025-12-04 12:06:43 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 12:06:43 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 12:06:43 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 12:06:43 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:06:43 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{tablesOccupied=0, pendingPayments=0, activeOrders=0, todaySales=0}]
2025-12-04 12:06:43 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:06:43 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/orders
2025-12-04 12:06:43 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/orders
2025-12-04 12:06:43 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:06:43 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/orders
2025-12-04 12:06:43 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/orders", parameters={}
2025-12-04 12:06:43 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#getAllOrders()
2025-12-04 12:06:43 [http-nio-8881-exec-7] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:06:43 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 12:06:43 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:06:43 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:06:43 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:06:43 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:06:43 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:06:43 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:06:43 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:06:43 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:06:43 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:06:43 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:06:43 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:06:43 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:06:43 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:06:43 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[OrderDto(id=3d2cc165-482d-4290-b220-105d1ad18880, orderNumber=ORD1764763565538, tableId=null, table (truncated)...]
2025-12-04 12:06:43 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:06:45 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/restaurant/profile
2025-12-04 12:06:45 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 12:06:45 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:06:45 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 12:06:45 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 12:06:45 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#getRestaurantProfile()
2025-12-04 12:06:45 [http-nio-8881-exec-9] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:06:45 [http-nio-8881-exec-9] INFO  c.r.b.service.RestaurantService - Fetching restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:06:45 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 12:06:45 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:06:45 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 12:06:45 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:06:45 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /uploads/logos/beb184af-0003-4163-b4b7-82c81a9adbf3.png
2025-12-04 12:06:45 [http-nio-8881-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-04 12:06:45 [http-nio-8881-exec-10] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-12-04 12:06:45 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-12-04 12:06:45 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-12-04 12:06:45 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-12-04 12:06:45 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-12-04 12:06:45 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:06:45 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Thu Dec 04 12:06:45 IST 2025, status=403, error=Forbidden, message=Access Denied, path=/u (truncated)...]
2025-12-04 12:06:45 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-12-04 12:06:45 [http-nio-8881-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-04 12:07:50 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/restaurant/logo
2025-12-04 12:07:50 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/restaurant/logo
2025-12-04 12:07:50 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:07:50 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/restaurant/logo
2025-12-04 12:07:50 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/restaurant/logo", parameters={multipart}
2025-12-04 12:07:50 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#uploadLogo(MultipartFile, MultipartFile, MultipartFile)
2025-12-04 12:07:50 [http-nio-8881-exec-6] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:07:50 [http-nio-8881-exec-6] INFO  c.r.b.service.RestaurantService - Uploading logo for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:07:50 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 12:07:50 [http-nio-8881-exec-6] INFO  c.r.b.service.FileStorageService - File deleted: ./uploads/logos/beb184af-0003-4163-b4b7-82c81a9adbf3.png
2025-12-04 12:07:50 [http-nio-8881-exec-6] INFO  c.r.b.service.FileStorageService - File stored: ./uploads/logos/5efe47bb-98d2-46b7-b142-17a3d86a6fd5.png
2025-12-04 12:07:50 [http-nio-8881-exec-6] INFO  c.r.b.service.RestaurantService - Logo uploaded successfully for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:07:50 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    update
        public.tenants 
    set
        address=?,
        city=?,
        currency=?,
        gstin=?,
        is_active=?,
        logo_path=?,
        max_storage_gb=?,
        max_users=?,
        owner_email=?,
        owner_name=?,
        owner_phone=?,
        pincode=?,
        razorpay_customer_id=?,
        razorpay_subscription_id=?,
        restaurant_code=?,
        restaurant_name=?,
        service_charge_rate=?,
        state=?,
        subscription_end_date=?,
        subscription_plan=?,
        subscription_start_date=?,
        subscription_status=?,
        tax_rate=?,
        timezone=?,
        trial_end_date=?,
        updated_at=? 
    where
        id=?
2025-12-04 12:07:50 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:07:50 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 12:07:50 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:07:50 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/restaurant/profile
2025-12-04 12:07:50 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:07:50 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/restaurant/profile
2025-12-04 12:07:50 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/api/restaurant/profile", parameters={}
2025-12-04 12:07:50 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#updateRestaurantProfile(UpdateRestaurantProfileRequest)
2025-12-04 12:07:50 [http-nio-8881-exec-7] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:07:50 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [UpdateRestaurantProfileRequest(restaurantName=Ganesh, ownerEmail=Ganesh@gmail.com, ownerName=null, o (truncated)...]
2025-12-04 12:07:50 [http-nio-8881-exec-7] INFO  c.r.b.service.RestaurantService - Updating restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:07:50 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 12:07:50 [http-nio-8881-exec-7] INFO  c.r.b.service.RestaurantService - Restaurant profile updated successfully for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:07:50 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    update
        public.tenants 
    set
        address=?,
        city=?,
        currency=?,
        gstin=?,
        is_active=?,
        logo_path=?,
        max_storage_gb=?,
        max_users=?,
        owner_email=?,
        owner_name=?,
        owner_phone=?,
        pincode=?,
        razorpay_customer_id=?,
        razorpay_subscription_id=?,
        restaurant_code=?,
        restaurant_name=?,
        service_charge_rate=?,
        state=?,
        subscription_end_date=?,
        subscription_plan=?,
        subscription_start_date=?,
        subscription_status=?,
        tax_rate=?,
        timezone=?,
        trial_end_date=?,
        updated_at=? 
    where
        id=?
2025-12-04 12:07:50 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:07:50 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 12:07:50 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:07:53 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 12:07:53 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:07:53 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 12:07:53 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 12:07:53 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#getRestaurantProfile()
2025-12-04 12:07:53 [http-nio-8881-exec-1] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:07:53 [http-nio-8881-exec-1] INFO  c.r.b.service.RestaurantService - Fetching restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:07:53 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 12:07:53 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:07:53 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 12:07:53 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:07:53 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /uploads/logos/5efe47bb-98d2-46b7-b142-17a3d86a6fd5.png
2025-12-04 12:07:53 [http-nio-8881-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-04 12:07:53 [http-nio-8881-exec-9] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-12-04 12:07:53 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-12-04 12:07:53 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-12-04 12:07:53 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-12-04 12:07:53 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-12-04 12:07:53 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:07:53 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Thu Dec 04 12:07:53 IST 2025, status=403, error=Forbidden, message=Access Denied, path=/u (truncated)...]
2025-12-04 12:07:53 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-12-04 12:07:53 [http-nio-8881-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-04 12:22:41 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/auth/login
2025-12-04 12:22:41 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-12-04 12:22:41 [http-nio-8881-exec-8] ERROR c.r.billing.security.JwtUtil - Invalid JWT token: JWT expired at 2025-12-04T06:23:59Z. Current time: 2025-12-04T06:52:41Z, a difference of 1722689 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-12-04 12:22:41 [http-nio-8881-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-04 12:22:41 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-12-04 12:22:41 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-12-04 12:22:41 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.AuthController#login(LoginRequest)
2025-12-04 12:22:41 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(restaurantCode=REST14DAA490, username=Ganesh@gmail.com, password=Rest@1234)]
2025-12-04 12:22:41 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.restaurant_code=?
2025-12-04 12:22:41 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=? 
        and u1_0.tenant_id=?
2025-12-04 12:22:41 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    update
        public.users 
    set
        auth_provider=?,
        email=?,
        google_id=?,
        is_active=?,
        last_login=?,
        name=?,
        password_hash=?,
        phone=?,
        refresh_token=?,
        refresh_token_expiry=?,
        role=?,
        tenant_id=?,
        updated_at=? 
    where
        id=?
2025-12-04 12:22:41 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:22:41 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiT1dORVIiLCJ0ZW5hbnRJZCI6ImNjNzFkN2U0LWNmNj (truncated)...]
2025-12-04 12:22:41 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:22:42 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/today-sales
2025-12-04 12:22:42 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/active-orders
2025-12-04 12:22:42 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/pending-payments
2025-12-04 12:22:42 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/tables-occupied
2025-12-04 12:22:42 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/today-sales
2025-12-04 12:22:42 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/stats
2025-12-04 12:22:42 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/active-orders
2025-12-04 12:22:42 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/pending-payments
2025-12-04 12:22:42 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/tables-occupied
2025-12-04 12:22:42 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/stats
2025-12-04 12:22:42 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:22:42 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:22:42 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:22:42 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:22:42 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/today-sales
2025-12-04 12:22:42 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/today-sales", parameters={}
2025-12-04 12:22:42 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTodaySales()
2025-12-04 12:22:42 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/active-orders
2025-12-04 12:22:42 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/active-orders", parameters={}
2025-12-04 12:22:42 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/tables-occupied
2025-12-04 12:22:42 [http-nio-8881-exec-7] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:22:42 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getActiveOrders()
2025-12-04 12:22:42 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/tables-occupied", parameters={}
2025-12-04 12:22:42 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/pending-payments
2025-12-04 12:22:42 [http-nio-8881-exec-9] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:22:42 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/pending-payments", parameters={}
2025-12-04 12:22:42 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTablesOccupied()
2025-12-04 12:22:42 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getPendingPayments()
2025-12-04 12:22:42 [http-nio-8881-exec-3] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:22:42 [http-nio-8881-exec-10] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:22:42 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:22:42 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 12:22:42 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 12:22:42 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 12:22:42 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 12:22:42 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:22:42 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/stats
2025-12-04 12:22:42 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 12:22:42 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/stats", parameters={}
2025-12-04 12:22:42 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getDashboardStats()
2025-12-04 12:22:42 [http-nio-8881-exec-8] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:22:42 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:22:42 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:22:42 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 12:22:42 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 12:22:42 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:22:42 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 12:22:42 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 12:22:42 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:22:42 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:22:42 [http-nio-8881-exec-7] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session
	at org.hibernate.collection.spi.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:636)
	at org.hibernate.collection.spi.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:219)
	at org.hibernate.collection.spi.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:615)
	at org.hibernate.collection.spi.AbstractPersistentCollection.read(AbstractPersistentCollection.java:138)
	at org.hibernate.collection.spi.PersistentBag.iterator(PersistentBag.java:369)
	at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1842)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.reduce(ReferencePipeline.java:657)
	at com.restaurant.billing.service.DashboardService.getTodaySales(DashboardService.java:80)
	at com.restaurant.billing.controller.DashboardController.getTodaySales(DashboardController.java:24)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 12:22:42 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:22:42 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T12:22:42.076008462, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 12:22:42 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 12:22:42 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session]
2025-12-04 12:22:42 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 12:22:42 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 12:22:42 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 12:22:42 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:22:42 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{tablesOccupied=0, pendingPayments=0, activeOrders=0, todaySales=0}]
2025-12-04 12:22:42 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:22:42 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/orders
2025-12-04 12:22:42 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/orders
2025-12-04 12:22:42 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:22:42 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/orders
2025-12-04 12:22:42 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/orders", parameters={}
2025-12-04 12:22:42 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#getAllOrders()
2025-12-04 12:22:42 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:22:42 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 12:22:42 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:22:42 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:22:42 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:22:42 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:22:42 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:22:42 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:22:42 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:22:42 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:22:42 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:22:42 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:22:42 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:22:42 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:22:42 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:22:42 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[OrderDto(id=3d2cc165-482d-4290-b220-105d1ad18880, orderNumber=ORD1764763565538, tableId=null, table (truncated)...]
2025-12-04 12:22:42 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:22:43 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/restaurant/profile
2025-12-04 12:22:43 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 12:22:43 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:22:43 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 12:22:43 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 12:22:43 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#getRestaurantProfile()
2025-12-04 12:22:43 [http-nio-8881-exec-6] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:22:43 [http-nio-8881-exec-6] INFO  c.r.b.service.RestaurantService - Fetching restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:22:43 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 12:22:43 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:22:43 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 12:22:43 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:22:43 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /uploads/logos/5efe47bb-98d2-46b7-b142-17a3d86a6fd5.png
2025-12-04 12:22:43 [http-nio-8881-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-04 12:22:43 [http-nio-8881-exec-1] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-12-04 12:22:43 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-12-04 12:22:43 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-12-04 12:22:43 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-12-04 12:22:43 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-12-04 12:22:43 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:22:43 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Thu Dec 04 12:22:43 IST 2025, status=403, error=Forbidden, message=Access Denied, path=/u (truncated)...]
2025-12-04 12:22:43 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-12-04 12:22:43 [http-nio-8881-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-04 12:23:09 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/restaurant/logo
2025-12-04 12:23:09 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/restaurant/logo
2025-12-04 12:23:09 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:23:09 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/restaurant/logo
2025-12-04 12:23:09 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/restaurant/logo", parameters={multipart}
2025-12-04 12:23:09 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#uploadLogo(MultipartFile, MultipartFile, MultipartFile)
2025-12-04 12:23:09 [http-nio-8881-exec-10] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:23:09 [http-nio-8881-exec-10] INFO  c.r.b.service.RestaurantService - Uploading logo for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:23:09 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 12:23:09 [http-nio-8881-exec-10] INFO  c.r.b.service.FileStorageService - File deleted: ./uploads/logos/5efe47bb-98d2-46b7-b142-17a3d86a6fd5.png
2025-12-04 12:23:09 [http-nio-8881-exec-10] INFO  c.r.b.service.FileStorageService - File stored: ./uploads/logos/98811a0f-e9f4-4fc2-8474-7215937e5bf7.png
2025-12-04 12:23:09 [http-nio-8881-exec-10] INFO  c.r.b.service.RestaurantService - Logo uploaded successfully for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:23:09 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    update
        public.tenants 
    set
        address=?,
        city=?,
        currency=?,
        gstin=?,
        is_active=?,
        logo_path=?,
        max_storage_gb=?,
        max_users=?,
        owner_email=?,
        owner_name=?,
        owner_phone=?,
        pincode=?,
        razorpay_customer_id=?,
        razorpay_subscription_id=?,
        restaurant_code=?,
        restaurant_name=?,
        service_charge_rate=?,
        state=?,
        subscription_end_date=?,
        subscription_plan=?,
        subscription_start_date=?,
        subscription_status=?,
        tax_rate=?,
        timezone=?,
        trial_end_date=?,
        updated_at=? 
    where
        id=?
2025-12-04 12:23:09 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:23:09 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 12:23:09 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:23:09 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /uploads/logos/98811a0f-e9f4-4fc2-8474-7215937e5bf7.png
2025-12-04 12:23:09 [http-nio-8881-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-04 12:23:09 [http-nio-8881-exec-9] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-12-04 12:23:09 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-12-04 12:23:09 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-12-04 12:23:09 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-12-04 12:23:09 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-12-04 12:23:09 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:23:09 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Thu Dec 04 12:23:09 IST 2025, status=403, error=Forbidden, message=Access Denied, path=/u (truncated)...]
2025-12-04 12:23:09 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-12-04 12:23:09 [http-nio-8881-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-04 12:23:09 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/restaurant/profile
2025-12-04 12:23:09 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:23:09 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/restaurant/profile
2025-12-04 12:23:09 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/api/restaurant/profile", parameters={}
2025-12-04 12:23:09 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#updateRestaurantProfile(UpdateRestaurantProfileRequest)
2025-12-04 12:23:09 [http-nio-8881-exec-7] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:23:09 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [UpdateRestaurantProfileRequest(restaurantName=Ganesh, ownerEmail=Ganesh@gmail.com, ownerName=null, o (truncated)...]
2025-12-04 12:23:09 [http-nio-8881-exec-7] INFO  c.r.b.service.RestaurantService - Updating restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:23:09 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 12:23:09 [http-nio-8881-exec-7] INFO  c.r.b.service.RestaurantService - Restaurant profile updated successfully for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:23:09 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    update
        public.tenants 
    set
        address=?,
        city=?,
        currency=?,
        gstin=?,
        is_active=?,
        logo_path=?,
        max_storage_gb=?,
        max_users=?,
        owner_email=?,
        owner_name=?,
        owner_phone=?,
        pincode=?,
        razorpay_customer_id=?,
        razorpay_subscription_id=?,
        restaurant_code=?,
        restaurant_name=?,
        service_charge_rate=?,
        state=?,
        subscription_end_date=?,
        subscription_plan=?,
        subscription_start_date=?,
        subscription_status=?,
        tax_rate=?,
        timezone=?,
        trial_end_date=?,
        updated_at=? 
    where
        id=?
2025-12-04 12:23:09 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:23:09 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 12:23:09 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:23:09 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 12:23:09 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:23:09 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 12:23:09 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 12:23:09 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#getRestaurantProfile()
2025-12-04 12:23:09 [http-nio-8881-exec-8] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:23:09 [http-nio-8881-exec-8] INFO  c.r.b.service.RestaurantService - Fetching restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:23:09 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 12:23:09 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:23:09 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 12:23:09 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:23:25 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 12:23:25 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:23:25 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 12:23:25 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 12:23:25 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#getRestaurantProfile()
2025-12-04 12:23:25 [http-nio-8881-exec-5] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:23:25 [http-nio-8881-exec-5] INFO  c.r.b.service.RestaurantService - Fetching restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:23:25 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 12:23:25 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:23:25 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 12:23:25 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:23:41 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/restaurant/logo
2025-12-04 12:23:41 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:23:41 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/restaurant/logo
2025-12-04 12:23:41 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/restaurant/logo", parameters={multipart}
2025-12-04 12:23:41 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#uploadLogo(MultipartFile, MultipartFile, MultipartFile)
2025-12-04 12:23:41 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:23:41 [http-nio-8881-exec-4] INFO  c.r.b.service.RestaurantService - Uploading logo for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:23:41 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 12:23:41 [http-nio-8881-exec-4] INFO  c.r.b.service.FileStorageService - File deleted: ./uploads/logos/98811a0f-e9f4-4fc2-8474-7215937e5bf7.png
2025-12-04 12:23:41 [http-nio-8881-exec-4] INFO  c.r.b.service.FileStorageService - File stored: ./uploads/logos/2a64a6bc-ca06-4610-8706-79d81a13b40d.png
2025-12-04 12:23:41 [http-nio-8881-exec-4] INFO  c.r.b.service.RestaurantService - Logo uploaded successfully for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:23:41 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    update
        public.tenants 
    set
        address=?,
        city=?,
        currency=?,
        gstin=?,
        is_active=?,
        logo_path=?,
        max_storage_gb=?,
        max_users=?,
        owner_email=?,
        owner_name=?,
        owner_phone=?,
        pincode=?,
        razorpay_customer_id=?,
        razorpay_subscription_id=?,
        restaurant_code=?,
        restaurant_name=?,
        service_charge_rate=?,
        state=?,
        subscription_end_date=?,
        subscription_plan=?,
        subscription_start_date=?,
        subscription_status=?,
        tax_rate=?,
        timezone=?,
        trial_end_date=?,
        updated_at=? 
    where
        id=?
2025-12-04 12:23:41 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:23:41 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 12:23:41 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:23:41 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /uploads/logos/2a64a6bc-ca06-4610-8706-79d81a13b40d.png
2025-12-04 12:23:41 [http-nio-8881-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-04 12:23:41 [http-nio-8881-exec-2] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-12-04 12:23:41 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-12-04 12:23:41 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-12-04 12:23:41 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-12-04 12:23:41 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-12-04 12:23:41 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:23:41 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Thu Dec 04 12:23:41 IST 2025, status=403, error=Forbidden, message=Access Denied, path=/u (truncated)...]
2025-12-04 12:23:41 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-12-04 12:23:41 [http-nio-8881-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-04 12:23:41 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/restaurant/profile
2025-12-04 12:23:41 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:23:41 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/restaurant/profile
2025-12-04 12:23:41 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/api/restaurant/profile", parameters={}
2025-12-04 12:23:41 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#updateRestaurantProfile(UpdateRestaurantProfileRequest)
2025-12-04 12:23:41 [http-nio-8881-exec-6] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:23:41 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [UpdateRestaurantProfileRequest(restaurantName=Ganesh, ownerEmail=Ganesh@gmail.com, ownerName=null, o (truncated)...]
2025-12-04 12:23:41 [http-nio-8881-exec-6] INFO  c.r.b.service.RestaurantService - Updating restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:23:41 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 12:23:41 [http-nio-8881-exec-6] INFO  c.r.b.service.RestaurantService - Restaurant profile updated successfully for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:23:41 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    update
        public.tenants 
    set
        address=?,
        city=?,
        currency=?,
        gstin=?,
        is_active=?,
        logo_path=?,
        max_storage_gb=?,
        max_users=?,
        owner_email=?,
        owner_name=?,
        owner_phone=?,
        pincode=?,
        razorpay_customer_id=?,
        razorpay_subscription_id=?,
        restaurant_code=?,
        restaurant_name=?,
        service_charge_rate=?,
        state=?,
        subscription_end_date=?,
        subscription_plan=?,
        subscription_start_date=?,
        subscription_status=?,
        tax_rate=?,
        timezone=?,
        trial_end_date=?,
        updated_at=? 
    where
        id=?
2025-12-04 12:23:41 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:23:41 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 12:23:41 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:23:41 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 12:23:41 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:23:41 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 12:23:41 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 12:23:41 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#getRestaurantProfile()
2025-12-04 12:23:41 [http-nio-8881-exec-1] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:23:41 [http-nio-8881-exec-1] INFO  c.r.b.service.RestaurantService - Fetching restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:23:41 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 12:23:41 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:23:41 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 12:23:41 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:25:40 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/restaurant/profile
2025-12-04 12:25:40 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:25:40 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/restaurant/profile
2025-12-04 12:25:40 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/api/restaurant/profile", parameters={}
2025-12-04 12:25:40 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#updateRestaurantProfile(UpdateRestaurantProfileRequest)
2025-12-04 12:25:40 [http-nio-8881-exec-8] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:25:40 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [UpdateRestaurantProfileRequest(restaurantName=Ganesh, ownerEmail=Ganesh@gmail.com, ownerName=null, o (truncated)...]
2025-12-04 12:25:40 [http-nio-8881-exec-8] INFO  c.r.b.service.RestaurantService - Updating restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:25:40 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 12:25:40 [http-nio-8881-exec-8] INFO  c.r.b.service.RestaurantService - Restaurant profile updated successfully for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:25:40 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    update
        public.tenants 
    set
        address=?,
        city=?,
        currency=?,
        gstin=?,
        is_active=?,
        logo_path=?,
        max_storage_gb=?,
        max_users=?,
        owner_email=?,
        owner_name=?,
        owner_phone=?,
        pincode=?,
        razorpay_customer_id=?,
        razorpay_subscription_id=?,
        restaurant_code=?,
        restaurant_name=?,
        service_charge_rate=?,
        state=?,
        subscription_end_date=?,
        subscription_plan=?,
        subscription_start_date=?,
        subscription_status=?,
        tax_rate=?,
        timezone=?,
        trial_end_date=?,
        updated_at=? 
    where
        id=?
2025-12-04 12:25:40 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:25:40 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 12:25:40 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:25:40 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 12:25:40 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:25:40 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 12:25:40 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 12:25:40 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#getRestaurantProfile()
2025-12-04 12:25:40 [http-nio-8881-exec-5] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:25:40 [http-nio-8881-exec-5] INFO  c.r.b.service.RestaurantService - Fetching restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:25:40 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 12:25:40 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:25:40 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 12:25:40 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:26:01 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/restaurant/logo
2025-12-04 12:26:01 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:26:01 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/restaurant/logo
2025-12-04 12:26:01 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/restaurant/logo", parameters={multipart}
2025-12-04 12:26:01 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#uploadLogo(MultipartFile, MultipartFile, MultipartFile)
2025-12-04 12:26:01 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:26:01 [http-nio-8881-exec-4] INFO  c.r.b.service.RestaurantService - Uploading logo for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:26:01 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 12:26:01 [http-nio-8881-exec-4] INFO  c.r.b.service.FileStorageService - File deleted: ./uploads/logos/2a64a6bc-ca06-4610-8706-79d81a13b40d.png
2025-12-04 12:26:01 [http-nio-8881-exec-4] INFO  c.r.b.service.FileStorageService - File stored: ./uploads/logos/8a696065-25a2-480d-b4e2-54e4d7f314e4.png
2025-12-04 12:26:01 [http-nio-8881-exec-4] INFO  c.r.b.service.RestaurantService - Logo uploaded successfully for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:26:01 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    update
        public.tenants 
    set
        address=?,
        city=?,
        currency=?,
        gstin=?,
        is_active=?,
        logo_path=?,
        max_storage_gb=?,
        max_users=?,
        owner_email=?,
        owner_name=?,
        owner_phone=?,
        pincode=?,
        razorpay_customer_id=?,
        razorpay_subscription_id=?,
        restaurant_code=?,
        restaurant_name=?,
        service_charge_rate=?,
        state=?,
        subscription_end_date=?,
        subscription_plan=?,
        subscription_start_date=?,
        subscription_status=?,
        tax_rate=?,
        timezone=?,
        trial_end_date=?,
        updated_at=? 
    where
        id=?
2025-12-04 12:26:01 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:26:01 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 12:26:01 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:26:01 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /uploads/logos/8a696065-25a2-480d-b4e2-54e4d7f314e4.png
2025-12-04 12:26:01 [http-nio-8881-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-04 12:26:01 [http-nio-8881-exec-2] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-12-04 12:26:01 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-12-04 12:26:01 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-12-04 12:26:01 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-12-04 12:26:01 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-12-04 12:26:01 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:26:01 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Thu Dec 04 12:26:01 IST 2025, status=403, error=Forbidden, message=Access Denied, path=/u (truncated)...]
2025-12-04 12:26:01 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-12-04 12:26:01 [http-nio-8881-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-04 12:26:01 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/restaurant/profile
2025-12-04 12:26:01 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:26:01 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/restaurant/profile
2025-12-04 12:26:01 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/api/restaurant/profile", parameters={}
2025-12-04 12:26:01 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#updateRestaurantProfile(UpdateRestaurantProfileRequest)
2025-12-04 12:26:01 [http-nio-8881-exec-6] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:26:01 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [UpdateRestaurantProfileRequest(restaurantName=Ganesh, ownerEmail=Ganesh@gmail.com, ownerName=null, o (truncated)...]
2025-12-04 12:26:01 [http-nio-8881-exec-6] INFO  c.r.b.service.RestaurantService - Updating restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:26:01 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 12:26:01 [http-nio-8881-exec-6] INFO  c.r.b.service.RestaurantService - Restaurant profile updated successfully for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:26:01 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    update
        public.tenants 
    set
        address=?,
        city=?,
        currency=?,
        gstin=?,
        is_active=?,
        logo_path=?,
        max_storage_gb=?,
        max_users=?,
        owner_email=?,
        owner_name=?,
        owner_phone=?,
        pincode=?,
        razorpay_customer_id=?,
        razorpay_subscription_id=?,
        restaurant_code=?,
        restaurant_name=?,
        service_charge_rate=?,
        state=?,
        subscription_end_date=?,
        subscription_plan=?,
        subscription_start_date=?,
        subscription_status=?,
        tax_rate=?,
        timezone=?,
        trial_end_date=?,
        updated_at=? 
    where
        id=?
2025-12-04 12:26:01 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:26:01 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 12:26:01 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:26:02 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 12:26:02 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:26:02 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 12:26:02 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 12:26:02 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#getRestaurantProfile()
2025-12-04 12:26:02 [http-nio-8881-exec-1] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:26:02 [http-nio-8881-exec-1] INFO  c.r.b.service.RestaurantService - Fetching restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:26:02 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 12:26:02 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:26:02 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 12:26:02 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:34:43 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/auth/login
2025-12-04 12:34:43 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-12-04 12:34:43 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:34:43 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-12-04 12:34:43 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-12-04 12:34:43 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.AuthController#login(LoginRequest)
2025-12-04 12:34:43 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(restaurantCode=REST14DAA490, username=Ganesh@gmail.com, password=Rest@1234)]
2025-12-04 12:34:43 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.restaurant_code=?
2025-12-04 12:34:43 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=? 
        and u1_0.tenant_id=?
2025-12-04 12:34:44 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    update
        public.users 
    set
        auth_provider=?,
        email=?,
        google_id=?,
        is_active=?,
        last_login=?,
        name=?,
        password_hash=?,
        phone=?,
        refresh_token=?,
        refresh_token_expiry=?,
        role=?,
        tenant_id=?,
        updated_at=? 
    where
        id=?
2025-12-04 12:34:44 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:34:44 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiT1dORVIiLCJ0ZW5hbnRJZCI6ImNjNzFkN2U0LWNmNj (truncated)...]
2025-12-04 12:34:44 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:34:44 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/today-sales
2025-12-04 12:34:44 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/active-orders
2025-12-04 12:34:44 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/pending-payments
2025-12-04 12:34:44 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/stats
2025-12-04 12:34:44 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/active-orders
2025-12-04 12:34:44 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/today-sales
2025-12-04 12:34:44 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/pending-payments
2025-12-04 12:34:44 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/tables-occupied
2025-12-04 12:34:44 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/stats
2025-12-04 12:34:44 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/tables-occupied
2025-12-04 12:34:44 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:34:44 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:34:44 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:34:44 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/active-orders
2025-12-04 12:34:44 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/active-orders", parameters={}
2025-12-04 12:34:44 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getActiveOrders()
2025-12-04 12:34:44 [http-nio-8881-exec-2] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:34:44 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/pending-payments
2025-12-04 12:34:44 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/pending-payments", parameters={}
2025-12-04 12:34:44 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:34:44 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getPendingPayments()
2025-12-04 12:34:44 [http-nio-8881-exec-3] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:34:44 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 12:34:44 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/today-sales
2025-12-04 12:34:44 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/today-sales", parameters={}
2025-12-04 12:34:44 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTodaySales()
2025-12-04 12:34:44 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:34:44 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 12:34:44 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:34:44 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 12:34:44 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 12:34:44 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:34:44 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/tables-occupied
2025-12-04 12:34:44 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/tables-occupied", parameters={}
2025-12-04 12:34:44 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTablesOccupied()
2025-12-04 12:34:44 [http-nio-8881-exec-9] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:34:44 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 12:34:44 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 12:34:44 [http-nio-8881-exec-4] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session
	at org.hibernate.collection.spi.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:636)
	at org.hibernate.collection.spi.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:219)
	at org.hibernate.collection.spi.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:615)
	at org.hibernate.collection.spi.AbstractPersistentCollection.read(AbstractPersistentCollection.java:138)
	at org.hibernate.collection.spi.PersistentBag.iterator(PersistentBag.java:369)
	at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1842)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.reduce(ReferencePipeline.java:657)
	at com.restaurant.billing.service.DashboardService.getTodaySales(DashboardService.java:80)
	at com.restaurant.billing.controller.DashboardController.getTodaySales(DashboardController.java:24)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 12:34:44 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:34:44 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:34:44 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 12:34:44 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:34:44 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T12:34:44.375354585, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 12:34:44 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:34:44 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:34:44 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 12:34:44 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session]
2025-12-04 12:34:44 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 12:34:44 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:34:44 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/stats
2025-12-04 12:34:44 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/stats", parameters={}
2025-12-04 12:34:44 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getDashboardStats()
2025-12-04 12:34:44 [http-nio-8881-exec-10] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:34:44 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 12:34:44 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 12:34:44 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 12:34:44 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 12:34:44 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:34:44 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{tablesOccupied=0, pendingPayments=0, activeOrders=0, todaySales=0}]
2025-12-04 12:34:44 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:34:44 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/orders
2025-12-04 12:34:44 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/orders
2025-12-04 12:34:44 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:34:44 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/orders
2025-12-04 12:34:44 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/orders", parameters={}
2025-12-04 12:34:44 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#getAllOrders()
2025-12-04 12:34:44 [http-nio-8881-exec-8] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:34:44 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 12:34:44 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:34:44 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:34:44 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:34:44 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:34:44 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:34:44 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:34:44 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:34:44 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:34:44 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:34:44 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:34:44 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:34:44 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:34:44 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:34:44 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[OrderDto(id=3d2cc165-482d-4290-b220-105d1ad18880, orderNumber=ORD1764763565538, tableId=null, table (truncated)...]
2025-12-04 12:34:44 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:34:46 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/restaurant/profile
2025-12-04 12:34:46 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 12:34:46 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:34:46 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 12:34:46 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 12:34:46 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#getRestaurantProfile()
2025-12-04 12:34:46 [http-nio-8881-exec-1] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:34:46 [http-nio-8881-exec-1] INFO  c.r.b.service.RestaurantService - Fetching restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:34:46 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 12:34:46 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:34:46 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 12:34:46 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:34:46 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /uploads/logos/8a696065-25a2-480d-b4e2-54e4d7f314e4.png
2025-12-04 12:34:46 [http-nio-8881-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-04 12:34:46 [http-nio-8881-exec-6] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-12-04 12:34:46 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-12-04 12:34:46 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-12-04 12:34:46 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-12-04 12:34:46 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-12-04 12:34:46 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:34:46 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Thu Dec 04 12:34:46 IST 2025, status=403, error=Forbidden, message=Access Denied, path=/u (truncated)...]
2025-12-04 12:34:46 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-12-04 12:34:46 [http-nio-8881-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-04 12:35:04 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/restaurant/profile
2025-12-04 12:35:04 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:35:04 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/restaurant/profile
2025-12-04 12:35:04 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/api/restaurant/profile", parameters={}
2025-12-04 12:35:04 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#updateRestaurantProfile(UpdateRestaurantProfileRequest)
2025-12-04 12:35:04 [http-nio-8881-exec-2] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:35:04 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [UpdateRestaurantProfileRequest(restaurantName=Ganesh, ownerEmail=Ganesh@gmail.com, ownerName=null, o (truncated)...]
2025-12-04 12:35:04 [http-nio-8881-exec-2] INFO  c.r.b.service.RestaurantService - Updating restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:35:04 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 12:35:04 [http-nio-8881-exec-2] INFO  c.r.b.service.RestaurantService - Restaurant profile updated successfully for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:35:04 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:35:04 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 12:35:04 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:35:04 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 12:35:04 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:35:04 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 12:35:04 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 12:35:04 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#getRestaurantProfile()
2025-12-04 12:35:04 [http-nio-8881-exec-9] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:35:04 [http-nio-8881-exec-9] INFO  c.r.b.service.RestaurantService - Fetching restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:35:04 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 12:35:04 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:35:04 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 12:35:04 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:35:38 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/restaurant/profile
2025-12-04 12:35:38 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:35:38 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/restaurant/profile
2025-12-04 12:35:38 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/api/restaurant/profile", parameters={}
2025-12-04 12:35:38 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#updateRestaurantProfile(UpdateRestaurantProfileRequest)
2025-12-04 12:35:38 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:35:38 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [UpdateRestaurantProfileRequest(restaurantName=Ganesh, ownerEmail=Ganesh@gmail.com, ownerName=null, o (truncated)...]
2025-12-04 12:35:38 [http-nio-8881-exec-4] INFO  c.r.b.service.RestaurantService - Updating restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:35:38 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 12:35:38 [http-nio-8881-exec-4] INFO  c.r.b.service.RestaurantService - Restaurant profile updated successfully for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:35:38 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    update
        public.tenants 
    set
        address=?,
        city=?,
        currency=?,
        gstin=?,
        is_active=?,
        logo_path=?,
        max_storage_gb=?,
        max_users=?,
        owner_email=?,
        owner_name=?,
        owner_phone=?,
        pincode=?,
        razorpay_customer_id=?,
        razorpay_subscription_id=?,
        restaurant_code=?,
        restaurant_name=?,
        service_charge_rate=?,
        state=?,
        subscription_end_date=?,
        subscription_plan=?,
        subscription_start_date=?,
        subscription_status=?,
        tax_rate=?,
        timezone=?,
        trial_end_date=?,
        updated_at=? 
    where
        id=?
2025-12-04 12:35:38 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:35:38 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 12:35:38 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:35:38 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 12:35:38 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:35:38 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 12:35:38 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 12:35:38 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#getRestaurantProfile()
2025-12-04 12:35:38 [http-nio-8881-exec-3] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:35:38 [http-nio-8881-exec-3] INFO  c.r.b.service.RestaurantService - Fetching restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:35:38 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 12:35:38 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:35:38 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 12:35:38 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:45:21 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/auth/login
2025-12-04 12:45:21 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-12-04 12:45:21 [http-nio-8881-exec-6] ERROR c.r.billing.security.JwtUtil - Invalid JWT token: JWT expired at 2025-12-04T07:07:41Z. Current time: 2025-12-04T07:15:21Z, a difference of 460832 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-12-04 12:45:21 [http-nio-8881-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-04 12:45:21 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-12-04 12:45:21 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-12-04 12:45:21 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.AuthController#login(LoginRequest)
2025-12-04 12:45:21 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(restaurantCode=REST14DAA490, username=Ganesh@gmail.com, password=Rest@1234)]
2025-12-04 12:45:21 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.restaurant_code=?
2025-12-04 12:45:21 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=? 
        and u1_0.tenant_id=?
2025-12-04 12:45:21 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    update
        public.users 
    set
        auth_provider=?,
        email=?,
        google_id=?,
        is_active=?,
        last_login=?,
        name=?,
        password_hash=?,
        phone=?,
        refresh_token=?,
        refresh_token_expiry=?,
        role=?,
        tenant_id=?,
        updated_at=? 
    where
        id=?
2025-12-04 12:45:21 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:45:21 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiT1dORVIiLCJ0ZW5hbnRJZCI6ImNjNzFkN2U0LWNmNj (truncated)...]
2025-12-04 12:45:21 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:45:22 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/today-sales
2025-12-04 12:45:22 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/active-orders
2025-12-04 12:45:22 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/pending-payments
2025-12-04 12:45:22 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/today-sales
2025-12-04 12:45:22 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/stats
2025-12-04 12:45:22 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/tables-occupied
2025-12-04 12:45:22 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:45:22 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/today-sales
2025-12-04 12:45:22 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/today-sales", parameters={}
2025-12-04 12:45:22 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTodaySales()
2025-12-04 12:45:22 [http-nio-8881-exec-3] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:45:22 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 12:45:22 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/active-orders
2025-12-04 12:45:22 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 12:45:22 [http-nio-8881-exec-3] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session
	at org.hibernate.collection.spi.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:636)
	at org.hibernate.collection.spi.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:219)
	at org.hibernate.collection.spi.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:615)
	at org.hibernate.collection.spi.AbstractPersistentCollection.read(AbstractPersistentCollection.java:138)
	at org.hibernate.collection.spi.PersistentBag.iterator(PersistentBag.java:369)
	at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1842)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.reduce(ReferencePipeline.java:657)
	at com.restaurant.billing.service.DashboardService.getTodaySales(DashboardService.java:80)
	at com.restaurant.billing.controller.DashboardController.getTodaySales(DashboardController.java:24)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 12:45:22 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:45:22 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T12:45:22.483414585, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 12:45:22 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/tables-occupied
2025-12-04 12:45:22 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session]
2025-12-04 12:45:22 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 12:45:22 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/pending-payments
2025-12-04 12:45:22 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:45:22 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/active-orders
2025-12-04 12:45:22 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/active-orders", parameters={}
2025-12-04 12:45:22 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getActiveOrders()
2025-12-04 12:45:22 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/stats
2025-12-04 12:45:22 [http-nio-8881-exec-10] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:45:22 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:45:22 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 12:45:22 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:45:22 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/pending-payments
2025-12-04 12:45:22 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/pending-payments", parameters={}
2025-12-04 12:45:22 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:45:22 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 12:45:22 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getPendingPayments()
2025-12-04 12:45:22 [http-nio-8881-exec-3] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:45:22 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:45:22 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/tables-occupied
2025-12-04 12:45:22 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:45:22 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/tables-occupied", parameters={}
2025-12-04 12:45:22 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTablesOccupied()
2025-12-04 12:45:22 [http-nio-8881-exec-1] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:45:22 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 12:45:22 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 12:45:22 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/stats
2025-12-04 12:45:22 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/stats", parameters={}
2025-12-04 12:45:22 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getDashboardStats()
2025-12-04 12:45:22 [http-nio-8881-exec-5] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:45:22 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:45:22 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 12:45:22 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 12:45:22 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:45:22 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 12:45:22 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:45:22 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:45:22 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 12:45:22 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 12:45:22 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 12:45:22 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:45:22 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{tablesOccupied=0, pendingPayments=0, activeOrders=0, todaySales=0}]
2025-12-04 12:45:22 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:45:22 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/orders
2025-12-04 12:45:22 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/orders
2025-12-04 12:45:22 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:45:22 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/orders
2025-12-04 12:45:22 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/orders", parameters={}
2025-12-04 12:45:22 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#getAllOrders()
2025-12-04 12:45:22 [http-nio-8881-exec-9] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:45:22 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 12:45:22 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:45:22 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:45:22 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:45:22 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:45:22 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:45:22 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:45:22 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:45:22 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:45:22 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:45:22 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:45:22 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:45:22 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:45:22 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:45:22 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[OrderDto(id=3d2cc165-482d-4290-b220-105d1ad18880, orderNumber=ORD1764763565538, tableId=null, table (truncated)...]
2025-12-04 12:45:22 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:45:34 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/restaurant/profile
2025-12-04 12:45:34 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 12:45:34 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:45:34 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 12:45:34 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 12:45:34 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#getRestaurantProfile()
2025-12-04 12:45:34 [http-nio-8881-exec-8] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:45:34 [http-nio-8881-exec-8] INFO  c.r.b.service.RestaurantService - Fetching restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:45:34 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 12:45:34 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:45:34 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 12:45:34 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:45:34 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /uploads/logos/8a696065-25a2-480d-b4e2-54e4d7f314e4.png
2025-12-04 12:45:34 [http-nio-8881-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-04 12:45:34 [http-nio-8881-exec-7] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-12-04 12:45:34 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-12-04 12:45:34 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-12-04 12:45:34 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-12-04 12:45:34 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-12-04 12:45:34 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:45:34 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Thu Dec 04 12:45:34 IST 2025, status=403, error=Forbidden, message=Access Denied, path=/u (truncated)...]
2025-12-04 12:45:34 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-12-04 12:45:34 [http-nio-8881-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-04 12:45:43 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/restaurant/logo
2025-12-04 12:45:43 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/restaurant/logo
2025-12-04 12:45:43 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:45:43 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/restaurant/logo
2025-12-04 12:45:43 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/restaurant/logo", parameters={multipart}
2025-12-04 12:45:43 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#uploadLogo(MultipartFile, MultipartFile, MultipartFile)
2025-12-04 12:45:43 [http-nio-8881-exec-10] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:45:43 [http-nio-8881-exec-10] INFO  c.r.b.service.RestaurantService - Uploading logo for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:45:43 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 12:45:43 [http-nio-8881-exec-10] INFO  c.r.b.service.FileStorageService - File deleted: ./uploads/logos/8a696065-25a2-480d-b4e2-54e4d7f314e4.png
2025-12-04 12:45:43 [http-nio-8881-exec-10] INFO  c.r.b.service.FileStorageService - File stored: ./uploads/logos/e049ef8a-1845-446b-a9b5-47a5dadfba70.png
2025-12-04 12:45:43 [http-nio-8881-exec-10] INFO  c.r.b.service.RestaurantService - Logo uploaded successfully for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:45:43 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    update
        public.tenants 
    set
        address=?,
        city=?,
        currency=?,
        gstin=?,
        is_active=?,
        logo_path=?,
        max_storage_gb=?,
        max_users=?,
        owner_email=?,
        owner_name=?,
        owner_phone=?,
        pincode=?,
        razorpay_customer_id=?,
        razorpay_subscription_id=?,
        restaurant_code=?,
        restaurant_name=?,
        service_charge_rate=?,
        state=?,
        subscription_end_date=?,
        subscription_plan=?,
        subscription_start_date=?,
        subscription_status=?,
        tax_rate=?,
        timezone=?,
        trial_end_date=?,
        updated_at=? 
    where
        id=?
2025-12-04 12:45:43 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:45:43 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 12:45:43 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:45:43 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/restaurant/profile
2025-12-04 12:45:43 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:45:43 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/restaurant/profile
2025-12-04 12:45:43 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/api/restaurant/profile", parameters={}
2025-12-04 12:45:43 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#updateRestaurantProfile(UpdateRestaurantProfileRequest)
2025-12-04 12:45:43 [http-nio-8881-exec-1] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:45:43 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [UpdateRestaurantProfileRequest(restaurantName=Ganesh, ownerEmail=Ganesh@gmail.com, ownerName=null, o (truncated)...]
2025-12-04 12:45:43 [http-nio-8881-exec-1] INFO  c.r.b.service.RestaurantService - Updating restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:45:43 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 12:45:43 [http-nio-8881-exec-1] INFO  c.r.b.service.RestaurantService - Restaurant profile updated successfully for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:45:43 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:45:43 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 12:45:43 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:45:43 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 12:45:43 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:45:44 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 12:45:44 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 12:45:44 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#getRestaurantProfile()
2025-12-04 12:45:44 [http-nio-8881-exec-3] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:45:44 [http-nio-8881-exec-3] INFO  c.r.b.service.RestaurantService - Fetching restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:45:44 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 12:45:44 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:45:44 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 12:45:44 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:45:44 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /uploads/logos/e049ef8a-1845-446b-a9b5-47a5dadfba70.png
2025-12-04 12:45:44 [http-nio-8881-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-04 12:45:44 [http-nio-8881-exec-5] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-12-04 12:45:44 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-12-04 12:45:44 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-12-04 12:45:44 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-12-04 12:45:44 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-12-04 12:45:44 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:45:44 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Thu Dec 04 12:45:44 IST 2025, status=403, error=Forbidden, message=Access Denied, path=/u (truncated)...]
2025-12-04 12:45:44 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-12-04 12:45:44 [http-nio-8881-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-04 12:46:15 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 12:46:15 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:46:15 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 12:46:15 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 12:46:15 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#getRestaurantProfile()
2025-12-04 12:46:15 [http-nio-8881-exec-2] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:46:15 [http-nio-8881-exec-2] INFO  c.r.b.service.RestaurantService - Fetching restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:46:15 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 12:46:15 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:46:15 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 12:46:15 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:47:12 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/restaurant/logo
2025-12-04 12:47:12 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:47:12 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/restaurant/logo
2025-12-04 12:47:12 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/restaurant/logo", parameters={multipart}
2025-12-04 12:47:12 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#uploadLogo(MultipartFile, MultipartFile, MultipartFile)
2025-12-04 12:47:12 [http-nio-8881-exec-6] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:47:12 [http-nio-8881-exec-6] INFO  c.r.b.service.RestaurantService - Uploading logo for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:47:12 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 12:47:12 [http-nio-8881-exec-6] INFO  c.r.b.service.FileStorageService - File deleted: ./uploads/logos/e049ef8a-1845-446b-a9b5-47a5dadfba70.png
2025-12-04 12:47:12 [http-nio-8881-exec-6] INFO  c.r.b.service.FileStorageService - File stored: ./uploads/logos/b12b1d99-c57a-41e2-be21-f65e231d844c.png
2025-12-04 12:47:12 [http-nio-8881-exec-6] INFO  c.r.b.service.RestaurantService - Logo uploaded successfully for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:47:12 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    update
        public.tenants 
    set
        address=?,
        city=?,
        currency=?,
        gstin=?,
        is_active=?,
        logo_path=?,
        max_storage_gb=?,
        max_users=?,
        owner_email=?,
        owner_name=?,
        owner_phone=?,
        pincode=?,
        razorpay_customer_id=?,
        razorpay_subscription_id=?,
        restaurant_code=?,
        restaurant_name=?,
        service_charge_rate=?,
        state=?,
        subscription_end_date=?,
        subscription_plan=?,
        subscription_start_date=?,
        subscription_status=?,
        tax_rate=?,
        timezone=?,
        trial_end_date=?,
        updated_at=? 
    where
        id=?
2025-12-04 12:47:12 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:47:12 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 12:47:12 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:47:12 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/restaurant/profile
2025-12-04 12:47:12 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:47:12 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/restaurant/profile
2025-12-04 12:47:12 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/api/restaurant/profile", parameters={}
2025-12-04 12:47:12 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#updateRestaurantProfile(UpdateRestaurantProfileRequest)
2025-12-04 12:47:12 [http-nio-8881-exec-10] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:47:12 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [UpdateRestaurantProfileRequest(restaurantName=Ganesh, ownerEmail=Ganesh@gmail.com, ownerName=null, o (truncated)...]
2025-12-04 12:47:12 [http-nio-8881-exec-10] INFO  c.r.b.service.RestaurantService - Updating restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:47:12 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 12:47:12 [http-nio-8881-exec-10] INFO  c.r.b.service.RestaurantService - Restaurant profile updated successfully for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:47:12 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    update
        public.tenants 
    set
        address=?,
        city=?,
        currency=?,
        gstin=?,
        is_active=?,
        logo_path=?,
        max_storage_gb=?,
        max_users=?,
        owner_email=?,
        owner_name=?,
        owner_phone=?,
        pincode=?,
        razorpay_customer_id=?,
        razorpay_subscription_id=?,
        restaurant_code=?,
        restaurant_name=?,
        service_charge_rate=?,
        state=?,
        subscription_end_date=?,
        subscription_plan=?,
        subscription_start_date=?,
        subscription_status=?,
        tax_rate=?,
        timezone=?,
        trial_end_date=?,
        updated_at=? 
    where
        id=?
2025-12-04 12:47:12 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:47:12 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 12:47:12 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:47:12 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 12:47:12 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:47:12 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 12:47:12 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 12:47:12 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#getRestaurantProfile()
2025-12-04 12:47:12 [http-nio-8881-exec-1] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:47:12 [http-nio-8881-exec-1] INFO  c.r.b.service.RestaurantService - Fetching restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:47:12 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 12:47:12 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:47:12 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 12:47:12 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:47:12 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /uploads/logos/b12b1d99-c57a-41e2-be21-f65e231d844c.png
2025-12-04 12:47:12 [http-nio-8881-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-04 12:47:12 [http-nio-8881-exec-3] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-12-04 12:47:12 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-12-04 12:47:12 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-12-04 12:47:12 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-12-04 12:47:12 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2025-12-04 12:47:12 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:47:12 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{timestamp=Thu Dec 04 12:47:12 IST 2025, status=403, error=Forbidden, message=Access Denied, path=/u (truncated)...]
2025-12-04 12:47:12 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 403
2025-12-04 12:47:12 [http-nio-8881-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-04 12:55:21 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/auth/login
2025-12-04 12:55:21 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-12-04 12:55:21 [http-nio-8881-exec-9] ERROR c.r.billing.security.JwtUtil - Invalid JWT token: JWT expired at 2025-12-04T07:07:41Z. Current time: 2025-12-04T07:25:21Z, a difference of 1060865 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-12-04 12:55:21 [http-nio-8881-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-04 12:55:21 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-12-04 12:55:21 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-12-04 12:55:21 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.AuthController#login(LoginRequest)
2025-12-04 12:55:21 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(restaurantCode=REST14DAA490, username=Ganesh@gmail.com, password=Rest@1234)]
2025-12-04 12:55:21 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.restaurant_code=?
2025-12-04 12:55:21 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=? 
        and u1_0.tenant_id=?
2025-12-04 12:55:21 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    update
        public.users 
    set
        auth_provider=?,
        email=?,
        google_id=?,
        is_active=?,
        last_login=?,
        name=?,
        password_hash=?,
        phone=?,
        refresh_token=?,
        refresh_token_expiry=?,
        role=?,
        tenant_id=?,
        updated_at=? 
    where
        id=?
2025-12-04 12:55:21 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:55:21 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiT1dORVIiLCJ0ZW5hbnRJZCI6ImNjNzFkN2U0LWNmNj (truncated)...]
2025-12-04 12:55:21 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:55:22 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/today-sales
2025-12-04 12:55:22 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/active-orders
2025-12-04 12:55:22 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/pending-payments
2025-12-04 12:55:22 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/today-sales
2025-12-04 12:55:22 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/active-orders
2025-12-04 12:55:22 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/tables-occupied
2025-12-04 12:55:22 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/pending-payments
2025-12-04 12:55:22 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/stats
2025-12-04 12:55:22 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:55:22 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:55:22 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:55:22 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/tables-occupied
2025-12-04 12:55:22 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/active-orders
2025-12-04 12:55:22 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/today-sales
2025-12-04 12:55:22 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/pending-payments
2025-12-04 12:55:22 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/today-sales", parameters={}
2025-12-04 12:55:22 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/active-orders", parameters={}
2025-12-04 12:55:22 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/pending-payments", parameters={}
2025-12-04 12:55:22 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/stats
2025-12-04 12:55:22 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getActiveOrders()
2025-12-04 12:55:22 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getPendingPayments()
2025-12-04 12:55:22 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTodaySales()
2025-12-04 12:55:22 [http-nio-8881-exec-1] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:55:22 [http-nio-8881-exec-6] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:55:22 [http-nio-8881-exec-5] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:55:22 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 12:55:22 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 12:55:22 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 12:55:22 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 12:55:22 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:55:22 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:55:22 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 12:55:22 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 12:55:22 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:55:22 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:55:22 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:55:22 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:55:22 [http-nio-8881-exec-6] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session
	at org.hibernate.collection.spi.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:636)
	at org.hibernate.collection.spi.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:219)
	at org.hibernate.collection.spi.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:615)
	at org.hibernate.collection.spi.AbstractPersistentCollection.read(AbstractPersistentCollection.java:138)
	at org.hibernate.collection.spi.PersistentBag.iterator(PersistentBag.java:369)
	at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1842)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.reduce(ReferencePipeline.java:657)
	at com.restaurant.billing.service.DashboardService.getTodaySales(DashboardService.java:80)
	at com.restaurant.billing.controller.DashboardController.getTodaySales(DashboardController.java:24)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 12:55:22 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:55:22 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T12:55:22.274912310, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 12:55:22 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session]
2025-12-04 12:55:22 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 12:55:22 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/tables-occupied
2025-12-04 12:55:22 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/stats
2025-12-04 12:55:22 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/stats", parameters={}
2025-12-04 12:55:22 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/tables-occupied", parameters={}
2025-12-04 12:55:22 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTablesOccupied()
2025-12-04 12:55:22 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getDashboardStats()
2025-12-04 12:55:22 [http-nio-8881-exec-9] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:55:22 [http-nio-8881-exec-2] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:55:22 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 12:55:22 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 12:55:22 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:55:22 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 12:55:22 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:55:22 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 12:55:22 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 12:55:22 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 12:55:22 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:55:22 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{tablesOccupied=0, pendingPayments=0, activeOrders=0, todaySales=0}]
2025-12-04 12:55:22 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:55:22 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/orders
2025-12-04 12:55:22 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/orders
2025-12-04 12:55:22 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:55:22 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/orders
2025-12-04 12:55:22 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/orders", parameters={}
2025-12-04 12:55:22 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#getAllOrders()
2025-12-04 12:55:22 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:55:22 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 12:55:22 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:55:22 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:55:22 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:55:22 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:55:22 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:55:22 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:55:22 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:55:22 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:55:22 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:55:22 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:55:22 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:55:22 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:55:22 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:55:22 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[OrderDto(id=3d2cc165-482d-4290-b220-105d1ad18880, orderNumber=ORD1764763565538, tableId=null, table (truncated)...]
2025-12-04 12:55:22 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:55:27 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/restaurant/profile
2025-12-04 12:55:27 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 12:55:27 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:55:27 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 12:55:27 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 12:55:27 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#getRestaurantProfile()
2025-12-04 12:55:27 [http-nio-8881-exec-10] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:55:27 [http-nio-8881-exec-10] INFO  c.r.b.service.RestaurantService - Fetching restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:55:27 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 12:55:27 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:55:27 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 12:55:27 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:55:44 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/restaurant/logo
2025-12-04 12:55:44 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/restaurant/logo
2025-12-04 12:55:44 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:55:44 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/restaurant/logo
2025-12-04 12:55:44 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/restaurant/logo", parameters={multipart}
2025-12-04 12:55:44 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#uploadLogo(MultipartFile, MultipartFile, MultipartFile)
2025-12-04 12:55:44 [http-nio-8881-exec-5] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:55:44 [http-nio-8881-exec-5] INFO  c.r.b.service.RestaurantService - Uploading logo for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:55:44 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 12:55:44 [http-nio-8881-exec-5] INFO  c.r.b.service.FileStorageService - File deleted: ./uploads/logos/b12b1d99-c57a-41e2-be21-f65e231d844c.png
2025-12-04 12:55:44 [http-nio-8881-exec-5] INFO  c.r.b.service.FileStorageService - File stored: ./uploads/logos/7e5f410c-a420-483c-93ea-2e36f724d947.png
2025-12-04 12:55:44 [http-nio-8881-exec-5] INFO  c.r.b.service.RestaurantService - Logo uploaded successfully for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:55:44 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    update
        public.tenants 
    set
        address=?,
        city=?,
        currency=?,
        gstin=?,
        is_active=?,
        logo_path=?,
        max_storage_gb=?,
        max_users=?,
        owner_email=?,
        owner_name=?,
        owner_phone=?,
        pincode=?,
        razorpay_customer_id=?,
        razorpay_subscription_id=?,
        restaurant_code=?,
        restaurant_name=?,
        service_charge_rate=?,
        state=?,
        subscription_end_date=?,
        subscription_plan=?,
        subscription_start_date=?,
        subscription_status=?,
        tax_rate=?,
        timezone=?,
        trial_end_date=?,
        updated_at=? 
    where
        id=?
2025-12-04 12:55:44 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:55:44 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 12:55:44 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:55:44 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/restaurant/profile
2025-12-04 12:55:44 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:55:44 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/restaurant/profile
2025-12-04 12:55:44 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/api/restaurant/profile", parameters={}
2025-12-04 12:55:44 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#updateRestaurantProfile(UpdateRestaurantProfileRequest)
2025-12-04 12:55:44 [http-nio-8881-exec-1] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:55:44 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [UpdateRestaurantProfileRequest(restaurantName=Ganesh, ownerEmail=Ganesh@gmail.com, ownerName=null, o (truncated)...]
2025-12-04 12:55:44 [http-nio-8881-exec-1] INFO  c.r.b.service.RestaurantService - Updating restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:55:44 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 12:55:44 [http-nio-8881-exec-1] INFO  c.r.b.service.RestaurantService - Restaurant profile updated successfully for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:55:44 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:55:44 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 12:55:44 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:55:44 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 12:55:44 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:55:44 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 12:55:44 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 12:55:44 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#getRestaurantProfile()
2025-12-04 12:55:44 [http-nio-8881-exec-6] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:55:44 [http-nio-8881-exec-6] INFO  c.r.b.service.RestaurantService - Fetching restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:55:44 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 12:55:44 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:55:44 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 12:55:44 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:55:47 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 12:55:47 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:55:47 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 12:55:47 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 12:55:47 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#getRestaurantProfile()
2025-12-04 12:55:47 [http-nio-8881-exec-2] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:55:47 [http-nio-8881-exec-2] INFO  c.r.b.service.RestaurantService - Fetching restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:55:47 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 12:55:47 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:55:47 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 12:55:47 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:55:52 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/today-sales
2025-12-04 12:55:52 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/active-orders
2025-12-04 12:55:52 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/pending-payments
2025-12-04 12:55:52 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/tables-occupied
2025-12-04 12:55:52 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/stats
2025-12-04 12:55:52 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:55:52 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:55:52 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:55:52 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:55:52 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:55:52 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/tables-occupied
2025-12-04 12:55:52 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/tables-occupied", parameters={}
2025-12-04 12:55:52 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/today-sales
2025-12-04 12:55:52 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/active-orders
2025-12-04 12:55:52 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/stats
2025-12-04 12:55:52 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/pending-payments
2025-12-04 12:55:52 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTablesOccupied()
2025-12-04 12:55:52 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/today-sales", parameters={}
2025-12-04 12:55:52 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/stats", parameters={}
2025-12-04 12:55:52 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/active-orders", parameters={}
2025-12-04 12:55:52 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/pending-payments", parameters={}
2025-12-04 12:55:52 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTodaySales()
2025-12-04 12:55:52 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getDashboardStats()
2025-12-04 12:55:52 [http-nio-8881-exec-7] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:55:52 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getActiveOrders()
2025-12-04 12:55:52 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getPendingPayments()
2025-12-04 12:55:52 [http-nio-8881-exec-9] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:55:52 [http-nio-8881-exec-10] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:55:52 [http-nio-8881-exec-8] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:55:52 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:55:52 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 12:55:52 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 12:55:52 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 12:55:52 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 12:55:52 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 12:55:52 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:55:52 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 12:55:52 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:55:52 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 12:55:52 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 12:55:52 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:55:52 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 12:55:52 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 12:55:52 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:55:52 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:55:52 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:55:52 [http-nio-8881-exec-9] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session
	at org.hibernate.collection.spi.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:636)
	at org.hibernate.collection.spi.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:219)
	at org.hibernate.collection.spi.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:615)
	at org.hibernate.collection.spi.AbstractPersistentCollection.read(AbstractPersistentCollection.java:138)
	at org.hibernate.collection.spi.PersistentBag.iterator(PersistentBag.java:369)
	at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1842)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.reduce(ReferencePipeline.java:657)
	at com.restaurant.billing.service.DashboardService.getTodaySales(DashboardService.java:80)
	at com.restaurant.billing.controller.DashboardController.getTodaySales(DashboardController.java:24)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 12:55:52 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:55:52 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T12:55:52.576625768, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 12:55:52 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session]
2025-12-04 12:55:52 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 12:55:52 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 12:55:52 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 12:55:52 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:55:52 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{tablesOccupied=0, pendingPayments=0, activeOrders=0, todaySales=0}]
2025-12-04 12:55:52 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:55:52 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/orders
2025-12-04 12:55:52 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:55:52 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/orders
2025-12-04 12:55:52 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/orders", parameters={}
2025-12-04 12:55:52 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#getAllOrders()
2025-12-04 12:55:52 [http-nio-8881-exec-3] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:55:52 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 12:55:52 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:55:52 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:55:52 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:55:52 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:55:52 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:55:52 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:55:52 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:55:52 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:55:52 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:55:52 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:55:52 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:55:52 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:55:52 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:55:52 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[OrderDto(id=3d2cc165-482d-4290-b220-105d1ad18880, orderNumber=ORD1764763565538, tableId=null, table (truncated)...]
2025-12-04 12:55:52 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:55:54 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/menu
2025-12-04 12:55:54 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/menu
2025-12-04 12:55:54 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:55:54 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/menu
2025-12-04 12:55:54 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/menu", parameters={}
2025-12-04 12:55:54 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.MenuController#getAllMenuItems()
2025-12-04 12:55:54 [http-nio-8881-exec-1] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:55:54 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        mi1_0.id,
        mi1_0.category_id,
        mi1_0.created_at,
        mi1_0.description,
        mi1_0.device_id,
        mi1_0.image_path,
        mi1_0.is_available,
        mi1_0.is_deleted,
        mi1_0.is_veg,
        mi1_0.name,
        mi1_0.preparation_time,
        mi1_0.price,
        mi1_0.synced_at,
        mi1_0.tenant_id,
        mi1_0.updated_at,
        mi1_0.version 
    from
        public.menu_items mi1_0 
    where
        mi1_0.tenant_id=? 
        and mi1_0.is_deleted=?
2025-12-04 12:55:54 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:55:54 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[MenuItemDto(id=8a5577b8-36d5-4a3d-9299-903f009a42b9, categoryId=6ed45abe-f8f6-4966-8126-a3f0d0bd0aa (truncated)...]
2025-12-04 12:55:54 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:55:54 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/categories?activeOnly=true
2025-12-04 12:55:54 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/categories?activeOnly=true
2025-12-04 12:55:54 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:55:54 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/categories?activeOnly=true
2025-12-04 12:55:54 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/categories?activeOnly=true", parameters={masked}
2025-12-04 12:55:54 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.CategoryController#getAllCategories(UserDetails, Boolean)
2025-12-04 12:55:54 [http-nio-8881-exec-2] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:55:54 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:55:54 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.display_order,
        c1_0.is_active,
        c1_0.name,
        c1_0.tenant_id,
        c1_0.updated_at 
    from
        public.categories c1_0 
    where
        c1_0.tenant_id=? 
        and c1_0.is_active=? 
    order by
        c1_0.display_order
2025-12-04 12:55:54 [http-nio-8881-exec-2] DEBUG c.r.billing.service.CategoryService - Found 2 categories for tenant cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:55:54 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:55:54 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[CategoryDto(id=6ed45abe-f8f6-4966-8126-a3f0d0bd0aaa, name=Main course, displayOrder=1), CategoryDto (truncated)...]
2025-12-04 12:55:54 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:55:58 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/orders
2025-12-04 12:55:58 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:55:58 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/orders
2025-12-04 12:55:58 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/orders", parameters={}
2025-12-04 12:55:58 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#createOrder(CreateOrderRequest)
2025-12-04 12:55:58 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:55:58 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [CreateOrderRequest(tableId=null, customerName=null, customerPhone=null, orderType=DINE_IN, items=[Or (truncated)...]
2025-12-04 12:55:58 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 12:55:58 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        mi1_0.id,
        mi1_0.category_id,
        mi1_0.created_at,
        mi1_0.description,
        mi1_0.device_id,
        mi1_0.image_path,
        mi1_0.is_available,
        mi1_0.is_deleted,
        mi1_0.is_veg,
        mi1_0.name,
        mi1_0.preparation_time,
        mi1_0.price,
        mi1_0.synced_at,
        mi1_0.tenant_id,
        mi1_0.updated_at,
        mi1_0.version 
    from
        public.menu_items mi1_0 
    where
        mi1_0.id=?
2025-12-04 12:55:58 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.order_id=?
2025-12-04 12:55:58 [http-nio-8881-exec-4] INFO  c.r.billing.service.OrderService - Bill generated for order: b61d930e-2374-44af-8cbe-9022b550691e
2025-12-04 12:55:58 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    insert 
    into
        public.orders
        (created_at, created_by, customer_name, customer_phone, device_id, discount_amount, is_deleted, notes, order_number, order_status, order_type, service_charge, subtotal, synced_at, table_id, tax_amount, tenant_id, total_amount, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-04 12:55:58 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    insert 
    into
        public.order_items
        (created_at, item_name, menu_item_id, order_id, quantity, special_instructions, status, total_price, unit_price, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-04 12:55:58 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    insert 
    into
        public.bills
        (bill_number, change_amount, created_at, discount_amount, generated_by, invoice_path, order_id, paid_amount, payment_method, payment_status, service_charge, subtotal, tax_amount, tenant_id, total_amount, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-04 12:55:58 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:55:58 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [OrderDto(id=b61d930e-2374-44af-8cbe-9022b550691e, orderNumber=ORD1764833158203, tableId=null, tableN (truncated)...]
2025-12-04 12:55:58 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-12-04 12:55:58 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/sync
2025-12-04 12:55:58 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/sync
2025-12-04 12:55:58 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:55:58 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/sync
2025-12-04 12:55:58 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/sync", parameters={}
2025-12-04 12:55:58 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.SyncController#performSync(SyncRequest)
2025-12-04 12:55:58 [http-nio-8881-exec-8] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:55:58 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [SyncRequest(deviceId=d23c59b8-4056-4cc6-b9bc-6ac5018951cf, lastSyncTime=1970-01-01T05:30, data=[Sync (truncated)...]
2025-12-04 12:55:58 [http-nio-8881-exec-8] ERROR c.r.billing.service.SyncService - Sync error for item: b61d930e-2374-44af-8cbe-9022b550691e
java.lang.IllegalArgumentException: Unknown entity type: order
	at com.restaurant.billing.service.SyncService.processSyncItem(SyncService.java:107)
	at com.restaurant.billing.service.SyncService.performSync(SyncService.java:34)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at com.restaurant.billing.service.SyncService$$SpringCGLIB$$0.performSync(<generated>)
	at com.restaurant.billing.controller.SyncController.performSync(SyncController.java:23)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 12:55:58 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 12:55:58 [http-nio-8881-exec-8] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
java.lang.IllegalArgumentException: No enum constant com.restaurant.billing.entity.SyncLog.SyncOperation.create
	at java.base/java.lang.Enum.valueOf(Enum.java:273)
	at com.restaurant.billing.entity.SyncLog$SyncOperation.valueOf(SyncLog.java:65)
	at com.restaurant.billing.service.SyncService.logSync(SyncService.java:158)
	at com.restaurant.billing.service.SyncService.performSync(SyncService.java:51)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at com.restaurant.billing.service.SyncService$$SpringCGLIB$$0.performSync(<generated>)
	at com.restaurant.billing.controller.SyncController.performSync(SyncController.java:23)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 12:55:58 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:55:58 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T12:55:58.295922240, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 12:55:58 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [java.lang.IllegalArgumentException: No enum constant com.restaurant.billing.entity.SyncLog.SyncOperation.create]
2025-12-04 12:55:58 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 12:55:58 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 12:55:58 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:55:58 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 12:55:58 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 12:55:58 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#getRestaurantProfile()
2025-12-04 12:55:58 [http-nio-8881-exec-9] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:55:58 [http-nio-8881-exec-9] INFO  c.r.b.service.RestaurantService - Fetching restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:55:58 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 12:55:58 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:55:58 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 12:55:58 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:56:16 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/orders
2025-12-04 12:56:16 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:56:16 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/orders
2025-12-04 12:56:16 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/orders", parameters={}
2025-12-04 12:56:16 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#createOrder(CreateOrderRequest)
2025-12-04 12:56:16 [http-nio-8881-exec-10] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:56:16 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [CreateOrderRequest(tableId=null, customerName=null, customerPhone=null, orderType=DINE_IN, items=[Or (truncated)...]
2025-12-04 12:56:16 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 12:56:16 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        mi1_0.id,
        mi1_0.category_id,
        mi1_0.created_at,
        mi1_0.description,
        mi1_0.device_id,
        mi1_0.image_path,
        mi1_0.is_available,
        mi1_0.is_deleted,
        mi1_0.is_veg,
        mi1_0.name,
        mi1_0.preparation_time,
        mi1_0.price,
        mi1_0.synced_at,
        mi1_0.tenant_id,
        mi1_0.updated_at,
        mi1_0.version 
    from
        public.menu_items mi1_0 
    where
        mi1_0.id=?
2025-12-04 12:56:16 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.order_id=?
2025-12-04 12:56:16 [http-nio-8881-exec-10] INFO  c.r.billing.service.OrderService - Bill generated for order: fceae1ca-7044-4d11-ad3f-43d5f59f4d4c
2025-12-04 12:56:16 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    insert 
    into
        public.orders
        (created_at, created_by, customer_name, customer_phone, device_id, discount_amount, is_deleted, notes, order_number, order_status, order_type, service_charge, subtotal, synced_at, table_id, tax_amount, tenant_id, total_amount, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-04 12:56:16 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    insert 
    into
        public.order_items
        (created_at, item_name, menu_item_id, order_id, quantity, special_instructions, status, total_price, unit_price, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-04 12:56:16 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    insert 
    into
        public.bills
        (bill_number, change_amount, created_at, discount_amount, generated_by, invoice_path, order_id, paid_amount, payment_method, payment_status, service_charge, subtotal, tax_amount, tenant_id, total_amount, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-04 12:56:16 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:56:16 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [OrderDto(id=fceae1ca-7044-4d11-ad3f-43d5f59f4d4c, orderNumber=ORD1764833176238, tableId=null, tableN (truncated)...]
2025-12-04 12:56:16 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-12-04 12:56:16 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/sync
2025-12-04 12:56:16 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:56:16 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/sync
2025-12-04 12:56:16 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/sync", parameters={}
2025-12-04 12:56:16 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.SyncController#performSync(SyncRequest)
2025-12-04 12:56:16 [http-nio-8881-exec-3] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:56:16 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [SyncRequest(deviceId=d23c59b8-4056-4cc6-b9bc-6ac5018951cf, lastSyncTime=1970-01-01T05:30, data=[Sync (truncated)...]
2025-12-04 12:56:16 [http-nio-8881-exec-3] ERROR c.r.billing.service.SyncService - Sync error for item: b61d930e-2374-44af-8cbe-9022b550691e
java.lang.IllegalArgumentException: Unknown entity type: order
	at com.restaurant.billing.service.SyncService.processSyncItem(SyncService.java:107)
	at com.restaurant.billing.service.SyncService.performSync(SyncService.java:34)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at com.restaurant.billing.service.SyncService$$SpringCGLIB$$0.performSync(<generated>)
	at com.restaurant.billing.controller.SyncController.performSync(SyncController.java:23)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 12:56:16 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 12:56:16 [http-nio-8881-exec-3] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
java.lang.IllegalArgumentException: No enum constant com.restaurant.billing.entity.SyncLog.SyncOperation.create
	at java.base/java.lang.Enum.valueOf(Enum.java:273)
	at com.restaurant.billing.entity.SyncLog$SyncOperation.valueOf(SyncLog.java:65)
	at com.restaurant.billing.service.SyncService.logSync(SyncService.java:158)
	at com.restaurant.billing.service.SyncService.performSync(SyncService.java:51)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at com.restaurant.billing.service.SyncService$$SpringCGLIB$$0.performSync(<generated>)
	at com.restaurant.billing.controller.SyncController.performSync(SyncController.java:23)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 12:56:16 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:56:16 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T12:56:16.285203344, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 12:56:16 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [java.lang.IllegalArgumentException: No enum constant com.restaurant.billing.entity.SyncLog.SyncOperation.create]
2025-12-04 12:56:16 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 12:56:16 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 12:56:16 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:56:16 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 12:56:16 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 12:56:16 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#getRestaurantProfile()
2025-12-04 12:56:16 [http-nio-8881-exec-5] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:56:16 [http-nio-8881-exec-5] INFO  c.r.b.service.RestaurantService - Fetching restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:56:16 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 12:56:16 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:56:16 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 12:56:16 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:58:31 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/orders
2025-12-04 12:58:31 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:58:31 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/orders
2025-12-04 12:58:31 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/orders", parameters={}
2025-12-04 12:58:31 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#getAllOrders()
2025-12-04 12:58:31 [http-nio-8881-exec-2] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:58:31 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 12:58:31 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:58:31 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:58:31 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:58:31 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:58:31 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:58:31 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:58:31 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:58:31 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:58:31 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:58:31 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:58:31 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:58:31 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:58:31 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:58:31 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 12:58:31 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:58:31 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[OrderDto(id=3d2cc165-482d-4290-b220-105d1ad18880, orderNumber=ORD1764763565538, tableId=null, table (truncated)...]
2025-12-04 12:58:31 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:58:32 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/menu
2025-12-04 12:58:32 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:58:32 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/menu
2025-12-04 12:58:32 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/menu", parameters={}
2025-12-04 12:58:32 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.MenuController#getAllMenuItems()
2025-12-04 12:58:32 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:58:32 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        mi1_0.id,
        mi1_0.category_id,
        mi1_0.created_at,
        mi1_0.description,
        mi1_0.device_id,
        mi1_0.image_path,
        mi1_0.is_available,
        mi1_0.is_deleted,
        mi1_0.is_veg,
        mi1_0.name,
        mi1_0.preparation_time,
        mi1_0.price,
        mi1_0.synced_at,
        mi1_0.tenant_id,
        mi1_0.updated_at,
        mi1_0.version 
    from
        public.menu_items mi1_0 
    where
        mi1_0.tenant_id=? 
        and mi1_0.is_deleted=?
2025-12-04 12:58:32 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:58:32 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[MenuItemDto(id=8a5577b8-36d5-4a3d-9299-903f009a42b9, categoryId=6ed45abe-f8f6-4966-8126-a3f0d0bd0aa (truncated)...]
2025-12-04 12:58:32 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:58:32 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/categories?activeOnly=true
2025-12-04 12:58:32 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:58:32 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/categories?activeOnly=true
2025-12-04 12:58:32 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/categories?activeOnly=true", parameters={masked}
2025-12-04 12:58:32 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.CategoryController#getAllCategories(UserDetails, Boolean)
2025-12-04 12:58:32 [http-nio-8881-exec-7] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:58:32 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:58:32 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.display_order,
        c1_0.is_active,
        c1_0.name,
        c1_0.tenant_id,
        c1_0.updated_at 
    from
        public.categories c1_0 
    where
        c1_0.tenant_id=? 
        and c1_0.is_active=? 
    order by
        c1_0.display_order
2025-12-04 12:58:32 [http-nio-8881-exec-7] DEBUG c.r.billing.service.CategoryService - Found 2 categories for tenant cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:58:32 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:58:32 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[CategoryDto(id=6ed45abe-f8f6-4966-8126-a3f0d0bd0aaa, name=Main course, displayOrder=1), CategoryDto (truncated)...]
2025-12-04 12:58:32 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:58:33 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/reports/day-wise?startDate=2025-11-27T12%3A58%3A33.275&endDate=2025-12-04T12%3A58%3A33.275
2025-12-04 12:58:33 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/reports/day-wise?startDate=2025-11-27T12%3A58%3A33.275&endDate=2025-12-04T12%3A58%3A33.275
2025-12-04 12:58:33 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:58:33 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/reports/day-wise?startDate=2025-11-27T12%3A58%3A33.275&endDate=2025-12-04T12%3A58%3A33.275
2025-12-04 12:58:33 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/day-wise?startDate=2025-11-27T12%3A58%3A33.275&endDate=2025-12-04T12%3A58%3A33.275", parameters={masked}
2025-12-04 12:58:33 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.ReportController#getDayWiseSales(LocalDateTime, LocalDateTime)
2025-12-04 12:58:33 [http-nio-8881-exec-9] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:58:33 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 12:58:33 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:58:33 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[{date=2025-12-03, totalSales=0}, {date=2025-12-04, totalSales=0}]]
2025-12-04 12:58:33 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 12:58:33 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/reports/product-wise?startDate=2025-11-27T12%3A58%3A33.275&endDate=2025-12-04T12%3A58%3A33.275
2025-12-04 12:58:33 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/reports/product-wise?startDate=2025-11-27T12%3A58%3A33.275&endDate=2025-12-04T12%3A58%3A33.275
2025-12-04 12:58:33 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 12:58:33 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/reports/product-wise?startDate=2025-11-27T12%3A58%3A33.275&endDate=2025-12-04T12%3A58%3A33.275
2025-12-04 12:58:33 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/product-wise?startDate=2025-11-27T12%3A58%3A33.275&endDate=2025-12-04T12%3A58%3A33.275", parameters={masked}
2025-12-04 12:58:33 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.ReportController#getProductWiseSales(LocalDateTime, LocalDateTime)
2025-12-04 12:58:33 [http-nio-8881-exec-3] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 12:58:33 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        oi1_0.menu_item_id,
        oi1_0.item_name,
        sum(oi1_0.quantity),
        sum(oi1_0.total_price) 
    from
        public.order_items oi1_0 
    join
        public.orders o1_0 
            on o1_0.id=oi1_0.order_id 
    where
        o1_0.tenant_id=? 
        and o1_0.created_at between ? and ? 
    group by
        oi1_0.menu_item_id,
        oi1_0.item_name 
    order by
        sum(oi1_0.total_price) desc
2025-12-04 12:58:33 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 12:58:33 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[{totalRevenue=285.00, totalQuantity=19, itemName=TEA, menuItemId=8a5577b8-36d5-4a3d-9299-903f009a42 (truncated)...]
2025-12-04 12:58:33 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:06:34 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/auth/login
2025-12-04 13:06:34 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-12-04 13:06:34 [http-nio-8881-exec-6] ERROR c.r.billing.security.JwtUtil - Invalid JWT token: JWT expired at 2025-12-04T07:07:41Z. Current time: 2025-12-04T07:36:34Z, a difference of 1733152 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-12-04 13:06:34 [http-nio-8881-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-04 13:06:34 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-12-04 13:06:34 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-12-04 13:06:34 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.AuthController#login(LoginRequest)
2025-12-04 13:06:34 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(restaurantCode=REST14DAA490, username=Ganesh@gmail.com, password=Rest@1234)]
2025-12-04 13:06:34 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.restaurant_code=?
2025-12-04 13:06:34 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=? 
        and u1_0.tenant_id=?
2025-12-04 13:06:34 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    update
        public.users 
    set
        auth_provider=?,
        email=?,
        google_id=?,
        is_active=?,
        last_login=?,
        name=?,
        password_hash=?,
        phone=?,
        refresh_token=?,
        refresh_token_expiry=?,
        role=?,
        tenant_id=?,
        updated_at=? 
    where
        id=?
2025-12-04 13:06:34 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:06:34 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiT1dORVIiLCJ0ZW5hbnRJZCI6ImNjNzFkN2U0LWNmNj (truncated)...]
2025-12-04 13:06:34 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:06:34 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/today-sales
2025-12-04 13:06:34 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/active-orders
2025-12-04 13:06:34 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/pending-payments
2025-12-04 13:06:34 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/today-sales
2025-12-04 13:06:34 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/stats
2025-12-04 13:06:34 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/active-orders
2025-12-04 13:06:34 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/tables-occupied
2025-12-04 13:06:34 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/pending-payments
2025-12-04 13:06:34 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/stats
2025-12-04 13:06:34 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:06:34 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/tables-occupied
2025-12-04 13:06:34 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/today-sales
2025-12-04 13:06:34 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/today-sales", parameters={}
2025-12-04 13:06:34 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTodaySales()
2025-12-04 13:06:34 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:06:34 [http-nio-8881-exec-8] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:06:34 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:06:34 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:06:34 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 13:06:34 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:06:34 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/stats
2025-12-04 13:06:34 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/stats", parameters={}
2025-12-04 13:06:34 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getDashboardStats()
2025-12-04 13:06:34 [http-nio-8881-exec-10] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:06:34 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/active-orders
2025-12-04 13:06:34 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/active-orders", parameters={}
2025-12-04 13:06:34 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getActiveOrders()
2025-12-04 13:06:34 [http-nio-8881-exec-3] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:06:34 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 13:06:34 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/tables-occupied
2025-12-04 13:06:34 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/tables-occupied", parameters={}
2025-12-04 13:06:34 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTablesOccupied()
2025-12-04 13:06:34 [http-nio-8881-exec-6] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:06:34 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/pending-payments
2025-12-04 13:06:34 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/pending-payments", parameters={}
2025-12-04 13:06:34 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getPendingPayments()
2025-12-04 13:06:34 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 13:06:34 [http-nio-8881-exec-5] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:06:34 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 13:06:34 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 13:06:34 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 13:06:34 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:06:34 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 13:06:34 [http-nio-8881-exec-8] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session
	at org.hibernate.collection.spi.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:636)
	at org.hibernate.collection.spi.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:219)
	at org.hibernate.collection.spi.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:615)
	at org.hibernate.collection.spi.AbstractPersistentCollection.read(AbstractPersistentCollection.java:138)
	at org.hibernate.collection.spi.PersistentBag.iterator(PersistentBag.java:369)
	at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1842)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.reduce(ReferencePipeline.java:657)
	at com.restaurant.billing.service.DashboardService.getTodaySales(DashboardService.java:80)
	at com.restaurant.billing.controller.DashboardController.getTodaySales(DashboardController.java:24)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 13:06:34 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:06:34 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:06:34 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T13:06:34.567761117, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 13:06:34 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 13:06:34 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:06:34 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 13:06:34 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:06:34 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session]
2025-12-04 13:06:34 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 13:06:34 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 13:06:34 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:06:34 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:06:34 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 13:06:34 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 13:06:34 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:06:34 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{tablesOccupied=0, pendingPayments=0, activeOrders=0, todaySales=0}]
2025-12-04 13:06:34 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:06:34 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/orders
2025-12-04 13:06:34 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/orders
2025-12-04 13:06:34 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:06:34 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/orders
2025-12-04 13:06:34 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/orders", parameters={}
2025-12-04 13:06:34 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#getAllOrders()
2025-12-04 13:06:34 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:06:34 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 13:06:34 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:06:34 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:06:34 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:06:34 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:06:34 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:06:34 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:06:34 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:06:34 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:06:34 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:06:34 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:06:34 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:06:34 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:06:34 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:06:34 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:06:34 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:06:34 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[OrderDto(id=3d2cc165-482d-4290-b220-105d1ad18880, orderNumber=ORD1764763565538, tableId=null, table (truncated)...]
2025-12-04 13:06:34 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:06:36 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/restaurant/profile
2025-12-04 13:06:36 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 13:06:36 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:06:36 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 13:06:36 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 13:06:36 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#getRestaurantProfile()
2025-12-04 13:06:36 [http-nio-8881-exec-9] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:06:36 [http-nio-8881-exec-9] INFO  c.r.b.service.RestaurantService - Fetching restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:06:36 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 13:06:36 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:06:36 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 13:06:36 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:06:44 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/orders
2025-12-04 13:06:44 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:06:44 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/orders
2025-12-04 13:06:44 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/orders", parameters={}
2025-12-04 13:06:44 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#getAllOrders()
2025-12-04 13:06:44 [http-nio-8881-exec-1] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:06:44 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 13:06:44 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:06:44 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:06:44 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:06:44 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:06:44 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:06:44 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:06:44 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:06:44 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:06:44 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:06:44 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:06:44 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:06:44 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:06:44 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:06:44 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:06:44 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:06:44 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[OrderDto(id=3d2cc165-482d-4290-b220-105d1ad18880, orderNumber=ORD1764763565538, tableId=null, table (truncated)...]
2025-12-04 13:06:44 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:06:46 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/today-sales
2025-12-04 13:06:46 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/active-orders
2025-12-04 13:06:46 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/pending-payments
2025-12-04 13:06:46 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/tables-occupied
2025-12-04 13:06:46 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:06:46 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:06:46 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:06:46 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:06:46 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/pending-payments
2025-12-04 13:06:46 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/pending-payments", parameters={}
2025-12-04 13:06:46 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/today-sales
2025-12-04 13:06:46 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/tables-occupied
2025-12-04 13:06:46 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getPendingPayments()
2025-12-04 13:06:46 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/today-sales", parameters={}
2025-12-04 13:06:46 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/tables-occupied", parameters={}
2025-12-04 13:06:46 [http-nio-8881-exec-3] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:06:46 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTodaySales()
2025-12-04 13:06:46 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTablesOccupied()
2025-12-04 13:06:46 [http-nio-8881-exec-6] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:06:46 [http-nio-8881-exec-5] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:06:46 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/active-orders
2025-12-04 13:06:46 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/active-orders", parameters={}
2025-12-04 13:06:46 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getActiveOrders()
2025-12-04 13:06:46 [http-nio-8881-exec-8] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:06:46 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 13:06:46 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 13:06:46 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 13:06:46 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 13:06:46 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:06:46 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 13:06:46 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:06:46 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 13:06:46 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 13:06:46 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:06:46 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:06:46 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:06:46 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 13:06:46 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:06:46 [http-nio-8881-exec-6] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session
	at org.hibernate.collection.spi.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:636)
	at org.hibernate.collection.spi.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:219)
	at org.hibernate.collection.spi.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:615)
	at org.hibernate.collection.spi.AbstractPersistentCollection.read(AbstractPersistentCollection.java:138)
	at org.hibernate.collection.spi.PersistentBag.iterator(PersistentBag.java:369)
	at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1842)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.reduce(ReferencePipeline.java:657)
	at com.restaurant.billing.service.DashboardService.getTodaySales(DashboardService.java:80)
	at com.restaurant.billing.controller.DashboardController.getTodaySales(DashboardController.java:24)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 13:06:46 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:06:46 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T13:06:46.184739624, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 13:06:46 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session]
2025-12-04 13:06:46 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 13:06:46 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/stats
2025-12-04 13:06:46 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:06:46 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/stats
2025-12-04 13:06:46 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/stats", parameters={}
2025-12-04 13:06:46 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getDashboardStats()
2025-12-04 13:06:46 [http-nio-8881-exec-10] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:06:46 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 13:06:46 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 13:06:46 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 13:06:46 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 13:06:46 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:06:46 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{tablesOccupied=0, pendingPayments=0, activeOrders=0, todaySales=0}]
2025-12-04 13:06:46 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:06:46 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/orders
2025-12-04 13:06:46 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:06:46 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/orders
2025-12-04 13:06:46 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/orders", parameters={}
2025-12-04 13:06:46 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#getAllOrders()
2025-12-04 13:06:46 [http-nio-8881-exec-2] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:06:46 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 13:06:46 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:06:46 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:06:46 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:06:46 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:06:46 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:06:46 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:06:46 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:06:46 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:06:46 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:06:46 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:06:46 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:06:46 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:06:46 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:06:46 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:06:46 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:06:46 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[OrderDto(id=3d2cc165-482d-4290-b220-105d1ad18880, orderNumber=ORD1764763565538, tableId=null, table (truncated)...]
2025-12-04 13:06:46 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:06:48 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/menu
2025-12-04 13:06:48 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/menu
2025-12-04 13:06:48 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:06:48 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/menu
2025-12-04 13:06:48 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/menu", parameters={}
2025-12-04 13:06:48 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.MenuController#getAllMenuItems()
2025-12-04 13:06:48 [http-nio-8881-exec-7] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:06:48 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        mi1_0.id,
        mi1_0.category_id,
        mi1_0.created_at,
        mi1_0.description,
        mi1_0.device_id,
        mi1_0.image_path,
        mi1_0.is_available,
        mi1_0.is_deleted,
        mi1_0.is_veg,
        mi1_0.name,
        mi1_0.preparation_time,
        mi1_0.price,
        mi1_0.synced_at,
        mi1_0.tenant_id,
        mi1_0.updated_at,
        mi1_0.version 
    from
        public.menu_items mi1_0 
    where
        mi1_0.tenant_id=? 
        and mi1_0.is_deleted=?
2025-12-04 13:06:48 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:06:48 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[MenuItemDto(id=8a5577b8-36d5-4a3d-9299-903f009a42b9, categoryId=6ed45abe-f8f6-4966-8126-a3f0d0bd0aa (truncated)...]
2025-12-04 13:06:48 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:06:48 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/categories?activeOnly=true
2025-12-04 13:06:48 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/categories?activeOnly=true
2025-12-04 13:06:48 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:06:48 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/categories?activeOnly=true
2025-12-04 13:06:48 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/categories?activeOnly=true", parameters={masked}
2025-12-04 13:06:48 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.CategoryController#getAllCategories(UserDetails, Boolean)
2025-12-04 13:06:48 [http-nio-8881-exec-1] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:06:48 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:06:48 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.display_order,
        c1_0.is_active,
        c1_0.name,
        c1_0.tenant_id,
        c1_0.updated_at 
    from
        public.categories c1_0 
    where
        c1_0.tenant_id=? 
        and c1_0.is_active=? 
    order by
        c1_0.display_order
2025-12-04 13:06:48 [http-nio-8881-exec-1] DEBUG c.r.billing.service.CategoryService - Found 2 categories for tenant cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:06:48 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:06:48 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[CategoryDto(id=6ed45abe-f8f6-4966-8126-a3f0d0bd0aaa, name=Main course, displayOrder=1), CategoryDto (truncated)...]
2025-12-04 13:06:48 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:06:51 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/orders
2025-12-04 13:06:51 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:06:51 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/orders
2025-12-04 13:06:51 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/orders", parameters={}
2025-12-04 13:06:51 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#createOrder(CreateOrderRequest)
2025-12-04 13:06:51 [http-nio-8881-exec-5] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:06:51 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [CreateOrderRequest(tableId=null, customerName=null, customerPhone=null, orderType=DINE_IN, items=[Or (truncated)...]
2025-12-04 13:06:51 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 13:06:51 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        mi1_0.id,
        mi1_0.category_id,
        mi1_0.created_at,
        mi1_0.description,
        mi1_0.device_id,
        mi1_0.image_path,
        mi1_0.is_available,
        mi1_0.is_deleted,
        mi1_0.is_veg,
        mi1_0.name,
        mi1_0.preparation_time,
        mi1_0.price,
        mi1_0.synced_at,
        mi1_0.tenant_id,
        mi1_0.updated_at,
        mi1_0.version 
    from
        public.menu_items mi1_0 
    where
        mi1_0.id=?
2025-12-04 13:06:51 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.order_id=?
2025-12-04 13:06:51 [http-nio-8881-exec-5] INFO  c.r.billing.service.OrderService - Bill generated for order: de44930b-7249-41d6-a21b-2a881acb77a5
2025-12-04 13:06:51 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    insert 
    into
        public.orders
        (created_at, created_by, customer_name, customer_phone, device_id, discount_amount, is_deleted, notes, order_number, order_status, order_type, service_charge, subtotal, synced_at, table_id, tax_amount, tenant_id, total_amount, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-04 13:06:51 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    insert 
    into
        public.order_items
        (created_at, item_name, menu_item_id, order_id, quantity, special_instructions, status, total_price, unit_price, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-04 13:06:51 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    insert 
    into
        public.bills
        (bill_number, change_amount, created_at, discount_amount, generated_by, invoice_path, order_id, paid_amount, payment_method, payment_status, service_charge, subtotal, tax_amount, tenant_id, total_amount, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-04 13:06:51 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:06:51 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [OrderDto(id=de44930b-7249-41d6-a21b-2a881acb77a5, orderNumber=ORD1764833811691, tableId=null, tableN (truncated)...]
2025-12-04 13:06:51 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-12-04 13:06:51 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/sync
2025-12-04 13:06:51 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/sync
2025-12-04 13:06:51 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:06:51 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/sync
2025-12-04 13:06:51 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/sync", parameters={}
2025-12-04 13:06:51 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.SyncController#performSync(SyncRequest)
2025-12-04 13:06:51 [http-nio-8881-exec-8] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:06:51 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [SyncRequest(deviceId=d23c59b8-4056-4cc6-b9bc-6ac5018951cf, lastSyncTime=1970-01-01T05:30, data=[Sync (truncated)...]
2025-12-04 13:06:51 [http-nio-8881-exec-8] ERROR c.r.billing.service.SyncService - Sync error for item: de44930b-7249-41d6-a21b-2a881acb77a5
java.lang.IllegalArgumentException: Unknown entity type: order
	at com.restaurant.billing.service.SyncService.processSyncItem(SyncService.java:107)
	at com.restaurant.billing.service.SyncService.performSync(SyncService.java:34)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at com.restaurant.billing.service.SyncService$$SpringCGLIB$$0.performSync(<generated>)
	at com.restaurant.billing.controller.SyncController.performSync(SyncController.java:23)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 13:06:51 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 13:06:51 [http-nio-8881-exec-8] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
java.lang.IllegalArgumentException: No enum constant com.restaurant.billing.entity.SyncLog.SyncOperation.create
	at java.base/java.lang.Enum.valueOf(Enum.java:273)
	at com.restaurant.billing.entity.SyncLog$SyncOperation.valueOf(SyncLog.java:65)
	at com.restaurant.billing.service.SyncService.logSync(SyncService.java:158)
	at com.restaurant.billing.service.SyncService.performSync(SyncService.java:51)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at com.restaurant.billing.service.SyncService$$SpringCGLIB$$0.performSync(<generated>)
	at com.restaurant.billing.controller.SyncController.performSync(SyncController.java:23)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 13:06:51 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:06:51 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T13:06:51.729621446, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 13:06:51 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [java.lang.IllegalArgumentException: No enum constant com.restaurant.billing.entity.SyncLog.SyncOperation.create]
2025-12-04 13:06:51 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 13:06:51 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 13:06:51 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:06:51 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 13:06:51 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 13:06:51 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#getRestaurantProfile()
2025-12-04 13:06:51 [http-nio-8881-exec-6] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:06:51 [http-nio-8881-exec-6] INFO  c.r.b.service.RestaurantService - Fetching restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:06:51 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 13:06:51 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:06:51 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 13:06:51 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:06:56 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 13:06:56 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:06:56 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 13:06:56 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 13:06:56 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#getRestaurantProfile()
2025-12-04 13:06:56 [http-nio-8881-exec-10] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:06:56 [http-nio-8881-exec-10] INFO  c.r.b.service.RestaurantService - Fetching restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:06:56 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 13:06:56 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:06:56 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 13:06:56 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:07:05 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/restaurant/logo
2025-12-04 13:07:05 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/restaurant/logo
2025-12-04 13:07:05 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:07:05 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/restaurant/logo
2025-12-04 13:07:05 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/restaurant/logo", parameters={multipart}
2025-12-04 13:07:05 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#uploadLogo(MultipartFile, MultipartFile, MultipartFile)
2025-12-04 13:07:05 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:07:05 [http-nio-8881-exec-4] INFO  c.r.b.service.RestaurantService - Uploading logo for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:07:05 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 13:07:05 [http-nio-8881-exec-4] INFO  c.r.b.service.FileStorageService - File deleted: ./uploads/logos/7e5f410c-a420-483c-93ea-2e36f724d947.png
2025-12-04 13:07:05 [http-nio-8881-exec-4] INFO  c.r.b.service.FileStorageService - File stored: ./uploads/logos/22ea2dbd-3e37-4d76-86d2-54a6ec777854.png
2025-12-04 13:07:05 [http-nio-8881-exec-4] INFO  c.r.b.service.RestaurantService - Logo uploaded successfully for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:07:05 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    update
        public.tenants 
    set
        address=?,
        city=?,
        currency=?,
        gstin=?,
        is_active=?,
        logo_path=?,
        max_storage_gb=?,
        max_users=?,
        owner_email=?,
        owner_name=?,
        owner_phone=?,
        pincode=?,
        razorpay_customer_id=?,
        razorpay_subscription_id=?,
        restaurant_code=?,
        restaurant_name=?,
        service_charge_rate=?,
        state=?,
        subscription_end_date=?,
        subscription_plan=?,
        subscription_start_date=?,
        subscription_status=?,
        tax_rate=?,
        timezone=?,
        trial_end_date=?,
        updated_at=? 
    where
        id=?
2025-12-04 13:07:05 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:07:05 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 13:07:05 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:07:05 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/restaurant/profile
2025-12-04 13:07:05 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:07:05 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/restaurant/profile
2025-12-04 13:07:05 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/api/restaurant/profile", parameters={}
2025-12-04 13:07:05 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#updateRestaurantProfile(UpdateRestaurantProfileRequest)
2025-12-04 13:07:05 [http-nio-8881-exec-7] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:07:05 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [UpdateRestaurantProfileRequest(restaurantName=Ganesh, ownerEmail=Ganesh@gmail.com, ownerName=null, o (truncated)...]
2025-12-04 13:07:05 [http-nio-8881-exec-7] INFO  c.r.b.service.RestaurantService - Updating restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:07:05 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 13:07:05 [http-nio-8881-exec-7] INFO  c.r.b.service.RestaurantService - Restaurant profile updated successfully for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:07:05 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:07:05 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 13:07:05 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:07:05 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 13:07:05 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:07:05 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 13:07:05 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 13:07:05 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#getRestaurantProfile()
2025-12-04 13:07:05 [http-nio-8881-exec-9] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:07:05 [http-nio-8881-exec-9] INFO  c.r.b.service.RestaurantService - Fetching restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:07:05 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 13:07:05 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:07:05 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 13:07:05 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:07:11 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/today-sales
2025-12-04 13:07:11 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:07:11 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/today-sales
2025-12-04 13:07:11 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/today-sales", parameters={}
2025-12-04 13:07:11 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTodaySales()
2025-12-04 13:07:11 [http-nio-8881-exec-1] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:07:11 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 13:07:11 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 13:07:11 [http-nio-8881-exec-1] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session
	at org.hibernate.collection.spi.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:636)
	at org.hibernate.collection.spi.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:219)
	at org.hibernate.collection.spi.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:615)
	at org.hibernate.collection.spi.AbstractPersistentCollection.read(AbstractPersistentCollection.java:138)
	at org.hibernate.collection.spi.PersistentBag.iterator(PersistentBag.java:369)
	at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1842)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.reduce(ReferencePipeline.java:657)
	at com.restaurant.billing.service.DashboardService.getTodaySales(DashboardService.java:80)
	at com.restaurant.billing.controller.DashboardController.getTodaySales(DashboardController.java:24)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 13:07:11 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:07:11 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T13:07:11.318862452, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 13:07:11 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session]
2025-12-04 13:07:11 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 13:07:11 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/active-orders
2025-12-04 13:07:11 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/pending-payments
2025-12-04 13:07:11 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/tables-occupied
2025-12-04 13:07:11 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/stats
2025-12-04 13:07:11 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:07:11 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:07:11 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:07:11 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:07:11 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/stats
2025-12-04 13:07:11 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/pending-payments
2025-12-04 13:07:11 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/active-orders
2025-12-04 13:07:11 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/tables-occupied
2025-12-04 13:07:11 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/stats", parameters={}
2025-12-04 13:07:11 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/pending-payments", parameters={}
2025-12-04 13:07:11 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/active-orders", parameters={}
2025-12-04 13:07:11 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/tables-occupied", parameters={}
2025-12-04 13:07:11 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getDashboardStats()
2025-12-04 13:07:11 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getPendingPayments()
2025-12-04 13:07:11 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTablesOccupied()
2025-12-04 13:07:11 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getActiveOrders()
2025-12-04 13:07:11 [http-nio-8881-exec-6] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:07:11 [http-nio-8881-exec-3] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:07:11 [http-nio-8881-exec-8] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:07:11 [http-nio-8881-exec-5] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:07:11 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 13:07:11 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 13:07:11 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 13:07:11 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 13:07:11 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:07:11 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 13:07:11 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:07:11 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 13:07:11 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 13:07:11 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:07:11 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 13:07:11 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:07:11 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:07:11 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:07:11 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 13:07:11 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 13:07:11 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:07:11 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{tablesOccupied=0, pendingPayments=0, activeOrders=0, todaySales=0}]
2025-12-04 13:07:11 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:07:11 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/orders
2025-12-04 13:07:11 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:07:11 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/orders
2025-12-04 13:07:11 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/orders", parameters={}
2025-12-04 13:07:11 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#getAllOrders()
2025-12-04 13:07:11 [http-nio-8881-exec-10] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:07:11 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 13:07:11 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:07:11 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:07:11 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:07:11 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:07:11 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:07:11 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:07:11 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:07:11 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:07:11 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:07:11 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:07:11 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:07:11 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:07:11 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:07:11 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:07:11 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:07:11 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:07:11 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[OrderDto(id=3d2cc165-482d-4290-b220-105d1ad18880, orderNumber=ORD1764763565538, tableId=null, table (truncated)...]
2025-12-04 13:07:11 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:07:12 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/menu
2025-12-04 13:07:12 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:07:12 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/menu
2025-12-04 13:07:12 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/menu", parameters={}
2025-12-04 13:07:12 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.MenuController#getAllMenuItems()
2025-12-04 13:07:12 [http-nio-8881-exec-2] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:07:12 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        mi1_0.id,
        mi1_0.category_id,
        mi1_0.created_at,
        mi1_0.description,
        mi1_0.device_id,
        mi1_0.image_path,
        mi1_0.is_available,
        mi1_0.is_deleted,
        mi1_0.is_veg,
        mi1_0.name,
        mi1_0.preparation_time,
        mi1_0.price,
        mi1_0.synced_at,
        mi1_0.tenant_id,
        mi1_0.updated_at,
        mi1_0.version 
    from
        public.menu_items mi1_0 
    where
        mi1_0.tenant_id=? 
        and mi1_0.is_deleted=?
2025-12-04 13:07:12 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:07:12 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[MenuItemDto(id=8a5577b8-36d5-4a3d-9299-903f009a42b9, categoryId=6ed45abe-f8f6-4966-8126-a3f0d0bd0aa (truncated)...]
2025-12-04 13:07:12 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:07:12 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/categories?activeOnly=true
2025-12-04 13:07:12 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:07:12 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/categories?activeOnly=true
2025-12-04 13:07:12 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/categories?activeOnly=true", parameters={masked}
2025-12-04 13:07:12 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.CategoryController#getAllCategories(UserDetails, Boolean)
2025-12-04 13:07:12 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:07:12 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:07:12 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.display_order,
        c1_0.is_active,
        c1_0.name,
        c1_0.tenant_id,
        c1_0.updated_at 
    from
        public.categories c1_0 
    where
        c1_0.tenant_id=? 
        and c1_0.is_active=? 
    order by
        c1_0.display_order
2025-12-04 13:07:12 [http-nio-8881-exec-4] DEBUG c.r.billing.service.CategoryService - Found 2 categories for tenant cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:07:12 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:07:12 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[CategoryDto(id=6ed45abe-f8f6-4966-8126-a3f0d0bd0aaa, name=Main course, displayOrder=1), CategoryDto (truncated)...]
2025-12-04 13:07:12 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:07:16 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/orders
2025-12-04 13:07:16 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:07:16 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/orders
2025-12-04 13:07:16 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/orders", parameters={}
2025-12-04 13:07:16 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#createOrder(CreateOrderRequest)
2025-12-04 13:07:16 [http-nio-8881-exec-7] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:07:16 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [CreateOrderRequest(tableId=null, customerName=null, customerPhone=null, orderType=DINE_IN, items=[Or (truncated)...]
2025-12-04 13:07:16 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 13:07:16 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        mi1_0.id,
        mi1_0.category_id,
        mi1_0.created_at,
        mi1_0.description,
        mi1_0.device_id,
        mi1_0.image_path,
        mi1_0.is_available,
        mi1_0.is_deleted,
        mi1_0.is_veg,
        mi1_0.name,
        mi1_0.preparation_time,
        mi1_0.price,
        mi1_0.synced_at,
        mi1_0.tenant_id,
        mi1_0.updated_at,
        mi1_0.version 
    from
        public.menu_items mi1_0 
    where
        mi1_0.id=?
2025-12-04 13:07:16 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.order_id=?
2025-12-04 13:07:16 [http-nio-8881-exec-7] INFO  c.r.billing.service.OrderService - Bill generated for order: 2acc2736-efb2-46a1-93db-e0aefab1d3e9
2025-12-04 13:07:16 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    insert 
    into
        public.orders
        (created_at, created_by, customer_name, customer_phone, device_id, discount_amount, is_deleted, notes, order_number, order_status, order_type, service_charge, subtotal, synced_at, table_id, tax_amount, tenant_id, total_amount, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-04 13:07:16 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    insert 
    into
        public.order_items
        (created_at, item_name, menu_item_id, order_id, quantity, special_instructions, status, total_price, unit_price, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-04 13:07:16 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    insert 
    into
        public.bills
        (bill_number, change_amount, created_at, discount_amount, generated_by, invoice_path, order_id, paid_amount, payment_method, payment_status, service_charge, subtotal, tax_amount, tenant_id, total_amount, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-04 13:07:16 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:07:16 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [OrderDto(id=2acc2736-efb2-46a1-93db-e0aefab1d3e9, orderNumber=ORD1764833836727, tableId=null, tableN (truncated)...]
2025-12-04 13:07:16 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-12-04 13:07:16 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/sync
2025-12-04 13:07:16 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:07:16 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/sync
2025-12-04 13:07:16 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/sync", parameters={}
2025-12-04 13:07:16 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.SyncController#performSync(SyncRequest)
2025-12-04 13:07:16 [http-nio-8881-exec-9] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:07:16 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [SyncRequest(deviceId=d23c59b8-4056-4cc6-b9bc-6ac5018951cf, lastSyncTime=1970-01-01T05:30, data=[Sync (truncated)...]
2025-12-04 13:07:16 [http-nio-8881-exec-9] ERROR c.r.billing.service.SyncService - Sync error for item: de44930b-7249-41d6-a21b-2a881acb77a5
java.lang.IllegalArgumentException: Unknown entity type: order
	at com.restaurant.billing.service.SyncService.processSyncItem(SyncService.java:107)
	at com.restaurant.billing.service.SyncService.performSync(SyncService.java:34)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at com.restaurant.billing.service.SyncService$$SpringCGLIB$$0.performSync(<generated>)
	at com.restaurant.billing.controller.SyncController.performSync(SyncController.java:23)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 13:07:16 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 13:07:16 [http-nio-8881-exec-9] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
java.lang.IllegalArgumentException: No enum constant com.restaurant.billing.entity.SyncLog.SyncOperation.create
	at java.base/java.lang.Enum.valueOf(Enum.java:273)
	at com.restaurant.billing.entity.SyncLog$SyncOperation.valueOf(SyncLog.java:65)
	at com.restaurant.billing.service.SyncService.logSync(SyncService.java:158)
	at com.restaurant.billing.service.SyncService.performSync(SyncService.java:51)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at com.restaurant.billing.service.SyncService$$SpringCGLIB$$0.performSync(<generated>)
	at com.restaurant.billing.controller.SyncController.performSync(SyncController.java:23)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 13:07:16 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:07:16 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T13:07:16.762388609, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 13:07:16 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [java.lang.IllegalArgumentException: No enum constant com.restaurant.billing.entity.SyncLog.SyncOperation.create]
2025-12-04 13:07:16 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 13:07:16 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 13:07:16 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:07:16 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 13:07:16 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 13:07:16 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#getRestaurantProfile()
2025-12-04 13:07:16 [http-nio-8881-exec-1] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:07:16 [http-nio-8881-exec-1] INFO  c.r.b.service.RestaurantService - Fetching restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:07:16 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 13:07:16 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:07:16 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 13:07:16 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:07:21 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/reports/day-wise?startDate=2025-11-27T13%3A07%3A21.033&endDate=2025-12-04T13%3A07%3A21.033
2025-12-04 13:07:21 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/reports/day-wise?startDate=2025-11-27T13%3A07%3A21.033&endDate=2025-12-04T13%3A07%3A21.033
2025-12-04 13:07:21 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:07:21 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/reports/day-wise?startDate=2025-11-27T13%3A07%3A21.033&endDate=2025-12-04T13%3A07%3A21.033
2025-12-04 13:07:21 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/day-wise?startDate=2025-11-27T13%3A07%3A21.033&endDate=2025-12-04T13%3A07%3A21.033", parameters={masked}
2025-12-04 13:07:21 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.ReportController#getDayWiseSales(LocalDateTime, LocalDateTime)
2025-12-04 13:07:21 [http-nio-8881-exec-3] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:07:21 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 13:07:21 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:07:21 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[{date=2025-12-03, totalSales=0}, {date=2025-12-04, totalSales=0}]]
2025-12-04 13:07:21 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:07:21 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/reports/product-wise?startDate=2025-11-27T13%3A07%3A21.033&endDate=2025-12-04T13%3A07%3A21.033
2025-12-04 13:07:21 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/reports/product-wise?startDate=2025-11-27T13%3A07%3A21.033&endDate=2025-12-04T13%3A07%3A21.033
2025-12-04 13:07:21 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:07:21 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/reports/product-wise?startDate=2025-11-27T13%3A07%3A21.033&endDate=2025-12-04T13%3A07%3A21.033
2025-12-04 13:07:21 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/product-wise?startDate=2025-11-27T13%3A07%3A21.033&endDate=2025-12-04T13%3A07%3A21.033", parameters={masked}
2025-12-04 13:07:21 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.ReportController#getProductWiseSales(LocalDateTime, LocalDateTime)
2025-12-04 13:07:21 [http-nio-8881-exec-6] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:07:21 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        oi1_0.menu_item_id,
        oi1_0.item_name,
        sum(oi1_0.quantity),
        sum(oi1_0.total_price) 
    from
        public.order_items oi1_0 
    join
        public.orders o1_0 
            on o1_0.id=oi1_0.order_id 
    where
        o1_0.tenant_id=? 
        and o1_0.created_at between ? and ? 
    group by
        oi1_0.menu_item_id,
        oi1_0.item_name 
    order by
        sum(oi1_0.total_price) desc
2025-12-04 13:07:21 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:07:21 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[{totalRevenue=315.00, totalQuantity=21, itemName=TEA, menuItemId=8a5577b8-36d5-4a3d-9299-903f009a42 (truncated)...]
2025-12-04 13:07:21 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:07:22 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/today-sales
2025-12-04 13:07:22 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/active-orders
2025-12-04 13:07:22 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/pending-payments
2025-12-04 13:07:22 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/tables-occupied
2025-12-04 13:07:22 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/stats
2025-12-04 13:07:22 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:07:22 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:07:22 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:07:22 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:07:22 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:07:22 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/today-sales
2025-12-04 13:07:22 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/active-orders
2025-12-04 13:07:22 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/pending-payments
2025-12-04 13:07:22 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/active-orders", parameters={}
2025-12-04 13:07:22 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/pending-payments", parameters={}
2025-12-04 13:07:22 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/today-sales", parameters={}
2025-12-04 13:07:22 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/tables-occupied
2025-12-04 13:07:22 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getActiveOrders()
2025-12-04 13:07:22 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTodaySales()
2025-12-04 13:07:22 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getPendingPayments()
2025-12-04 13:07:22 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/tables-occupied", parameters={}
2025-12-04 13:07:22 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:07:22 [http-nio-8881-exec-2] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:07:22 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTablesOccupied()
2025-12-04 13:07:22 [http-nio-8881-exec-10] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:07:22 [http-nio-8881-exec-7] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:07:22 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/stats
2025-12-04 13:07:22 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/stats", parameters={}
2025-12-04 13:07:22 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getDashboardStats()
2025-12-04 13:07:22 [http-nio-8881-exec-9] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:07:22 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 13:07:22 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 13:07:22 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 13:07:22 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 13:07:22 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 13:07:22 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:07:22 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 13:07:22 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:07:22 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 13:07:22 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:07:22 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 13:07:22 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 13:07:22 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:07:22 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:07:22 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:07:22 [http-nio-8881-exec-10] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session
	at org.hibernate.collection.spi.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:636)
	at org.hibernate.collection.spi.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:219)
	at org.hibernate.collection.spi.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:615)
	at org.hibernate.collection.spi.AbstractPersistentCollection.read(AbstractPersistentCollection.java:138)
	at org.hibernate.collection.spi.PersistentBag.iterator(PersistentBag.java:369)
	at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1842)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.reduce(ReferencePipeline.java:657)
	at com.restaurant.billing.service.DashboardService.getTodaySales(DashboardService.java:80)
	at com.restaurant.billing.controller.DashboardController.getTodaySales(DashboardController.java:24)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 13:07:22 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:07:22 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T13:07:22.097651587, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 13:07:22 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 13:07:22 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session]
2025-12-04 13:07:22 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 13:07:22 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 13:07:22 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 13:07:22 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:07:22 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{tablesOccupied=0, pendingPayments=0, activeOrders=0, todaySales=0}]
2025-12-04 13:07:22 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:07:22 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/orders
2025-12-04 13:07:22 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:07:22 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/orders
2025-12-04 13:07:22 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/orders", parameters={}
2025-12-04 13:07:22 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#getAllOrders()
2025-12-04 13:07:22 [http-nio-8881-exec-1] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:07:22 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 13:07:22 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:07:22 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:07:22 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:07:22 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:07:22 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:07:22 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:07:22 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:07:22 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:07:22 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:07:22 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:07:22 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:07:22 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:07:22 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:07:22 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:07:22 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:07:22 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:07:22 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:07:22 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[OrderDto(id=3d2cc165-482d-4290-b220-105d1ad18880, orderNumber=ORD1764763565538, tableId=null, table (truncated)...]
2025-12-04 13:07:22 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:07:23 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/menu
2025-12-04 13:07:23 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:07:23 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/menu
2025-12-04 13:07:23 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/menu", parameters={}
2025-12-04 13:07:23 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.MenuController#getAllMenuItems()
2025-12-04 13:07:23 [http-nio-8881-exec-8] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:07:23 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        mi1_0.id,
        mi1_0.category_id,
        mi1_0.created_at,
        mi1_0.description,
        mi1_0.device_id,
        mi1_0.image_path,
        mi1_0.is_available,
        mi1_0.is_deleted,
        mi1_0.is_veg,
        mi1_0.name,
        mi1_0.preparation_time,
        mi1_0.price,
        mi1_0.synced_at,
        mi1_0.tenant_id,
        mi1_0.updated_at,
        mi1_0.version 
    from
        public.menu_items mi1_0 
    where
        mi1_0.tenant_id=? 
        and mi1_0.is_deleted=?
2025-12-04 13:07:23 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:07:23 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[MenuItemDto(id=8a5577b8-36d5-4a3d-9299-903f009a42b9, categoryId=6ed45abe-f8f6-4966-8126-a3f0d0bd0aa (truncated)...]
2025-12-04 13:07:23 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:07:23 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/categories?activeOnly=true
2025-12-04 13:07:23 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:07:23 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/categories?activeOnly=true
2025-12-04 13:07:23 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/categories?activeOnly=true", parameters={masked}
2025-12-04 13:07:23 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.CategoryController#getAllCategories(UserDetails, Boolean)
2025-12-04 13:07:23 [http-nio-8881-exec-3] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:07:23 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:07:23 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.display_order,
        c1_0.is_active,
        c1_0.name,
        c1_0.tenant_id,
        c1_0.updated_at 
    from
        public.categories c1_0 
    where
        c1_0.tenant_id=? 
        and c1_0.is_active=? 
    order by
        c1_0.display_order
2025-12-04 13:07:23 [http-nio-8881-exec-3] DEBUG c.r.billing.service.CategoryService - Found 2 categories for tenant cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:07:23 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:07:23 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[CategoryDto(id=6ed45abe-f8f6-4966-8126-a3f0d0bd0aaa, name=Main course, displayOrder=1), CategoryDto (truncated)...]
2025-12-04 13:07:23 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:07:29 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/orders
2025-12-04 13:07:29 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:07:29 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/orders
2025-12-04 13:07:29 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/orders", parameters={}
2025-12-04 13:07:29 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#createOrder(CreateOrderRequest)
2025-12-04 13:07:29 [http-nio-8881-exec-5] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:07:29 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [CreateOrderRequest(tableId=null, customerName=null, customerPhone=null, orderType=DINE_IN, items=[Or (truncated)...]
2025-12-04 13:07:29 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 13:07:29 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        mi1_0.id,
        mi1_0.category_id,
        mi1_0.created_at,
        mi1_0.description,
        mi1_0.device_id,
        mi1_0.image_path,
        mi1_0.is_available,
        mi1_0.is_deleted,
        mi1_0.is_veg,
        mi1_0.name,
        mi1_0.preparation_time,
        mi1_0.price,
        mi1_0.synced_at,
        mi1_0.tenant_id,
        mi1_0.updated_at,
        mi1_0.version 
    from
        public.menu_items mi1_0 
    where
        mi1_0.id=?
2025-12-04 13:07:29 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.order_id=?
2025-12-04 13:07:29 [http-nio-8881-exec-5] INFO  c.r.billing.service.OrderService - Bill generated for order: 235bccdf-dc8d-425b-990c-dbfbaf73ac13
2025-12-04 13:07:29 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    insert 
    into
        public.orders
        (created_at, created_by, customer_name, customer_phone, device_id, discount_amount, is_deleted, notes, order_number, order_status, order_type, service_charge, subtotal, synced_at, table_id, tax_amount, tenant_id, total_amount, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-04 13:07:29 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    insert 
    into
        public.order_items
        (created_at, item_name, menu_item_id, order_id, quantity, special_instructions, status, total_price, unit_price, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-04 13:07:29 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    insert 
    into
        public.bills
        (bill_number, change_amount, created_at, discount_amount, generated_by, invoice_path, order_id, paid_amount, payment_method, payment_status, service_charge, subtotal, tax_amount, tenant_id, total_amount, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-04 13:07:29 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:07:29 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [OrderDto(id=235bccdf-dc8d-425b-990c-dbfbaf73ac13, orderNumber=ORD1764833849269, tableId=null, tableN (truncated)...]
2025-12-04 13:07:29 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-12-04 13:07:29 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/sync
2025-12-04 13:07:29 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:07:29 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/sync
2025-12-04 13:07:29 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/sync", parameters={}
2025-12-04 13:07:29 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.SyncController#performSync(SyncRequest)
2025-12-04 13:07:29 [http-nio-8881-exec-6] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:07:29 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [SyncRequest(deviceId=d23c59b8-4056-4cc6-b9bc-6ac5018951cf, lastSyncTime=1970-01-01T05:30, data=[Sync (truncated)...]
2025-12-04 13:07:29 [http-nio-8881-exec-6] ERROR c.r.billing.service.SyncService - Sync error for item: de44930b-7249-41d6-a21b-2a881acb77a5
java.lang.IllegalArgumentException: Unknown entity type: order
	at com.restaurant.billing.service.SyncService.processSyncItem(SyncService.java:107)
	at com.restaurant.billing.service.SyncService.performSync(SyncService.java:34)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at com.restaurant.billing.service.SyncService$$SpringCGLIB$$0.performSync(<generated>)
	at com.restaurant.billing.controller.SyncController.performSync(SyncController.java:23)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 13:07:29 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 13:07:29 [http-nio-8881-exec-6] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
java.lang.IllegalArgumentException: No enum constant com.restaurant.billing.entity.SyncLog.SyncOperation.create
	at java.base/java.lang.Enum.valueOf(Enum.java:273)
	at com.restaurant.billing.entity.SyncLog$SyncOperation.valueOf(SyncLog.java:65)
	at com.restaurant.billing.service.SyncService.logSync(SyncService.java:158)
	at com.restaurant.billing.service.SyncService.performSync(SyncService.java:51)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at com.restaurant.billing.service.SyncService$$SpringCGLIB$$0.performSync(<generated>)
	at com.restaurant.billing.controller.SyncController.performSync(SyncController.java:23)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 13:07:29 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:07:29 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T13:07:29.304455478, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 13:07:29 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [java.lang.IllegalArgumentException: No enum constant com.restaurant.billing.entity.SyncLog.SyncOperation.create]
2025-12-04 13:07:29 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 13:07:29 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 13:07:29 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:07:29 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 13:07:29 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 13:07:29 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#getRestaurantProfile()
2025-12-04 13:07:29 [http-nio-8881-exec-2] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:07:29 [http-nio-8881-exec-2] INFO  c.r.b.service.RestaurantService - Fetching restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:07:29 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 13:07:29 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:07:29 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 13:07:29 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:12:05 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/auth/login
2025-12-04 13:12:05 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-12-04 13:12:05 [http-nio-8881-exec-1] ERROR c.r.billing.security.JwtUtil - Invalid JWT token: JWT expired at 2025-12-04T07:07:41Z. Current time: 2025-12-04T07:42:05Z, a difference of 2064088 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-12-04 13:12:05 [http-nio-8881-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-04 13:12:05 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-12-04 13:12:05 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-12-04 13:12:05 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.AuthController#login(LoginRequest)
2025-12-04 13:12:05 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(restaurantCode=REST14DAA490, username=Ganesh@gmail.com, password=Rest@1234)]
2025-12-04 13:12:05 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.restaurant_code=?
2025-12-04 13:12:05 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=? 
        and u1_0.tenant_id=?
2025-12-04 13:12:05 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    update
        public.users 
    set
        auth_provider=?,
        email=?,
        google_id=?,
        is_active=?,
        last_login=?,
        name=?,
        password_hash=?,
        phone=?,
        refresh_token=?,
        refresh_token_expiry=?,
        role=?,
        tenant_id=?,
        updated_at=? 
    where
        id=?
2025-12-04 13:12:05 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:12:05 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiT1dORVIiLCJ0ZW5hbnRJZCI6ImNjNzFkN2U0LWNmNj (truncated)...]
2025-12-04 13:12:05 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:12:05 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/today-sales
2025-12-04 13:12:05 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/active-orders
2025-12-04 13:12:05 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/pending-payments
2025-12-04 13:12:05 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/today-sales
2025-12-04 13:12:05 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/stats
2025-12-04 13:12:05 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:12:05 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/tables-occupied
2025-12-04 13:12:05 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/active-orders
2025-12-04 13:12:05 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/today-sales
2025-12-04 13:12:05 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/today-sales", parameters={}
2025-12-04 13:12:05 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTodaySales()
2025-12-04 13:12:05 [http-nio-8881-exec-6] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:12:05 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/stats
2025-12-04 13:12:05 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/pending-payments
2025-12-04 13:12:05 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 13:12:05 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/tables-occupied
2025-12-04 13:12:05 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:12:05 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 13:12:05 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:12:05 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/active-orders
2025-12-04 13:12:05 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/active-orders", parameters={}
2025-12-04 13:12:05 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:12:05 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:12:05 [http-nio-8881-exec-6] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session
	at org.hibernate.collection.spi.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:636)
	at org.hibernate.collection.spi.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:219)
	at org.hibernate.collection.spi.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:615)
	at org.hibernate.collection.spi.AbstractPersistentCollection.read(AbstractPersistentCollection.java:138)
	at org.hibernate.collection.spi.PersistentBag.iterator(PersistentBag.java:369)
	at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1842)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.reduce(ReferencePipeline.java:657)
	at com.restaurant.billing.service.DashboardService.getTodaySales(DashboardService.java:80)
	at com.restaurant.billing.controller.DashboardController.getTodaySales(DashboardController.java:24)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 13:12:05 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:12:05 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getActiveOrders()
2025-12-04 13:12:05 [http-nio-8881-exec-7] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:12:05 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T13:12:05.465968327, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 13:12:05 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/tables-occupied
2025-12-04 13:12:05 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/stats
2025-12-04 13:12:05 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/tables-occupied", parameters={}
2025-12-04 13:12:05 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/stats", parameters={}
2025-12-04 13:12:05 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTablesOccupied()
2025-12-04 13:12:05 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getDashboardStats()
2025-12-04 13:12:05 [http-nio-8881-exec-1] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:12:05 [http-nio-8881-exec-9] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:12:05 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/pending-payments
2025-12-04 13:12:05 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/pending-payments", parameters={}
2025-12-04 13:12:05 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session]
2025-12-04 13:12:05 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getPendingPayments()
2025-12-04 13:12:05 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 13:12:05 [http-nio-8881-exec-10] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:12:05 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 13:12:05 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 13:12:05 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 13:12:05 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 13:12:05 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:12:05 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 13:12:05 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:12:05 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:12:05 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 13:12:05 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:12:05 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 13:12:05 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 13:12:05 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:12:05 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:12:05 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 13:12:05 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 13:12:05 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:12:05 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{tablesOccupied=0, pendingPayments=0, activeOrders=0, todaySales=0}]
2025-12-04 13:12:05 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:12:05 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/orders
2025-12-04 13:12:05 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/orders
2025-12-04 13:12:05 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:12:05 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/orders
2025-12-04 13:12:05 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/orders", parameters={}
2025-12-04 13:12:05 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#getAllOrders()
2025-12-04 13:12:05 [http-nio-8881-exec-3] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:12:05 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 13:12:05 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:12:05 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:12:05 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:12:05 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:12:05 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:12:05 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:12:05 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:12:05 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:12:05 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:12:05 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:12:05 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:12:05 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:12:05 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:12:05 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:12:05 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:12:05 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:12:05 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:12:05 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:12:05 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[OrderDto(id=3d2cc165-482d-4290-b220-105d1ad18880, orderNumber=ORD1764763565538, tableId=null, table (truncated)...]
2025-12-04 13:12:05 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:12:07 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/restaurant/profile
2025-12-04 13:12:07 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 13:12:07 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:12:07 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 13:12:07 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 13:12:07 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#getRestaurantProfile()
2025-12-04 13:12:07 [http-nio-8881-exec-2] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:12:07 [http-nio-8881-exec-2] INFO  c.r.b.service.RestaurantService - Fetching restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:12:07 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 13:12:07 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:12:07 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 13:12:07 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:12:10 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/today-sales
2025-12-04 13:12:10 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/active-orders
2025-12-04 13:12:10 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/pending-payments
2025-12-04 13:12:10 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/tables-occupied
2025-12-04 13:12:10 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/stats
2025-12-04 13:12:10 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:12:10 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:12:10 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:12:10 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:12:10 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:12:10 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/today-sales
2025-12-04 13:12:10 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/today-sales", parameters={}
2025-12-04 13:12:10 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/tables-occupied
2025-12-04 13:12:10 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/active-orders
2025-12-04 13:12:10 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTodaySales()
2025-12-04 13:12:10 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/active-orders", parameters={}
2025-12-04 13:12:10 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/tables-occupied", parameters={}
2025-12-04 13:12:10 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getActiveOrders()
2025-12-04 13:12:10 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:12:10 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTablesOccupied()
2025-12-04 13:12:10 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/pending-payments
2025-12-04 13:12:10 [http-nio-8881-exec-6] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:12:10 [http-nio-8881-exec-7] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:12:10 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/pending-payments", parameters={}
2025-12-04 13:12:10 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getPendingPayments()
2025-12-04 13:12:10 [http-nio-8881-exec-1] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:12:10 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 13:12:10 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/stats
2025-12-04 13:12:10 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/stats", parameters={}
2025-12-04 13:12:10 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 13:12:10 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getDashboardStats()
2025-12-04 13:12:10 [http-nio-8881-exec-10] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:12:10 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 13:12:10 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 13:12:10 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 13:12:10 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:12:10 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 13:12:10 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:12:10 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 13:12:10 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 13:12:10 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:12:10 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 13:12:10 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:12:10 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:12:10 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 13:12:10 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:12:10 [http-nio-8881-exec-4] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session
	at org.hibernate.collection.spi.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:636)
	at org.hibernate.collection.spi.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:219)
	at org.hibernate.collection.spi.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:615)
	at org.hibernate.collection.spi.AbstractPersistentCollection.read(AbstractPersistentCollection.java:138)
	at org.hibernate.collection.spi.PersistentBag.iterator(PersistentBag.java:369)
	at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1842)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.reduce(ReferencePipeline.java:657)
	at com.restaurant.billing.service.DashboardService.getTodaySales(DashboardService.java:80)
	at com.restaurant.billing.controller.DashboardController.getTodaySales(DashboardController.java:24)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 13:12:10 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:12:10 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T13:12:10.218975251, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 13:12:10 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session]
2025-12-04 13:12:10 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 13:12:10 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 13:12:10 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 13:12:10 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:12:10 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{tablesOccupied=0, pendingPayments=0, activeOrders=0, todaySales=0}]
2025-12-04 13:12:10 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:12:10 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/orders
2025-12-04 13:12:10 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:12:10 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/orders
2025-12-04 13:12:10 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/orders", parameters={}
2025-12-04 13:12:10 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#getAllOrders()
2025-12-04 13:12:10 [http-nio-8881-exec-9] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:12:10 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 13:12:10 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:12:10 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:12:10 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:12:10 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:12:10 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:12:10 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:12:10 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:12:10 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:12:10 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:12:10 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:12:10 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:12:10 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:12:10 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:12:10 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:12:10 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:12:10 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:12:10 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:12:10 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:12:10 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[OrderDto(id=3d2cc165-482d-4290-b220-105d1ad18880, orderNumber=ORD1764763565538, tableId=null, table (truncated)...]
2025-12-04 13:12:10 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:12:11 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/menu
2025-12-04 13:12:11 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/menu
2025-12-04 13:12:11 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:12:11 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/menu
2025-12-04 13:12:11 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/menu", parameters={}
2025-12-04 13:12:11 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.MenuController#getAllMenuItems()
2025-12-04 13:12:11 [http-nio-8881-exec-3] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:12:11 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        mi1_0.id,
        mi1_0.category_id,
        mi1_0.created_at,
        mi1_0.description,
        mi1_0.device_id,
        mi1_0.image_path,
        mi1_0.is_available,
        mi1_0.is_deleted,
        mi1_0.is_veg,
        mi1_0.name,
        mi1_0.preparation_time,
        mi1_0.price,
        mi1_0.synced_at,
        mi1_0.tenant_id,
        mi1_0.updated_at,
        mi1_0.version 
    from
        public.menu_items mi1_0 
    where
        mi1_0.tenant_id=? 
        and mi1_0.is_deleted=?
2025-12-04 13:12:11 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:12:11 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[MenuItemDto(id=8a5577b8-36d5-4a3d-9299-903f009a42b9, categoryId=6ed45abe-f8f6-4966-8126-a3f0d0bd0aa (truncated)...]
2025-12-04 13:12:11 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:12:11 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/categories?activeOnly=true
2025-12-04 13:12:11 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/categories?activeOnly=true
2025-12-04 13:12:11 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:12:11 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/categories?activeOnly=true
2025-12-04 13:12:11 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/categories?activeOnly=true", parameters={masked}
2025-12-04 13:12:11 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.CategoryController#getAllCategories(UserDetails, Boolean)
2025-12-04 13:12:11 [http-nio-8881-exec-2] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:12:11 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:12:11 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.display_order,
        c1_0.is_active,
        c1_0.name,
        c1_0.tenant_id,
        c1_0.updated_at 
    from
        public.categories c1_0 
    where
        c1_0.tenant_id=? 
        and c1_0.is_active=? 
    order by
        c1_0.display_order
2025-12-04 13:12:11 [http-nio-8881-exec-2] DEBUG c.r.billing.service.CategoryService - Found 2 categories for tenant cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:12:11 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:12:11 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[CategoryDto(id=6ed45abe-f8f6-4966-8126-a3f0d0bd0aaa, name=Main course, displayOrder=1), CategoryDto (truncated)...]
2025-12-04 13:12:11 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:12:14 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/orders
2025-12-04 13:12:14 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:12:14 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/orders
2025-12-04 13:12:14 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/orders", parameters={}
2025-12-04 13:12:14 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#createOrder(CreateOrderRequest)
2025-12-04 13:12:14 [http-nio-8881-exec-7] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:12:14 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [CreateOrderRequest(tableId=null, customerName=null, customerPhone=null, orderType=DINE_IN, items=[Or (truncated)...]
2025-12-04 13:12:14 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 13:12:14 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        mi1_0.id,
        mi1_0.category_id,
        mi1_0.created_at,
        mi1_0.description,
        mi1_0.device_id,
        mi1_0.image_path,
        mi1_0.is_available,
        mi1_0.is_deleted,
        mi1_0.is_veg,
        mi1_0.name,
        mi1_0.preparation_time,
        mi1_0.price,
        mi1_0.synced_at,
        mi1_0.tenant_id,
        mi1_0.updated_at,
        mi1_0.version 
    from
        public.menu_items mi1_0 
    where
        mi1_0.id=?
2025-12-04 13:12:14 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.order_id=?
2025-12-04 13:12:14 [http-nio-8881-exec-7] INFO  c.r.billing.service.OrderService - Bill generated for order: 41bbda95-8f62-416a-b7c9-d0f9416cea2c
2025-12-04 13:12:14 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    insert 
    into
        public.orders
        (created_at, created_by, customer_name, customer_phone, device_id, discount_amount, is_deleted, notes, order_number, order_status, order_type, service_charge, subtotal, synced_at, table_id, tax_amount, tenant_id, total_amount, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-04 13:12:14 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    insert 
    into
        public.order_items
        (created_at, item_name, menu_item_id, order_id, quantity, special_instructions, status, total_price, unit_price, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-04 13:12:14 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    insert 
    into
        public.bills
        (bill_number, change_amount, created_at, discount_amount, generated_by, invoice_path, order_id, paid_amount, payment_method, payment_status, service_charge, subtotal, tax_amount, tenant_id, total_amount, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-04 13:12:14 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:12:14 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [OrderDto(id=41bbda95-8f62-416a-b7c9-d0f9416cea2c, orderNumber=ORD1764834134451, tableId=null, tableN (truncated)...]
2025-12-04 13:12:14 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-12-04 13:12:14 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/sync
2025-12-04 13:12:14 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/sync
2025-12-04 13:12:14 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:12:14 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/sync
2025-12-04 13:12:14 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/sync", parameters={}
2025-12-04 13:12:14 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.SyncController#performSync(SyncRequest)
2025-12-04 13:12:14 [http-nio-8881-exec-1] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:12:14 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [SyncRequest(deviceId=d23c59b8-4056-4cc6-b9bc-6ac5018951cf, lastSyncTime=1970-01-01T05:30, data=[Sync (truncated)...]
2025-12-04 13:12:14 [http-nio-8881-exec-1] ERROR c.r.billing.service.SyncService - Sync error for item: 41bbda95-8f62-416a-b7c9-d0f9416cea2c
java.lang.IllegalArgumentException: Unknown entity type: order
	at com.restaurant.billing.service.SyncService.processSyncItem(SyncService.java:107)
	at com.restaurant.billing.service.SyncService.performSync(SyncService.java:34)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at com.restaurant.billing.service.SyncService$$SpringCGLIB$$0.performSync(<generated>)
	at com.restaurant.billing.controller.SyncController.performSync(SyncController.java:23)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 13:12:14 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 13:12:14 [http-nio-8881-exec-1] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
java.lang.IllegalArgumentException: No enum constant com.restaurant.billing.entity.SyncLog.SyncOperation.create
	at java.base/java.lang.Enum.valueOf(Enum.java:273)
	at com.restaurant.billing.entity.SyncLog$SyncOperation.valueOf(SyncLog.java:65)
	at com.restaurant.billing.service.SyncService.logSync(SyncService.java:158)
	at com.restaurant.billing.service.SyncService.performSync(SyncService.java:51)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at com.restaurant.billing.service.SyncService$$SpringCGLIB$$0.performSync(<generated>)
	at com.restaurant.billing.controller.SyncController.performSync(SyncController.java:23)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 13:12:14 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:12:14 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T13:12:14.493544444, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 13:12:14 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [java.lang.IllegalArgumentException: No enum constant com.restaurant.billing.entity.SyncLog.SyncOperation.create]
2025-12-04 13:12:14 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 13:12:14 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 13:12:14 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:12:14 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 13:12:14 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 13:12:14 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#getRestaurantProfile()
2025-12-04 13:12:14 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:12:14 [http-nio-8881-exec-4] INFO  c.r.b.service.RestaurantService - Fetching restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:12:14 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 13:12:14 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:12:14 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 13:12:14 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:12:51 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 13:12:51 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:12:51 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 13:12:51 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 13:12:51 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#getRestaurantProfile()
2025-12-04 13:12:51 [http-nio-8881-exec-10] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:12:51 [http-nio-8881-exec-10] INFO  c.r.b.service.RestaurantService - Fetching restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:12:51 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 13:12:51 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:12:51 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 13:12:51 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:13:00 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/restaurant/logo
2025-12-04 13:13:00 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/restaurant/logo
2025-12-04 13:13:00 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:13:00 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/restaurant/logo
2025-12-04 13:13:00 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/restaurant/logo", parameters={multipart}
2025-12-04 13:13:00 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#uploadLogo(MultipartFile, MultipartFile, MultipartFile)
2025-12-04 13:13:00 [http-nio-8881-exec-8] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:13:00 [http-nio-8881-exec-8] INFO  c.r.b.service.RestaurantService - Uploading logo for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:13:00 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 13:13:00 [http-nio-8881-exec-8] INFO  c.r.b.service.FileStorageService - File deleted: ./uploads/logos/22ea2dbd-3e37-4d76-86d2-54a6ec777854.png
2025-12-04 13:13:00 [http-nio-8881-exec-8] INFO  c.r.b.service.FileStorageService - File stored: ./uploads/logos/e10c2738-980e-4226-8a6e-5a594284cb5e.png
2025-12-04 13:13:00 [http-nio-8881-exec-8] INFO  c.r.b.service.RestaurantService - Logo uploaded successfully for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:13:00 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    update
        public.tenants 
    set
        address=?,
        city=?,
        currency=?,
        gstin=?,
        is_active=?,
        logo_path=?,
        max_storage_gb=?,
        max_users=?,
        owner_email=?,
        owner_name=?,
        owner_phone=?,
        pincode=?,
        razorpay_customer_id=?,
        razorpay_subscription_id=?,
        restaurant_code=?,
        restaurant_name=?,
        service_charge_rate=?,
        state=?,
        subscription_end_date=?,
        subscription_plan=?,
        subscription_start_date=?,
        subscription_status=?,
        tax_rate=?,
        timezone=?,
        trial_end_date=?,
        updated_at=? 
    where
        id=?
2025-12-04 13:13:00 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:13:00 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 13:13:00 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:13:00 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/restaurant/profile
2025-12-04 13:13:00 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:13:00 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/restaurant/profile
2025-12-04 13:13:00 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/api/restaurant/profile", parameters={}
2025-12-04 13:13:00 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#updateRestaurantProfile(UpdateRestaurantProfileRequest)
2025-12-04 13:13:00 [http-nio-8881-exec-3] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:13:00 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [UpdateRestaurantProfileRequest(restaurantName=Ganesh, ownerEmail=Ganesh@gmail.com, ownerName=null, o (truncated)...]
2025-12-04 13:13:00 [http-nio-8881-exec-3] INFO  c.r.b.service.RestaurantService - Updating restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:13:00 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 13:13:00 [http-nio-8881-exec-3] INFO  c.r.b.service.RestaurantService - Restaurant profile updated successfully for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:13:00 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    update
        public.tenants 
    set
        address=?,
        city=?,
        currency=?,
        gstin=?,
        is_active=?,
        logo_path=?,
        max_storage_gb=?,
        max_users=?,
        owner_email=?,
        owner_name=?,
        owner_phone=?,
        pincode=?,
        razorpay_customer_id=?,
        razorpay_subscription_id=?,
        restaurant_code=?,
        restaurant_name=?,
        service_charge_rate=?,
        state=?,
        subscription_end_date=?,
        subscription_plan=?,
        subscription_start_date=?,
        subscription_status=?,
        tax_rate=?,
        timezone=?,
        trial_end_date=?,
        updated_at=? 
    where
        id=?
2025-12-04 13:13:00 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:13:00 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 13:13:00 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:13:01 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 13:13:01 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:13:01 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 13:13:01 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 13:13:01 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#getRestaurantProfile()
2025-12-04 13:13:01 [http-nio-8881-exec-5] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:13:01 [http-nio-8881-exec-5] INFO  c.r.b.service.RestaurantService - Fetching restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:13:01 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 13:13:01 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:13:01 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 13:13:01 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:13:03 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/today-sales
2025-12-04 13:13:03 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/active-orders
2025-12-04 13:13:03 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/pending-payments
2025-12-04 13:13:03 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/tables-occupied
2025-12-04 13:13:03 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/stats
2025-12-04 13:13:03 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:13:03 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:13:03 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:13:03 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:13:03 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:13:03 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/today-sales
2025-12-04 13:13:03 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/tables-occupied
2025-12-04 13:13:03 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/pending-payments
2025-12-04 13:13:03 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/tables-occupied", parameters={}
2025-12-04 13:13:03 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/today-sales", parameters={}
2025-12-04 13:13:03 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/pending-payments", parameters={}
2025-12-04 13:13:03 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTablesOccupied()
2025-12-04 13:13:03 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTodaySales()
2025-12-04 13:13:03 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/active-orders
2025-12-04 13:13:03 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getPendingPayments()
2025-12-04 13:13:03 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/stats
2025-12-04 13:13:03 [http-nio-8881-exec-2] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:13:03 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/active-orders", parameters={}
2025-12-04 13:13:03 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/stats", parameters={}
2025-12-04 13:13:03 [http-nio-8881-exec-1] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:13:03 [http-nio-8881-exec-6] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:13:03 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getActiveOrders()
2025-12-04 13:13:03 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getDashboardStats()
2025-12-04 13:13:03 [http-nio-8881-exec-7] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:13:03 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:13:03 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 13:13:03 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 13:13:03 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 13:13:03 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 13:13:03 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 13:13:03 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:13:03 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 13:13:03 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:13:03 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 13:13:03 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:13:03 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 13:13:03 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 13:13:03 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 13:13:03 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:13:03 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:13:03 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:13:03 [http-nio-8881-exec-2] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session
	at org.hibernate.collection.spi.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:636)
	at org.hibernate.collection.spi.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:219)
	at org.hibernate.collection.spi.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:615)
	at org.hibernate.collection.spi.AbstractPersistentCollection.read(AbstractPersistentCollection.java:138)
	at org.hibernate.collection.spi.PersistentBag.iterator(PersistentBag.java:369)
	at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1842)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.reduce(ReferencePipeline.java:657)
	at com.restaurant.billing.service.DashboardService.getTodaySales(DashboardService.java:80)
	at com.restaurant.billing.controller.DashboardController.getTodaySales(DashboardController.java:24)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 13:13:03 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 13:13:03 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:13:03 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T13:13:03.467569808, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 13:13:03 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session]
2025-12-04 13:13:03 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 13:13:03 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 13:13:03 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:13:03 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{tablesOccupied=0, pendingPayments=0, activeOrders=0, todaySales=0}]
2025-12-04 13:13:03 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:13:03 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/orders
2025-12-04 13:13:03 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:13:03 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/orders
2025-12-04 13:13:03 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/orders", parameters={}
2025-12-04 13:13:03 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#getAllOrders()
2025-12-04 13:13:03 [http-nio-8881-exec-10] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:13:03 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 13:13:03 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:13:03 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:13:03 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:13:03 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:13:03 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:13:03 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:13:03 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:13:03 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:13:03 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:13:03 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:13:03 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:13:03 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:13:03 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:13:03 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:13:03 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:13:03 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:13:03 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:13:03 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:13:03 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:13:03 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[OrderDto(id=3d2cc165-482d-4290-b220-105d1ad18880, orderNumber=ORD1764763565538, tableId=null, table (truncated)...]
2025-12-04 13:13:03 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:13:04 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/menu
2025-12-04 13:13:04 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:13:04 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/menu
2025-12-04 13:13:04 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/menu", parameters={}
2025-12-04 13:13:04 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.MenuController#getAllMenuItems()
2025-12-04 13:13:04 [http-nio-8881-exec-9] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:13:04 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        mi1_0.id,
        mi1_0.category_id,
        mi1_0.created_at,
        mi1_0.description,
        mi1_0.device_id,
        mi1_0.image_path,
        mi1_0.is_available,
        mi1_0.is_deleted,
        mi1_0.is_veg,
        mi1_0.name,
        mi1_0.preparation_time,
        mi1_0.price,
        mi1_0.synced_at,
        mi1_0.tenant_id,
        mi1_0.updated_at,
        mi1_0.version 
    from
        public.menu_items mi1_0 
    where
        mi1_0.tenant_id=? 
        and mi1_0.is_deleted=?
2025-12-04 13:13:04 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:13:04 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[MenuItemDto(id=8a5577b8-36d5-4a3d-9299-903f009a42b9, categoryId=6ed45abe-f8f6-4966-8126-a3f0d0bd0aa (truncated)...]
2025-12-04 13:13:04 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:13:04 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/categories?activeOnly=true
2025-12-04 13:13:04 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:13:04 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/categories?activeOnly=true
2025-12-04 13:13:04 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/categories?activeOnly=true", parameters={masked}
2025-12-04 13:13:04 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.CategoryController#getAllCategories(UserDetails, Boolean)
2025-12-04 13:13:04 [http-nio-8881-exec-8] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:13:04 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:13:04 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.display_order,
        c1_0.is_active,
        c1_0.name,
        c1_0.tenant_id,
        c1_0.updated_at 
    from
        public.categories c1_0 
    where
        c1_0.tenant_id=? 
        and c1_0.is_active=? 
    order by
        c1_0.display_order
2025-12-04 13:13:04 [http-nio-8881-exec-8] DEBUG c.r.billing.service.CategoryService - Found 2 categories for tenant cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:13:04 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:13:04 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[CategoryDto(id=6ed45abe-f8f6-4966-8126-a3f0d0bd0aaa, name=Main course, displayOrder=1), CategoryDto (truncated)...]
2025-12-04 13:13:04 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:13:07 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/orders
2025-12-04 13:13:07 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:13:07 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/orders
2025-12-04 13:13:07 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/orders", parameters={}
2025-12-04 13:13:07 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#createOrder(CreateOrderRequest)
2025-12-04 13:13:07 [http-nio-8881-exec-3] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:13:07 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [CreateOrderRequest(tableId=null, customerName=null, customerPhone=null, orderType=DINE_IN, items=[Or (truncated)...]
2025-12-04 13:13:07 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 13:13:07 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        mi1_0.id,
        mi1_0.category_id,
        mi1_0.created_at,
        mi1_0.description,
        mi1_0.device_id,
        mi1_0.image_path,
        mi1_0.is_available,
        mi1_0.is_deleted,
        mi1_0.is_veg,
        mi1_0.name,
        mi1_0.preparation_time,
        mi1_0.price,
        mi1_0.synced_at,
        mi1_0.tenant_id,
        mi1_0.updated_at,
        mi1_0.version 
    from
        public.menu_items mi1_0 
    where
        mi1_0.id=?
2025-12-04 13:13:07 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.order_id=?
2025-12-04 13:13:07 [http-nio-8881-exec-3] INFO  c.r.billing.service.OrderService - Bill generated for order: 5f7dd69e-ad6a-459c-9863-47c3761bea57
2025-12-04 13:13:07 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    insert 
    into
        public.orders
        (created_at, created_by, customer_name, customer_phone, device_id, discount_amount, is_deleted, notes, order_number, order_status, order_type, service_charge, subtotal, synced_at, table_id, tax_amount, tenant_id, total_amount, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-04 13:13:07 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    insert 
    into
        public.order_items
        (created_at, item_name, menu_item_id, order_id, quantity, special_instructions, status, total_price, unit_price, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-04 13:13:07 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    insert 
    into
        public.bills
        (bill_number, change_amount, created_at, discount_amount, generated_by, invoice_path, order_id, paid_amount, payment_method, payment_status, service_charge, subtotal, tax_amount, tenant_id, total_amount, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-04 13:13:07 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:13:07 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [OrderDto(id=5f7dd69e-ad6a-459c-9863-47c3761bea57, orderNumber=ORD1764834187718, tableId=null, tableN (truncated)...]
2025-12-04 13:13:07 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-12-04 13:13:07 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/sync
2025-12-04 13:13:07 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:13:07 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/sync
2025-12-04 13:13:07 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/sync", parameters={}
2025-12-04 13:13:07 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.SyncController#performSync(SyncRequest)
2025-12-04 13:13:07 [http-nio-8881-exec-5] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:13:07 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [SyncRequest(deviceId=d23c59b8-4056-4cc6-b9bc-6ac5018951cf, lastSyncTime=1970-01-01T05:30, data=[Sync (truncated)...]
2025-12-04 13:13:07 [http-nio-8881-exec-5] ERROR c.r.billing.service.SyncService - Sync error for item: 41bbda95-8f62-416a-b7c9-d0f9416cea2c
java.lang.IllegalArgumentException: Unknown entity type: order
	at com.restaurant.billing.service.SyncService.processSyncItem(SyncService.java:107)
	at com.restaurant.billing.service.SyncService.performSync(SyncService.java:34)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at com.restaurant.billing.service.SyncService$$SpringCGLIB$$0.performSync(<generated>)
	at com.restaurant.billing.controller.SyncController.performSync(SyncController.java:23)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 13:13:07 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 13:13:07 [http-nio-8881-exec-5] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
java.lang.IllegalArgumentException: No enum constant com.restaurant.billing.entity.SyncLog.SyncOperation.create
	at java.base/java.lang.Enum.valueOf(Enum.java:273)
	at com.restaurant.billing.entity.SyncLog$SyncOperation.valueOf(SyncLog.java:65)
	at com.restaurant.billing.service.SyncService.logSync(SyncService.java:158)
	at com.restaurant.billing.service.SyncService.performSync(SyncService.java:51)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at com.restaurant.billing.service.SyncService$$SpringCGLIB$$0.performSync(<generated>)
	at com.restaurant.billing.controller.SyncController.performSync(SyncController.java:23)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 13:13:07 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:13:07 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T13:13:07.759493778, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 13:13:07 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [java.lang.IllegalArgumentException: No enum constant com.restaurant.billing.entity.SyncLog.SyncOperation.create]
2025-12-04 13:13:07 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 13:13:07 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 13:13:07 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:13:07 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 13:13:07 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 13:13:07 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#getRestaurantProfile()
2025-12-04 13:13:07 [http-nio-8881-exec-7] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:13:07 [http-nio-8881-exec-7] INFO  c.r.b.service.RestaurantService - Fetching restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:13:07 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 13:13:07 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:13:07 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 13:13:07 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:13:45 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/menu
2025-12-04 13:13:45 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:13:45 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/menu
2025-12-04 13:13:45 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/menu", parameters={}
2025-12-04 13:13:45 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.MenuController#getAllMenuItems()
2025-12-04 13:13:45 [http-nio-8881-exec-6] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:13:45 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        mi1_0.id,
        mi1_0.category_id,
        mi1_0.created_at,
        mi1_0.description,
        mi1_0.device_id,
        mi1_0.image_path,
        mi1_0.is_available,
        mi1_0.is_deleted,
        mi1_0.is_veg,
        mi1_0.name,
        mi1_0.preparation_time,
        mi1_0.price,
        mi1_0.synced_at,
        mi1_0.tenant_id,
        mi1_0.updated_at,
        mi1_0.version 
    from
        public.menu_items mi1_0 
    where
        mi1_0.tenant_id=? 
        and mi1_0.is_deleted=?
2025-12-04 13:13:45 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:13:45 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[MenuItemDto(id=8a5577b8-36d5-4a3d-9299-903f009a42b9, categoryId=6ed45abe-f8f6-4966-8126-a3f0d0bd0aa (truncated)...]
2025-12-04 13:13:45 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:13:45 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/categories?activeOnly=true
2025-12-04 13:13:45 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:13:45 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/categories?activeOnly=true
2025-12-04 13:13:45 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/categories?activeOnly=true", parameters={masked}
2025-12-04 13:13:45 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.CategoryController#getAllCategories(UserDetails, Boolean)
2025-12-04 13:13:45 [http-nio-8881-exec-1] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:13:45 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:13:45 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.display_order,
        c1_0.is_active,
        c1_0.name,
        c1_0.tenant_id,
        c1_0.updated_at 
    from
        public.categories c1_0 
    where
        c1_0.tenant_id=? 
        and c1_0.is_active=? 
    order by
        c1_0.display_order
2025-12-04 13:13:45 [http-nio-8881-exec-1] DEBUG c.r.billing.service.CategoryService - Found 2 categories for tenant cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:13:45 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:13:45 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[CategoryDto(id=6ed45abe-f8f6-4966-8126-a3f0d0bd0aaa, name=Main course, displayOrder=1), CategoryDto (truncated)...]
2025-12-04 13:13:45 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:13:47 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/categories?activeOnly=true
2025-12-04 13:13:47 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:13:47 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/categories?activeOnly=true
2025-12-04 13:13:47 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/categories?activeOnly=true", parameters={masked}
2025-12-04 13:13:47 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.CategoryController#getAllCategories(UserDetails, Boolean)
2025-12-04 13:13:47 [http-nio-8881-exec-2] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:13:47 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:13:47 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.display_order,
        c1_0.is_active,
        c1_0.name,
        c1_0.tenant_id,
        c1_0.updated_at 
    from
        public.categories c1_0 
    where
        c1_0.tenant_id=? 
        and c1_0.is_active=? 
    order by
        c1_0.display_order
2025-12-04 13:13:47 [http-nio-8881-exec-2] DEBUG c.r.billing.service.CategoryService - Found 2 categories for tenant cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:13:47 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:13:47 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[CategoryDto(id=6ed45abe-f8f6-4966-8126-a3f0d0bd0aaa, name=Main course, displayOrder=1), CategoryDto (truncated)...]
2025-12-04 13:13:47 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:13:54 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/menu
2025-12-04 13:13:54 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:13:54 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/menu
2025-12-04 13:13:54 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/menu", parameters={}
2025-12-04 13:13:54 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.MenuController#createMenuItem(MenuItemDto, String)
2025-12-04 13:13:54 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:13:54 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MenuItemDto(id=null, categoryId=6ed45abe-f8f6-4966-8126-a3f0d0bd0aaa, name=sas, description=, price= (truncated)...]
2025-12-04 13:13:54 [http-nio-8881-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.restaurant.billing.controller.MenuController.createMenuItem(com.restaurant.billing.dto.menu.MenuItemDto,java.lang.String); target is of class [com.restaurant.billing.controller.MenuController]
2025-12-04 13:13:54 [http-nio-8881-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.restaurant.billing.controller.MenuController.createMenuItem(com.restaurant.billing.dto.menu.MenuItemDto,java.lang.String); target is of class [com.restaurant.billing.controller.MenuController]
2025-12-04 13:13:54 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.display_order,
        c1_0.is_active,
        c1_0.name,
        c1_0.tenant_id,
        c1_0.updated_at 
    from
        public.categories c1_0 
    where
        c1_0.id=?
2025-12-04 13:13:54 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    insert 
    into
        public.menu_items
        (category_id, created_at, description, device_id, image_path, is_available, is_deleted, is_veg, name, preparation_time, price, synced_at, tenant_id, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-04 13:13:54 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:13:54 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [MenuItemDto(id=daee9f09-7704-4e64-8def-5c1c95d4a677, categoryId=6ed45abe-f8f6-4966-8126-a3f0d0bd0aaa (truncated)...]
2025-12-04 13:13:54 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-12-04 13:13:54 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/sync
2025-12-04 13:13:54 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:13:54 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/sync
2025-12-04 13:13:54 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/sync", parameters={}
2025-12-04 13:13:54 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.SyncController#performSync(SyncRequest)
2025-12-04 13:13:54 [http-nio-8881-exec-10] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:13:54 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [SyncRequest(deviceId=d23c59b8-4056-4cc6-b9bc-6ac5018951cf, lastSyncTime=1970-01-01T05:30, data=[Sync (truncated)...]
2025-12-04 13:13:54 [http-nio-8881-exec-10] ERROR c.r.billing.service.SyncService - Sync error for item: 41bbda95-8f62-416a-b7c9-d0f9416cea2c
java.lang.IllegalArgumentException: Unknown entity type: order
	at com.restaurant.billing.service.SyncService.processSyncItem(SyncService.java:107)
	at com.restaurant.billing.service.SyncService.performSync(SyncService.java:34)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at com.restaurant.billing.service.SyncService$$SpringCGLIB$$0.performSync(<generated>)
	at com.restaurant.billing.controller.SyncController.performSync(SyncController.java:23)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 13:13:54 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 13:13:54 [http-nio-8881-exec-10] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
java.lang.IllegalArgumentException: No enum constant com.restaurant.billing.entity.SyncLog.SyncOperation.create
	at java.base/java.lang.Enum.valueOf(Enum.java:273)
	at com.restaurant.billing.entity.SyncLog$SyncOperation.valueOf(SyncLog.java:65)
	at com.restaurant.billing.service.SyncService.logSync(SyncService.java:158)
	at com.restaurant.billing.service.SyncService.performSync(SyncService.java:51)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at com.restaurant.billing.service.SyncService$$SpringCGLIB$$0.performSync(<generated>)
	at com.restaurant.billing.controller.SyncController.performSync(SyncController.java:23)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 13:13:54 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:13:54 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T13:13:54.886706662, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 13:13:54 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [java.lang.IllegalArgumentException: No enum constant com.restaurant.billing.entity.SyncLog.SyncOperation.create]
2025-12-04 13:13:54 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 13:13:57 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/categories?activeOnly=true
2025-12-04 13:13:57 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:13:57 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/categories?activeOnly=true
2025-12-04 13:13:57 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/categories?activeOnly=true", parameters={masked}
2025-12-04 13:13:57 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.CategoryController#getAllCategories(UserDetails, Boolean)
2025-12-04 13:13:57 [http-nio-8881-exec-9] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:13:57 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:13:57 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.display_order,
        c1_0.is_active,
        c1_0.name,
        c1_0.tenant_id,
        c1_0.updated_at 
    from
        public.categories c1_0 
    where
        c1_0.tenant_id=? 
        and c1_0.is_active=? 
    order by
        c1_0.display_order
2025-12-04 13:13:57 [http-nio-8881-exec-9] DEBUG c.r.billing.service.CategoryService - Found 2 categories for tenant cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:13:57 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:13:57 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[CategoryDto(id=6ed45abe-f8f6-4966-8126-a3f0d0bd0aaa, name=Main course, displayOrder=1), CategoryDto (truncated)...]
2025-12-04 13:13:57 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:14:03 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/menu
2025-12-04 13:14:03 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:14:03 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/menu
2025-12-04 13:14:03 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/menu", parameters={}
2025-12-04 13:14:03 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.MenuController#createMenuItem(MenuItemDto, String)
2025-12-04 13:14:03 [http-nio-8881-exec-8] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:14:03 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MenuItemDto(id=null, categoryId=6ed45abe-f8f6-4966-8126-a3f0d0bd0aaa, name=sasas, description=, pric (truncated)...]
2025-12-04 13:14:03 [http-nio-8881-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.restaurant.billing.controller.MenuController.createMenuItem(com.restaurant.billing.dto.menu.MenuItemDto,java.lang.String); target is of class [com.restaurant.billing.controller.MenuController]
2025-12-04 13:14:03 [http-nio-8881-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.restaurant.billing.controller.MenuController.createMenuItem(com.restaurant.billing.dto.menu.MenuItemDto,java.lang.String); target is of class [com.restaurant.billing.controller.MenuController]
2025-12-04 13:14:03 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.display_order,
        c1_0.is_active,
        c1_0.name,
        c1_0.tenant_id,
        c1_0.updated_at 
    from
        public.categories c1_0 
    where
        c1_0.id=?
2025-12-04 13:14:03 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    insert 
    into
        public.menu_items
        (category_id, created_at, description, device_id, image_path, is_available, is_deleted, is_veg, name, preparation_time, price, synced_at, tenant_id, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-04 13:14:03 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:14:03 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [MenuItemDto(id=b52379bc-f782-4b39-9246-3364faf6a2af, categoryId=6ed45abe-f8f6-4966-8126-a3f0d0bd0aaa (truncated)...]
2025-12-04 13:14:03 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-12-04 13:14:03 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/sync
2025-12-04 13:14:03 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:14:03 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/sync
2025-12-04 13:14:03 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/sync", parameters={}
2025-12-04 13:14:03 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.SyncController#performSync(SyncRequest)
2025-12-04 13:14:03 [http-nio-8881-exec-3] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:14:03 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [SyncRequest(deviceId=d23c59b8-4056-4cc6-b9bc-6ac5018951cf, lastSyncTime=1970-01-01T05:30, data=[Sync (truncated)...]
2025-12-04 13:14:03 [http-nio-8881-exec-3] ERROR c.r.billing.service.SyncService - Sync error for item: 41bbda95-8f62-416a-b7c9-d0f9416cea2c
java.lang.IllegalArgumentException: Unknown entity type: order
	at com.restaurant.billing.service.SyncService.processSyncItem(SyncService.java:107)
	at com.restaurant.billing.service.SyncService.performSync(SyncService.java:34)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at com.restaurant.billing.service.SyncService$$SpringCGLIB$$0.performSync(<generated>)
	at com.restaurant.billing.controller.SyncController.performSync(SyncController.java:23)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 13:14:03 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 13:14:03 [http-nio-8881-exec-3] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
java.lang.IllegalArgumentException: No enum constant com.restaurant.billing.entity.SyncLog.SyncOperation.create
	at java.base/java.lang.Enum.valueOf(Enum.java:273)
	at com.restaurant.billing.entity.SyncLog$SyncOperation.valueOf(SyncLog.java:65)
	at com.restaurant.billing.service.SyncService.logSync(SyncService.java:158)
	at com.restaurant.billing.service.SyncService.performSync(SyncService.java:51)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at com.restaurant.billing.service.SyncService$$SpringCGLIB$$0.performSync(<generated>)
	at com.restaurant.billing.controller.SyncController.performSync(SyncController.java:23)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 13:14:03 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:14:03 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T13:14:03.770244013, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 13:14:03 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [java.lang.IllegalArgumentException: No enum constant com.restaurant.billing.entity.SyncLog.SyncOperation.create]
2025-12-04 13:14:03 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 13:14:07 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/categories?activeOnly=true
2025-12-04 13:14:07 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:14:07 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/categories?activeOnly=true
2025-12-04 13:14:07 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/categories?activeOnly=true", parameters={masked}
2025-12-04 13:14:07 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.CategoryController#getAllCategories(UserDetails, Boolean)
2025-12-04 13:14:07 [http-nio-8881-exec-7] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:14:07 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:14:07 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.display_order,
        c1_0.is_active,
        c1_0.name,
        c1_0.tenant_id,
        c1_0.updated_at 
    from
        public.categories c1_0 
    where
        c1_0.tenant_id=? 
        and c1_0.is_active=? 
    order by
        c1_0.display_order
2025-12-04 13:14:07 [http-nio-8881-exec-7] DEBUG c.r.billing.service.CategoryService - Found 2 categories for tenant cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:14:07 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:14:07 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[CategoryDto(id=6ed45abe-f8f6-4966-8126-a3f0d0bd0aaa, name=Main course, displayOrder=1), CategoryDto (truncated)...]
2025-12-04 13:14:07 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:14:14 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/menu
2025-12-04 13:14:14 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:14:14 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/menu
2025-12-04 13:14:14 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/menu", parameters={}
2025-12-04 13:14:14 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.MenuController#createMenuItem(MenuItemDto, String)
2025-12-04 13:14:14 [http-nio-8881-exec-6] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:14:14 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [MenuItemDto(id=null, categoryId=6ed45abe-f8f6-4966-8126-a3f0d0bd0aaa, name=wqwqw, description=, pric (truncated)...]
2025-12-04 13:14:14 [http-nio-8881-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.restaurant.billing.controller.MenuController.createMenuItem(com.restaurant.billing.dto.menu.MenuItemDto,java.lang.String); target is of class [com.restaurant.billing.controller.MenuController]
2025-12-04 13:14:14 [http-nio-8881-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.restaurant.billing.controller.MenuController.createMenuItem(com.restaurant.billing.dto.menu.MenuItemDto,java.lang.String); target is of class [com.restaurant.billing.controller.MenuController]
2025-12-04 13:14:14 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.display_order,
        c1_0.is_active,
        c1_0.name,
        c1_0.tenant_id,
        c1_0.updated_at 
    from
        public.categories c1_0 
    where
        c1_0.id=?
2025-12-04 13:14:14 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    insert 
    into
        public.menu_items
        (category_id, created_at, description, device_id, image_path, is_available, is_deleted, is_veg, name, preparation_time, price, synced_at, tenant_id, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-04 13:14:14 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:14:14 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [MenuItemDto(id=2cf1d688-06f6-4337-bab0-e2763c6d179e, categoryId=6ed45abe-f8f6-4966-8126-a3f0d0bd0aaa (truncated)...]
2025-12-04 13:14:14 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-12-04 13:14:14 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/sync
2025-12-04 13:14:14 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:14:14 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/sync
2025-12-04 13:14:14 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/sync", parameters={}
2025-12-04 13:14:14 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.SyncController#performSync(SyncRequest)
2025-12-04 13:14:14 [http-nio-8881-exec-1] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:14:14 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [SyncRequest(deviceId=d23c59b8-4056-4cc6-b9bc-6ac5018951cf, lastSyncTime=1970-01-01T05:30, data=[Sync (truncated)...]
2025-12-04 13:14:14 [http-nio-8881-exec-1] ERROR c.r.billing.service.SyncService - Sync error for item: 41bbda95-8f62-416a-b7c9-d0f9416cea2c
java.lang.IllegalArgumentException: Unknown entity type: order
	at com.restaurant.billing.service.SyncService.processSyncItem(SyncService.java:107)
	at com.restaurant.billing.service.SyncService.performSync(SyncService.java:34)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at com.restaurant.billing.service.SyncService$$SpringCGLIB$$0.performSync(<generated>)
	at com.restaurant.billing.controller.SyncController.performSync(SyncController.java:23)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 13:14:14 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 13:14:14 [http-nio-8881-exec-1] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
java.lang.IllegalArgumentException: No enum constant com.restaurant.billing.entity.SyncLog.SyncOperation.create
	at java.base/java.lang.Enum.valueOf(Enum.java:273)
	at com.restaurant.billing.entity.SyncLog$SyncOperation.valueOf(SyncLog.java:65)
	at com.restaurant.billing.service.SyncService.logSync(SyncService.java:158)
	at com.restaurant.billing.service.SyncService.performSync(SyncService.java:51)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at com.restaurant.billing.service.SyncService$$SpringCGLIB$$0.performSync(<generated>)
	at com.restaurant.billing.controller.SyncController.performSync(SyncController.java:23)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 13:14:14 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:14:14 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T13:14:14.739652925, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 13:14:14 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [java.lang.IllegalArgumentException: No enum constant com.restaurant.billing.entity.SyncLog.SyncOperation.create]
2025-12-04 13:14:14 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 13:14:16 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/tables-occupied
2025-12-04 13:14:16 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/today-sales
2025-12-04 13:14:16 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/pending-payments
2025-12-04 13:14:16 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/active-orders
2025-12-04 13:14:16 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/stats
2025-12-04 13:14:16 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:14:16 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:14:16 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:14:16 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:14:16 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:14:16 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/stats
2025-12-04 13:14:16 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/active-orders
2025-12-04 13:14:16 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/tables-occupied
2025-12-04 13:14:16 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/pending-payments
2025-12-04 13:14:16 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/stats", parameters={}
2025-12-04 13:14:16 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/tables-occupied", parameters={}
2025-12-04 13:14:16 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/today-sales
2025-12-04 13:14:16 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/active-orders", parameters={}
2025-12-04 13:14:16 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/today-sales", parameters={}
2025-12-04 13:14:16 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTablesOccupied()
2025-12-04 13:14:16 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getActiveOrders()
2025-12-04 13:14:16 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getDashboardStats()
2025-12-04 13:14:16 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTodaySales()
2025-12-04 13:14:16 [http-nio-8881-exec-2] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:14:16 [http-nio-8881-exec-9] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:14:16 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/pending-payments", parameters={}
2025-12-04 13:14:16 [http-nio-8881-exec-8] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:14:16 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getPendingPayments()
2025-12-04 13:14:16 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:14:16 [http-nio-8881-exec-10] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:14:16 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 13:14:16 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 13:14:16 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 13:14:16 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 13:14:16 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 13:14:16 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:14:16 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:14:16 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 13:14:16 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 13:14:16 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:14:16 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 13:14:16 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 13:14:16 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 13:14:16 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:14:16 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:14:16 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:14:16 [http-nio-8881-exec-2] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session
	at org.hibernate.collection.spi.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:636)
	at org.hibernate.collection.spi.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:219)
	at org.hibernate.collection.spi.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:615)
	at org.hibernate.collection.spi.AbstractPersistentCollection.read(AbstractPersistentCollection.java:138)
	at org.hibernate.collection.spi.PersistentBag.iterator(PersistentBag.java:369)
	at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1842)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.reduce(ReferencePipeline.java:657)
	at com.restaurant.billing.service.DashboardService.getTodaySales(DashboardService.java:80)
	at com.restaurant.billing.controller.DashboardController.getTodaySales(DashboardController.java:24)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 13:14:16 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 13:14:16 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:14:16 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T13:14:16.299667766, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 13:14:16 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session]
2025-12-04 13:14:16 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 13:14:16 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 13:14:16 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:14:16 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{tablesOccupied=0, pendingPayments=0, activeOrders=0, todaySales=0}]
2025-12-04 13:14:16 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:14:16 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/orders
2025-12-04 13:14:16 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:14:16 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/orders
2025-12-04 13:14:16 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/orders", parameters={}
2025-12-04 13:14:16 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#getAllOrders()
2025-12-04 13:14:16 [http-nio-8881-exec-3] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:14:16 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 13:14:16 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:14:16 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:14:16 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:14:16 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:14:16 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:14:16 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:14:16 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:14:16 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:14:16 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:14:16 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:14:16 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:14:16 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:14:16 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:14:16 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:14:16 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:14:16 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:14:16 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:14:16 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:14:16 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 13:14:16 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:14:16 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[OrderDto(id=3d2cc165-482d-4290-b220-105d1ad18880, orderNumber=ORD1764763565538, tableId=null, table (truncated)...]
2025-12-04 13:14:16 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:14:17 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/menu
2025-12-04 13:14:17 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:14:17 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/menu
2025-12-04 13:14:17 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/menu", parameters={}
2025-12-04 13:14:17 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.MenuController#getAllMenuItems()
2025-12-04 13:14:17 [http-nio-8881-exec-5] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:14:17 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        mi1_0.id,
        mi1_0.category_id,
        mi1_0.created_at,
        mi1_0.description,
        mi1_0.device_id,
        mi1_0.image_path,
        mi1_0.is_available,
        mi1_0.is_deleted,
        mi1_0.is_veg,
        mi1_0.name,
        mi1_0.preparation_time,
        mi1_0.price,
        mi1_0.synced_at,
        mi1_0.tenant_id,
        mi1_0.updated_at,
        mi1_0.version 
    from
        public.menu_items mi1_0 
    where
        mi1_0.tenant_id=? 
        and mi1_0.is_deleted=?
2025-12-04 13:14:17 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:14:17 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[MenuItemDto(id=8a5577b8-36d5-4a3d-9299-903f009a42b9, categoryId=6ed45abe-f8f6-4966-8126-a3f0d0bd0aa (truncated)...]
2025-12-04 13:14:17 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:14:17 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/categories?activeOnly=true
2025-12-04 13:14:17 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:14:17 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/categories?activeOnly=true
2025-12-04 13:14:17 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/categories?activeOnly=true", parameters={masked}
2025-12-04 13:14:17 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.CategoryController#getAllCategories(UserDetails, Boolean)
2025-12-04 13:14:17 [http-nio-8881-exec-7] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:14:17 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:14:17 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.display_order,
        c1_0.is_active,
        c1_0.name,
        c1_0.tenant_id,
        c1_0.updated_at 
    from
        public.categories c1_0 
    where
        c1_0.tenant_id=? 
        and c1_0.is_active=? 
    order by
        c1_0.display_order
2025-12-04 13:14:17 [http-nio-8881-exec-7] DEBUG c.r.billing.service.CategoryService - Found 2 categories for tenant cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:14:17 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:14:17 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[CategoryDto(id=6ed45abe-f8f6-4966-8126-a3f0d0bd0aaa, name=Main course, displayOrder=1), CategoryDto (truncated)...]
2025-12-04 13:14:17 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 13:14:27 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/orders
2025-12-04 13:14:27 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:14:27 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/orders
2025-12-04 13:14:27 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/orders", parameters={}
2025-12-04 13:14:27 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#createOrder(CreateOrderRequest)
2025-12-04 13:14:27 [http-nio-8881-exec-6] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:14:27 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [CreateOrderRequest(tableId=null, customerName=null, customerPhone=null, orderType=DINE_IN, items=[Or (truncated)...]
2025-12-04 13:14:27 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 13:14:27 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        mi1_0.id,
        mi1_0.category_id,
        mi1_0.created_at,
        mi1_0.description,
        mi1_0.device_id,
        mi1_0.image_path,
        mi1_0.is_available,
        mi1_0.is_deleted,
        mi1_0.is_veg,
        mi1_0.name,
        mi1_0.preparation_time,
        mi1_0.price,
        mi1_0.synced_at,
        mi1_0.tenant_id,
        mi1_0.updated_at,
        mi1_0.version 
    from
        public.menu_items mi1_0 
    where
        mi1_0.id=?
2025-12-04 13:14:27 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        mi1_0.id,
        mi1_0.category_id,
        mi1_0.created_at,
        mi1_0.description,
        mi1_0.device_id,
        mi1_0.image_path,
        mi1_0.is_available,
        mi1_0.is_deleted,
        mi1_0.is_veg,
        mi1_0.name,
        mi1_0.preparation_time,
        mi1_0.price,
        mi1_0.synced_at,
        mi1_0.tenant_id,
        mi1_0.updated_at,
        mi1_0.version 
    from
        public.menu_items mi1_0 
    where
        mi1_0.id=?
2025-12-04 13:14:27 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        mi1_0.id,
        mi1_0.category_id,
        mi1_0.created_at,
        mi1_0.description,
        mi1_0.device_id,
        mi1_0.image_path,
        mi1_0.is_available,
        mi1_0.is_deleted,
        mi1_0.is_veg,
        mi1_0.name,
        mi1_0.preparation_time,
        mi1_0.price,
        mi1_0.synced_at,
        mi1_0.tenant_id,
        mi1_0.updated_at,
        mi1_0.version 
    from
        public.menu_items mi1_0 
    where
        mi1_0.id=?
2025-12-04 13:14:27 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        mi1_0.id,
        mi1_0.category_id,
        mi1_0.created_at,
        mi1_0.description,
        mi1_0.device_id,
        mi1_0.image_path,
        mi1_0.is_available,
        mi1_0.is_deleted,
        mi1_0.is_veg,
        mi1_0.name,
        mi1_0.preparation_time,
        mi1_0.price,
        mi1_0.synced_at,
        mi1_0.tenant_id,
        mi1_0.updated_at,
        mi1_0.version 
    from
        public.menu_items mi1_0 
    where
        mi1_0.id=?
2025-12-04 13:14:27 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        mi1_0.id,
        mi1_0.category_id,
        mi1_0.created_at,
        mi1_0.description,
        mi1_0.device_id,
        mi1_0.image_path,
        mi1_0.is_available,
        mi1_0.is_deleted,
        mi1_0.is_veg,
        mi1_0.name,
        mi1_0.preparation_time,
        mi1_0.price,
        mi1_0.synced_at,
        mi1_0.tenant_id,
        mi1_0.updated_at,
        mi1_0.version 
    from
        public.menu_items mi1_0 
    where
        mi1_0.id=?
2025-12-04 13:14:27 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.order_id=?
2025-12-04 13:14:27 [http-nio-8881-exec-6] INFO  c.r.billing.service.OrderService - Bill generated for order: 786fa95c-a022-4e93-bc7c-77e9382c435a
2025-12-04 13:14:27 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    insert 
    into
        public.orders
        (created_at, created_by, customer_name, customer_phone, device_id, discount_amount, is_deleted, notes, order_number, order_status, order_type, service_charge, subtotal, synced_at, table_id, tax_amount, tenant_id, total_amount, updated_at, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-04 13:14:27 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    insert 
    into
        public.order_items
        (created_at, item_name, menu_item_id, order_id, quantity, special_instructions, status, total_price, unit_price, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-04 13:14:27 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    insert 
    into
        public.order_items
        (created_at, item_name, menu_item_id, order_id, quantity, special_instructions, status, total_price, unit_price, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-04 13:14:27 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    insert 
    into
        public.order_items
        (created_at, item_name, menu_item_id, order_id, quantity, special_instructions, status, total_price, unit_price, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-04 13:14:27 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    insert 
    into
        public.order_items
        (created_at, item_name, menu_item_id, order_id, quantity, special_instructions, status, total_price, unit_price, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-04 13:14:27 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    insert 
    into
        public.order_items
        (created_at, item_name, menu_item_id, order_id, quantity, special_instructions, status, total_price, unit_price, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-04 13:14:27 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    insert 
    into
        public.bills
        (bill_number, change_amount, created_at, discount_amount, generated_by, invoice_path, order_id, paid_amount, payment_method, payment_status, service_charge, subtotal, tax_amount, tenant_id, total_amount, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-12-04 13:14:27 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:14:27 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [OrderDto(id=786fa95c-a022-4e93-bc7c-77e9382c435a, orderNumber=ORD1764834267409, tableId=null, tableN (truncated)...]
2025-12-04 13:14:27 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2025-12-04 13:14:27 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/sync
2025-12-04 13:14:27 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:14:27 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/sync
2025-12-04 13:14:27 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/sync", parameters={}
2025-12-04 13:14:27 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.SyncController#performSync(SyncRequest)
2025-12-04 13:14:27 [http-nio-8881-exec-1] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:14:27 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [SyncRequest(deviceId=d23c59b8-4056-4cc6-b9bc-6ac5018951cf, lastSyncTime=1970-01-01T05:30, data=[Sync (truncated)...]
2025-12-04 13:14:27 [http-nio-8881-exec-1] ERROR c.r.billing.service.SyncService - Sync error for item: 41bbda95-8f62-416a-b7c9-d0f9416cea2c
java.lang.IllegalArgumentException: Unknown entity type: order
	at com.restaurant.billing.service.SyncService.processSyncItem(SyncService.java:107)
	at com.restaurant.billing.service.SyncService.performSync(SyncService.java:34)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at com.restaurant.billing.service.SyncService$$SpringCGLIB$$0.performSync(<generated>)
	at com.restaurant.billing.controller.SyncController.performSync(SyncController.java:23)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 13:14:27 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 13:14:27 [http-nio-8881-exec-1] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
java.lang.IllegalArgumentException: No enum constant com.restaurant.billing.entity.SyncLog.SyncOperation.create
	at java.base/java.lang.Enum.valueOf(Enum.java:273)
	at com.restaurant.billing.entity.SyncLog$SyncOperation.valueOf(SyncLog.java:65)
	at com.restaurant.billing.service.SyncService.logSync(SyncService.java:158)
	at com.restaurant.billing.service.SyncService.performSync(SyncService.java:51)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at com.restaurant.billing.service.SyncService$$SpringCGLIB$$0.performSync(<generated>)
	at com.restaurant.billing.controller.SyncController.performSync(SyncController.java:23)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 13:14:27 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:14:27 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T13:14:27.456607938, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 13:14:27 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [java.lang.IllegalArgumentException: No enum constant com.restaurant.billing.entity.SyncLog.SyncOperation.create]
2025-12-04 13:14:27 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 13:14:27 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/restaurant/profile
2025-12-04 13:14:27 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 13:14:27 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/restaurant/profile
2025-12-04 13:14:27 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/restaurant/profile", parameters={}
2025-12-04 13:14:27 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.RestaurantController#getRestaurantProfile()
2025-12-04 13:14:27 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:14:27 [http-nio-8881-exec-4] INFO  c.r.b.service.RestaurantService - Fetching restaurant profile for tenant: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 13:14:27 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.id=?
2025-12-04 13:14:27 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 13:14:27 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [TenantDto(id=cc71d7e4-cf66-4d56-acbc-47bd417a1b63, restaurantName=Ganesh, restaurantCode=REST14DAA49 (truncated)...]
2025-12-04 13:14:27 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 15:24:48 [main] INFO  c.r.b.RestaurantBillingApplication - Starting RestaurantBillingApplication using Java 17.0.17 with PID 42701 (/home/ubuntu/Documents/Mine/Restaurant-BE/build/classes/java/main started by ubuntu in /home/ubuntu/Documents/Mine/Restaurant-BE)
2025-12-04 15:24:48 [main] DEBUG c.r.b.RestaurantBillingApplication - Running with Spring Boot v3.3.10, Spring v6.1.18
2025-12-04 15:24:48 [main] INFO  c.r.b.RestaurantBillingApplication - No active profile set, falling back to 1 default profile: "default"
2025-12-04 15:24:48 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-04 15:24:48 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 36 ms. Found 14 JPA repository interfaces.
2025-12-04 15:24:49 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8881 (http)
2025-12-04 15:24:49 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-04 15:24:49 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-12-04 15:24:49 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-12-04 15:24:49 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 880 ms
2025-12-04 15:24:49 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-04 15:24:49 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.3.Final
2025-12-04 15:24:49 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-12-04 15:24:49 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-04 15:24:49 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-12-04 15:24:49 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@5cfa2ac5
2025-12-04 15:24:49 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-12-04 15:24:49 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-04 15:24:50 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-04 15:24:50 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-04 15:24:50 [main] DEBUG c.r.b.s.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-12-04 15:24:50 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-04 15:24:51 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-12-04 15:24:51 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 45 mappings in 'requestMappingHandlerMapping'
2025-12-04 15:24:51 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /uploads/**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-12-04 15:24:51 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-04 15:24:51 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-04 15:24:51 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-04 15:24:52 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8881 (http) with context path '/'
2025-12-04 15:24:52 [main] INFO  c.r.b.RestaurantBillingApplication - Started RestaurantBillingApplication in 3.976 seconds (process running for 4.132)
2025-12-04 15:26:43 [http-nio-8881-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-04 15:26:43 [http-nio-8881-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-12-04 15:26:43 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-12-04 15:26:43 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-12-04 15:26:43 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-12-04 15:26:43 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@aa9b6a8
2025-12-04 15:26:43 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@6a68754
2025-12-04 15:26:43 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-12-04 15:26:43 [http-nio-8881-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-12-04 15:26:43 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/register
2025-12-04 15:26:43 [http-nio-8881-exec-1] ERROR c.r.billing.security.JwtUtil - Invalid JWT token: JWT expired at 2025-11-13T11:30:47Z. Current time: 2025-12-04T09:56:43Z, a difference of 1808756550 milliseconds.  Allowed clock skew: 0 milliseconds.
2025-12-04 15:26:43 [http-nio-8881-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-04 15:26:43 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/register
2025-12-04 15:26:43 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/register", parameters={}
2025-12-04 15:26:43 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.AuthController#register(RegisterRequest)
2025-12-04 15:26:43 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [RegisterRequest(restaurantName=Ganesh, ownerName=Ganehs, ownerEmail=Ganesh@gmail.com, ownerPhone=637 (truncated)...]
2025-12-04 15:26:43 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        t1_0.id 
    from
        public.tenants t1_0 
    where
        t1_0.owner_email=? 
    fetch
        first ? rows only
2025-12-04 15:26:43 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleBadRequest(BadRequestException)
2025-12-04 15:26:43 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 15:26:43 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T15:26:43.634187234, status=400, error=Bad Request, message=Email  (truncated)...]
2025-12-04 15:26:43 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.restaurant.billing.exception.BadRequestException: Email already registered]
2025-12-04 15:26:43 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-12-04 15:30:41 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-04 15:30:41 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-12-04 15:30:41 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-12-04 15:30:57 [main] INFO  c.r.b.RestaurantBillingApplication - Starting RestaurantBillingApplication using Java 17.0.17 with PID 52100 (/home/ubuntu/Documents/Mine/Restaurant-BE/build/classes/java/main started by ubuntu in /home/ubuntu/Documents/Mine/Restaurant-BE)
2025-12-04 15:30:57 [main] DEBUG c.r.b.RestaurantBillingApplication - Running with Spring Boot v3.3.10, Spring v6.1.18
2025-12-04 15:30:57 [main] INFO  c.r.b.RestaurantBillingApplication - No active profile set, falling back to 1 default profile: "default"
2025-12-04 15:30:57 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-04 15:30:57 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 40 ms. Found 14 JPA repository interfaces.
2025-12-04 15:30:58 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8881 (http)
2025-12-04 15:30:58 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-04 15:30:58 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-12-04 15:30:58 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-12-04 15:30:58 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 881 ms
2025-12-04 15:30:58 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-04 15:30:58 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.3.Final
2025-12-04 15:30:58 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-12-04 15:30:58 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-04 15:30:58 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-12-04 15:30:58 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@27fc0217
2025-12-04 15:30:58 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-12-04 15:30:58 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-04 15:30:59 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-04 15:30:59 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-04 15:31:00 [main] DEBUG c.r.b.s.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-12-04 15:31:00 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-04 15:31:00 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-12-04 15:31:00 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 45 mappings in 'requestMappingHandlerMapping'
2025-12-04 15:31:00 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /uploads/**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-12-04 15:31:00 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-04 15:31:00 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-04 15:31:00 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-04 15:31:01 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8881 (http) with context path '/'
2025-12-04 15:31:01 [main] INFO  c.r.b.RestaurantBillingApplication - Started RestaurantBillingApplication in 3.849 seconds (process running for 4.008)
2025-12-04 15:32:18 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-04 15:32:18 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-12-04 15:32:18 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-12-04 15:32:22 [main] INFO  c.r.b.RestaurantBillingApplication - Starting RestaurantBillingApplication using Java 17.0.17 with PID 53992 (/home/ubuntu/Documents/Mine/Restaurant-BE/build/classes/java/main started by ubuntu in /home/ubuntu/Documents/Mine/Restaurant-BE)
2025-12-04 15:32:22 [main] DEBUG c.r.b.RestaurantBillingApplication - Running with Spring Boot v3.3.10, Spring v6.1.18
2025-12-04 15:32:22 [main] INFO  c.r.b.RestaurantBillingApplication - No active profile set, falling back to 1 default profile: "default"
2025-12-04 15:32:22 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-04 15:32:22 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 38 ms. Found 14 JPA repository interfaces.
2025-12-04 15:32:22 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8881 (http)
2025-12-04 15:32:22 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-04 15:32:22 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-12-04 15:32:22 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-12-04 15:32:22 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 868 ms
2025-12-04 15:32:23 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-04 15:32:23 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.3.Final
2025-12-04 15:32:23 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-12-04 15:32:23 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-04 15:32:23 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-12-04 15:32:23 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@69c1ea07
2025-12-04 15:32:23 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-12-04 15:32:23 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-04 15:32:23 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-04 15:32:24 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-04 15:32:24 [main] DEBUG c.r.b.s.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-12-04 15:32:24 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-04 15:32:25 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-12-04 15:32:25 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 45 mappings in 'requestMappingHandlerMapping'
2025-12-04 15:32:25 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /uploads/**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-12-04 15:32:25 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-04 15:32:25 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-04 15:32:25 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-04 15:32:25 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8881 (http) with context path '/'
2025-12-04 15:32:25 [main] INFO  c.r.b.RestaurantBillingApplication - Started RestaurantBillingApplication in 3.905 seconds (process running for 4.079)
2025-12-04 15:35:04 [http-nio-8881-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-04 15:35:04 [http-nio-8881-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-12-04 15:35:04 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-12-04 15:35:04 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-12-04 15:35:04 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-12-04 15:35:04 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@d95150c
2025-12-04 15:35:04 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@1391802b
2025-12-04 15:35:04 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-12-04 15:35:04 [http-nio-8881-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-12-04 15:35:04 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-12-04 15:35:04 [http-nio-8881-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-04 15:35:04 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-12-04 15:35:04 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-12-04 15:35:04 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.AuthController#login(LoginRequest)
2025-12-04 15:35:04 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 15:35:04 [http-nio-8881-exec-1] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
java.lang.IllegalArgumentException: When allowCredentials is true, allowedOrigins cannot contain the special value "*" since that cannot be set on the "Access-Control-Allow-Origin" response header. To allow credentials to a set of origins, list them explicitly or consider using "allowedOriginPatterns" instead.
	at org.springframework.web.cors.CorsConfiguration.validateAllowCredentials(CorsConfiguration.java:574)
	at org.springframework.web.servlet.handler.AbstractHandlerMapping.getHandler(AbstractHandlerMapping.java:542)
	at org.springframework.web.servlet.DispatcherServlet.getHandler(DispatcherServlet.java:1284)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1065)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 15:35:04 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 15:35:04 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T15:35:04.263763382, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 15:35:04 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [java.lang.IllegalArgumentException: When allowCredentials is true, allowedOrigins cannot contain the special value "*" since that cannot be set on the "Access-Control-Allow-Origin" response header. To allow credentials to a set of origins, list them explicitly or consider using "allowedOriginPatterns" instead.]
2025-12-04 15:35:04 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 15:36:15 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-04 15:36:15 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-12-04 15:36:15 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-12-04 15:36:19 [main] INFO  c.r.b.RestaurantBillingApplication - Starting RestaurantBillingApplication using Java 17.0.17 with PID 61095 (/home/ubuntu/Documents/Mine/Restaurant-BE/build/classes/java/main started by ubuntu in /home/ubuntu/Documents/Mine/Restaurant-BE)
2025-12-04 15:36:19 [main] DEBUG c.r.b.RestaurantBillingApplication - Running with Spring Boot v3.3.10, Spring v6.1.18
2025-12-04 15:36:19 [main] INFO  c.r.b.RestaurantBillingApplication - No active profile set, falling back to 1 default profile: "default"
2025-12-04 15:36:19 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-04 15:36:19 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 38 ms. Found 14 JPA repository interfaces.
2025-12-04 15:36:20 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8881 (http)
2025-12-04 15:36:20 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-04 15:36:20 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-12-04 15:36:20 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-12-04 15:36:20 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 862 ms
2025-12-04 15:36:20 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-04 15:36:20 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.3.Final
2025-12-04 15:36:20 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-12-04 15:36:20 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-04 15:36:20 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-12-04 15:36:20 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@4cc89246
2025-12-04 15:36:20 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-12-04 15:36:20 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-04 15:36:21 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-04 15:36:21 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-04 15:36:22 [main] DEBUG c.r.b.s.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-12-04 15:36:22 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'webConfig': Injection of autowired dependencies failed
2025-12-04 15:36:22 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-04 15:36:22 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-12-04 15:36:22 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-12-04 15:36:22 [main] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-12-04 15:36:22 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-12-04 15:36:22 [main] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'webConfig': Injection of autowired dependencies failed
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:515)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1439)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:971)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:625)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352)
	at com.restaurant.billing.RestaurantBillingApplication.main(RestaurantBillingApplication.java:20)
Caused by: java.lang.IllegalArgumentException: Could not resolve placeholder 'app.cors.allowed-origins' in value "${app.cors.allowed-origins}"
	at org.springframework.util.PropertyPlaceholderHelper.parseStringValue(PropertyPlaceholderHelper.java:180)
	at org.springframework.util.PropertyPlaceholderHelper.replacePlaceholders(PropertyPlaceholderHelper.java:126)
	at org.springframework.core.env.AbstractPropertyResolver.doResolvePlaceholders(AbstractPropertyResolver.java:239)
	at org.springframework.core.env.AbstractPropertyResolver.resolveRequiredPlaceholders(AbstractPropertyResolver.java:210)
	at org.springframework.context.support.PropertySourcesPlaceholderConfigurer.lambda$processProperties$0(PropertySourcesPlaceholderConfigurer.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.resolveEmbeddedValue(AbstractBeanFactory.java:964)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1379)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1358)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:785)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:768)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:145)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:509)
	... 17 common frames omitted
2025-12-04 15:49:51 [main] INFO  c.r.b.RestaurantBillingApplication - Starting RestaurantBillingApplication using Java 17.0.17 with PID 25170 (/home/ubuntu/Documents/Mine/Restaurant-BE/build/classes/java/main started by ubuntu in /home/ubuntu/Documents/Mine/Restaurant-BE)
2025-12-04 15:49:51 [main] DEBUG c.r.b.RestaurantBillingApplication - Running with Spring Boot v3.3.10, Spring v6.1.18
2025-12-04 15:49:51 [main] INFO  c.r.b.RestaurantBillingApplication - No active profile set, falling back to 1 default profile: "default"
2025-12-04 15:49:51 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-04 15:49:51 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 43 ms. Found 14 JPA repository interfaces.
2025-12-04 15:49:52 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8881 (http)
2025-12-04 15:49:52 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-04 15:49:52 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-12-04 15:49:52 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-12-04 15:49:52 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 981 ms
2025-12-04 15:49:52 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-04 15:49:52 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.3.Final
2025-12-04 15:49:52 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-12-04 15:49:52 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-04 15:49:52 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-12-04 15:49:52 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@33891646
2025-12-04 15:49:52 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-12-04 15:49:52 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-04 15:49:53 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-04 15:49:53 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-04 15:49:53 [main] DEBUG c.r.b.s.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-12-04 15:49:54 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-04 15:49:54 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-12-04 15:49:54 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 45 mappings in 'requestMappingHandlerMapping'
2025-12-04 15:49:54 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /uploads/**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-12-04 15:49:54 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-04 15:49:54 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-04 15:49:54 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-04 15:49:55 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8881 (http) with context path '/'
2025-12-04 15:49:55 [main] INFO  c.r.b.RestaurantBillingApplication - Started RestaurantBillingApplication in 4.304 seconds (process running for 4.476)
2025-12-04 15:53:18 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-04 15:53:18 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-12-04 15:53:18 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-12-04 15:55:46 [main] INFO  c.r.b.RestaurantBillingApplication - Starting RestaurantBillingApplication using Java 17.0.17 with PID 39777 (/home/ubuntu/Documents/Mine/Restaurant-BE/build/classes/java/main started by ubuntu in /home/ubuntu/Documents/Mine/Restaurant-BE)
2025-12-04 15:55:46 [main] DEBUG c.r.b.RestaurantBillingApplication - Running with Spring Boot v3.3.10, Spring v6.1.18
2025-12-04 15:55:46 [main] INFO  c.r.b.RestaurantBillingApplication - No active profile set, falling back to 1 default profile: "default"
2025-12-04 15:55:48 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-04 15:55:48 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 201 ms. Found 14 JPA repository interfaces.
2025-12-04 15:55:50 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8881 (http)
2025-12-04 15:55:50 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-04 15:55:50 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-12-04 15:55:50 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-12-04 15:55:50 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 4063 ms
2025-12-04 15:55:50 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-04 15:55:50 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.3.Final
2025-12-04 15:55:50 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-12-04 15:55:51 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-04 15:55:51 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-12-04 15:55:51 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@c1a74d
2025-12-04 15:55:51 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-12-04 15:55:51 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-04 15:55:52 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-04 15:55:53 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-04 15:55:53 [main] DEBUG c.r.b.s.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-12-04 15:55:53 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-04 15:55:54 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-12-04 15:55:55 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 45 mappings in 'requestMappingHandlerMapping'
2025-12-04 15:55:55 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /uploads/**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-12-04 15:55:55 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-04 15:55:55 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-04 15:55:55 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-04 15:55:55 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8881 (http) with context path '/'
2025-12-04 15:55:55 [main] INFO  c.r.b.RestaurantBillingApplication - Started RestaurantBillingApplication in 10.481 seconds (process running for 11.044)
2025-12-04 15:59:20 [http-nio-8881-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-04 15:59:20 [http-nio-8881-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-12-04 15:59:20 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-12-04 15:59:20 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-12-04 15:59:20 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-12-04 15:59:20 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@48430066
2025-12-04 15:59:20 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@6df459fe
2025-12-04 15:59:20 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-12-04 15:59:20 [http-nio-8881-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-12-04 15:59:20 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/auth/login
2025-12-04 15:59:47 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/auth/login
2025-12-04 16:00:02 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/auth/login
2025-12-04 16:00:32 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/auth/login
2025-12-04 16:00:50 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/auth/login
2025-12-04 16:07:55 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-04 16:07:55 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-12-04 16:07:55 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-12-04 16:08:00 [main] INFO  c.r.b.RestaurantBillingApplication - Starting RestaurantBillingApplication using Java 17.0.17 with PID 56062 (/home/ubuntu/Documents/Mine/Restaurant-BE/build/classes/java/main started by ubuntu in /home/ubuntu/Documents/Mine/Restaurant-BE)
2025-12-04 16:08:00 [main] DEBUG c.r.b.RestaurantBillingApplication - Running with Spring Boot v3.3.10, Spring v6.1.18
2025-12-04 16:08:00 [main] INFO  c.r.b.RestaurantBillingApplication - No active profile set, falling back to 1 default profile: "default"
2025-12-04 16:08:01 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-04 16:08:01 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 43 ms. Found 14 JPA repository interfaces.
2025-12-04 16:08:01 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8881 (http)
2025-12-04 16:08:01 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-04 16:08:01 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-12-04 16:08:01 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-12-04 16:08:01 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 962 ms
2025-12-04 16:08:01 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-04 16:08:01 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.3.Final
2025-12-04 16:08:01 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-12-04 16:08:01 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-04 16:08:01 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-12-04 16:08:01 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@73234691
2025-12-04 16:08:01 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-12-04 16:08:01 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-04 16:08:02 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-04 16:08:03 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-04 16:08:03 [main] DEBUG c.r.b.s.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-12-04 16:08:03 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-12-04 16:08:03 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-12-04 16:08:03 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 45 mappings in 'requestMappingHandlerMapping'
2025-12-04 16:08:04 [main] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /uploads/**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-12-04 16:08:04 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-12-04 16:08:04 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-12-04 16:08:04 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-12-04 16:08:04 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8881 (http) with context path '/'
2025-12-04 16:08:04 [main] INFO  c.r.b.RestaurantBillingApplication - Started RestaurantBillingApplication in 4.119 seconds (process running for 4.293)
2025-12-04 16:08:07 [http-nio-8881-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-04 16:08:07 [http-nio-8881-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-12-04 16:08:07 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-12-04 16:08:07 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-12-04 16:08:07 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-12-04 16:08:07 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@93370c5
2025-12-04 16:08:07 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@75b45343
2025-12-04 16:08:07 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-12-04 16:08:07 [http-nio-8881-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-12-04 16:08:07 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/auth/login
2025-12-04 16:08:07 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-12-04 16:08:07 [http-nio-8881-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-12-04 16:08:07 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-12-04 16:08:07 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-12-04 16:08:07 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.AuthController#login(LoginRequest)
2025-12-04 16:08:07 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest(restaurantCode=REST14DAA490, username=Ganesh@gmail.com, password=Rest@1234)]
2025-12-04 16:08:07 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.address,
        t1_0.city,
        t1_0.created_at,
        t1_0.currency,
        t1_0.gstin,
        t1_0.is_active,
        t1_0.logo_path,
        t1_0.max_storage_gb,
        t1_0.max_users,
        t1_0.owner_email,
        t1_0.owner_name,
        t1_0.owner_phone,
        t1_0.pincode,
        t1_0.razorpay_customer_id,
        t1_0.razorpay_subscription_id,
        t1_0.restaurant_code,
        t1_0.restaurant_name,
        t1_0.service_charge_rate,
        t1_0.state,
        t1_0.subscription_end_date,
        t1_0.subscription_plan,
        t1_0.subscription_start_date,
        t1_0.subscription_status,
        t1_0.tax_rate,
        t1_0.timezone,
        t1_0.trial_end_date,
        t1_0.updated_at 
    from
        public.tenants t1_0 
    where
        t1_0.restaurant_code=?
2025-12-04 16:08:08 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=? 
        and u1_0.tenant_id=?
2025-12-04 16:08:08 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    update
        public.users 
    set
        auth_provider=?,
        email=?,
        google_id=?,
        is_active=?,
        last_login=?,
        name=?,
        password_hash=?,
        phone=?,
        refresh_token=?,
        refresh_token_expiry=?,
        role=?,
        tenant_id=?,
        updated_at=? 
    where
        id=?
2025-12-04 16:08:08 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 16:08:08 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [AuthResponse(accessToken=eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiT1dORVIiLCJ0ZW5hbnRJZCI6ImNjNzFkN2U0LWNmNj (truncated)...]
2025-12-04 16:08:08 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 16:08:08 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/today-sales
2025-12-04 16:08:08 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/active-orders
2025-12-04 16:08:08 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/pending-payments
2025-12-04 16:08:08 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/tables-occupied
2025-12-04 16:08:08 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/dashboard/stats
2025-12-04 16:08:08 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/today-sales
2025-12-04 16:08:08 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/tables-occupied
2025-12-04 16:08:08 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/stats
2025-12-04 16:08:08 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/pending-payments
2025-12-04 16:08:08 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/active-orders
2025-12-04 16:08:08 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 16:08:08 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 16:08:08 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 16:08:08 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 16:08:08 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 16:08:08 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/tables-occupied
2025-12-04 16:08:08 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/stats
2025-12-04 16:08:08 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/today-sales
2025-12-04 16:08:08 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/pending-payments
2025-12-04 16:08:08 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/active-orders
2025-12-04 16:08:08 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/tables-occupied", parameters={}
2025-12-04 16:08:08 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/stats", parameters={}
2025-12-04 16:08:08 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/today-sales", parameters={}
2025-12-04 16:08:08 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/pending-payments", parameters={}
2025-12-04 16:08:08 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/active-orders", parameters={}
2025-12-04 16:08:08 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTablesOccupied()
2025-12-04 16:08:08 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTodaySales()
2025-12-04 16:08:08 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getDashboardStats()
2025-12-04 16:08:08 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getPendingPayments()
2025-12-04 16:08:08 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getActiveOrders()
2025-12-04 16:08:08 [http-nio-8881-exec-1] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 16:08:08 [http-nio-8881-exec-9] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 16:08:08 [http-nio-8881-exec-2] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 16:08:08 [http-nio-8881-exec-8] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 16:08:08 [http-nio-8881-exec-10] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 16:08:08 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 16:08:08 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 16:08:08 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 16:08:08 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 16:08:08 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 16:08:08 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 16:08:08 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 16:08:08 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 16:08:08 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 16:08:08 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 16:08:08 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 16:08:08 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 16:08:08 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 16:08:08 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 16:08:08 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 16:08:08 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 16:08:08 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 16:08:08 [http-nio-8881-exec-8] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session
	at org.hibernate.collection.spi.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:636)
	at org.hibernate.collection.spi.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:219)
	at org.hibernate.collection.spi.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:615)
	at org.hibernate.collection.spi.AbstractPersistentCollection.read(AbstractPersistentCollection.java:138)
	at org.hibernate.collection.spi.PersistentBag.iterator(PersistentBag.java:369)
	at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1842)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.reduce(ReferencePipeline.java:657)
	at com.restaurant.billing.service.DashboardService.getTodaySales(DashboardService.java:80)
	at com.restaurant.billing.controller.DashboardController.getTodaySales(DashboardController.java:24)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 16:08:08 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 16:08:08 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 16:08:08 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T16:08:08.540182292, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 16:08:08 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session]
2025-12-04 16:08:08 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 16:08:08 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 16:08:08 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{todaySales=0, activeOrders=0, pendingPayments=0, tablesOccupied=0}]
2025-12-04 16:08:08 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 16:08:08 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/orders
2025-12-04 16:08:08 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/orders
2025-12-04 16:08:08 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 16:08:08 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/orders
2025-12-04 16:08:08 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/orders", parameters={}
2025-12-04 16:08:08 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#getAllOrders()
2025-12-04 16:08:08 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 16:08:08 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 16:08:08 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:08 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:08 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:08 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:08 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:08 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:08 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:08 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:08 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:08 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:08 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:08 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:08 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:08 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:08 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:08 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:08 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:08 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:08 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:08 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:08 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 16:08:08 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[OrderDto(id=3d2cc165-482d-4290-b220-105d1ad18880, orderNumber=ORD1764763565538, tableId=null, table (truncated)...]
2025-12-04 16:08:08 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 16:08:13 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/orders
2025-12-04 16:08:13 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 16:08:13 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/orders
2025-12-04 16:08:13 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/orders", parameters={}
2025-12-04 16:08:13 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#getAllOrders()
2025-12-04 16:08:13 [http-nio-8881-exec-5] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 16:08:13 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 16:08:13 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:13 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:13 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:13 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:13 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:13 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:13 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:13 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:13 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:13 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:13 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:13 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:13 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:13 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:13 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:13 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:13 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:13 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:13 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:13 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:13 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 16:08:13 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[OrderDto(id=3d2cc165-482d-4290-b220-105d1ad18880, orderNumber=ORD1764763565538, tableId=null, table (truncated)...]
2025-12-04 16:08:13 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 16:08:14 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/active-orders
2025-12-04 16:08:14 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/tables-occupied
2025-12-04 16:08:14 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/today-sales
2025-12-04 16:08:14 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/pending-payments
2025-12-04 16:08:14 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/stats
2025-12-04 16:08:14 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 16:08:14 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 16:08:14 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 16:08:14 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 16:08:14 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 16:08:14 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/pending-payments
2025-12-04 16:08:14 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/stats
2025-12-04 16:08:14 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/tables-occupied
2025-12-04 16:08:14 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/active-orders
2025-12-04 16:08:14 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/today-sales
2025-12-04 16:08:14 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/stats", parameters={}
2025-12-04 16:08:14 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/tables-occupied", parameters={}
2025-12-04 16:08:14 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/active-orders", parameters={}
2025-12-04 16:08:14 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/pending-payments", parameters={}
2025-12-04 16:08:14 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/today-sales", parameters={}
2025-12-04 16:08:14 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTablesOccupied()
2025-12-04 16:08:14 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getActiveOrders()
2025-12-04 16:08:14 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getDashboardStats()
2025-12-04 16:08:14 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getPendingPayments()
2025-12-04 16:08:14 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTodaySales()
2025-12-04 16:08:14 [http-nio-8881-exec-10] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 16:08:14 [http-nio-8881-exec-7] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 16:08:14 [http-nio-8881-exec-9] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 16:08:14 [http-nio-8881-exec-6] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 16:08:14 [http-nio-8881-exec-1] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 16:08:14 [http-nio-8881-exec-10] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 16:08:14 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 16:08:14 [http-nio-8881-exec-7] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 16:08:14 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 16:08:14 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 16:08:14 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 16:08:14 [http-nio-8881-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 16:08:14 [http-nio-8881-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 16:08:14 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 16:08:14 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 16:08:14 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 16:08:14 [http-nio-8881-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 16:08:14 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 16:08:14 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 16:08:14 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 16:08:14 [http-nio-8881-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 16:08:14 [http-nio-8881-exec-6] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session
	at org.hibernate.collection.spi.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:636)
	at org.hibernate.collection.spi.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:219)
	at org.hibernate.collection.spi.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:615)
	at org.hibernate.collection.spi.AbstractPersistentCollection.read(AbstractPersistentCollection.java:138)
	at org.hibernate.collection.spi.PersistentBag.iterator(PersistentBag.java:369)
	at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1842)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.reduce(ReferencePipeline.java:657)
	at com.restaurant.billing.service.DashboardService.getTodaySales(DashboardService.java:80)
	at com.restaurant.billing.controller.DashboardController.getTodaySales(DashboardController.java:24)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 16:08:14 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 16:08:14 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T16:08:14.666732825, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 16:08:14 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session]
2025-12-04 16:08:14 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 16:08:14 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 16:08:14 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 16:08:14 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 16:08:14 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{todaySales=0, activeOrders=0, pendingPayments=0, tablesOccupied=0}]
2025-12-04 16:08:14 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 16:08:14 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/orders
2025-12-04 16:08:14 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 16:08:14 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/orders
2025-12-04 16:08:14 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/orders", parameters={}
2025-12-04 16:08:14 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#getAllOrders()
2025-12-04 16:08:14 [http-nio-8881-exec-8] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 16:08:14 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 16:08:14 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:14 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:14 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:14 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:14 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:14 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:14 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:14 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:14 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:14 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:14 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:14 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:14 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:14 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:14 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:14 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:14 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:14 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:14 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:14 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:14 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 16:08:14 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[OrderDto(id=3d2cc165-482d-4290-b220-105d1ad18880, orderNumber=ORD1764763565538, tableId=null, table (truncated)...]
2025-12-04 16:08:14 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 16:08:15 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/menu
2025-12-04 16:08:15 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/menu
2025-12-04 16:08:15 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 16:08:15 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/menu
2025-12-04 16:08:15 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/menu", parameters={}
2025-12-04 16:08:15 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.MenuController#getAllMenuItems()
2025-12-04 16:08:15 [http-nio-8881-exec-3] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 16:08:15 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        mi1_0.id,
        mi1_0.category_id,
        mi1_0.created_at,
        mi1_0.description,
        mi1_0.device_id,
        mi1_0.image_path,
        mi1_0.is_available,
        mi1_0.is_deleted,
        mi1_0.is_veg,
        mi1_0.name,
        mi1_0.preparation_time,
        mi1_0.price,
        mi1_0.synced_at,
        mi1_0.tenant_id,
        mi1_0.updated_at,
        mi1_0.version 
    from
        public.menu_items mi1_0 
    where
        mi1_0.tenant_id=? 
        and mi1_0.is_deleted=?
2025-12-04 16:08:15 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 16:08:15 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[MenuItemDto(id=8a5577b8-36d5-4a3d-9299-903f009a42b9, categoryId=6ed45abe-f8f6-4966-8126-a3f0d0bd0aa (truncated)...]
2025-12-04 16:08:15 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 16:08:15 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/categories?activeOnly=true
2025-12-04 16:08:15 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/categories?activeOnly=true
2025-12-04 16:08:15 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 16:08:15 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/categories?activeOnly=true
2025-12-04 16:08:15 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/categories?activeOnly=true", parameters={masked}
2025-12-04 16:08:15 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.CategoryController#getAllCategories(UserDetails, Boolean)
2025-12-04 16:08:15 [http-nio-8881-exec-5] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 16:08:15 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 16:08:15 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.created_at,
        c1_0.display_order,
        c1_0.is_active,
        c1_0.name,
        c1_0.tenant_id,
        c1_0.updated_at 
    from
        public.categories c1_0 
    where
        c1_0.tenant_id=? 
        and c1_0.is_active=? 
    order by
        c1_0.display_order
2025-12-04 16:08:15 [http-nio-8881-exec-5] DEBUG c.r.billing.service.CategoryService - Found 2 categories for tenant cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 16:08:15 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 16:08:15 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[CategoryDto(id=6ed45abe-f8f6-4966-8126-a3f0d0bd0aaa, name=Main course, displayOrder=1), CategoryDto (truncated)...]
2025-12-04 16:08:15 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 16:08:16 [http-nio-8881-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/reports/day-wise?startDate=2025-11-27T16%3A08%3A16.226&endDate=2025-12-04T16%3A08%3A16.226
2025-12-04 16:08:16 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/reports/day-wise?startDate=2025-11-27T16%3A08%3A16.226&endDate=2025-12-04T16%3A08%3A16.226
2025-12-04 16:08:16 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 16:08:16 [http-nio-8881-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/reports/day-wise?startDate=2025-11-27T16%3A08%3A16.226&endDate=2025-12-04T16%3A08%3A16.226
2025-12-04 16:08:16 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/day-wise?startDate=2025-11-27T16%3A08%3A16.226&endDate=2025-12-04T16%3A08%3A16.226", parameters={masked}
2025-12-04 16:08:16 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.ReportController#getDayWiseSales(LocalDateTime, LocalDateTime)
2025-12-04 16:08:16 [http-nio-8881-exec-1] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 16:08:16 [http-nio-8881-exec-1] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 16:08:16 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 16:08:16 [http-nio-8881-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[{date=2025-12-03, totalSales=0}, {date=2025-12-04, totalSales=0}]]
2025-12-04 16:08:16 [http-nio-8881-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 16:08:16 [http-nio-8881-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/reports/product-wise?startDate=2025-11-27T16%3A08%3A16.226&endDate=2025-12-04T16%3A08%3A16.226
2025-12-04 16:08:16 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/reports/product-wise?startDate=2025-11-27T16%3A08%3A16.226&endDate=2025-12-04T16%3A08%3A16.226
2025-12-04 16:08:16 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 16:08:16 [http-nio-8881-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/reports/product-wise?startDate=2025-11-27T16%3A08%3A16.226&endDate=2025-12-04T16%3A08%3A16.226
2025-12-04 16:08:16 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/reports/product-wise?startDate=2025-11-27T16%3A08%3A16.226&endDate=2025-12-04T16%3A08%3A16.226", parameters={masked}
2025-12-04 16:08:16 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.ReportController#getProductWiseSales(LocalDateTime, LocalDateTime)
2025-12-04 16:08:16 [http-nio-8881-exec-6] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 16:08:16 [http-nio-8881-exec-6] DEBUG org.hibernate.SQL - 
    select
        oi1_0.menu_item_id,
        oi1_0.item_name,
        sum(oi1_0.quantity),
        sum(oi1_0.total_price) 
    from
        public.order_items oi1_0 
    join
        public.orders o1_0 
            on o1_0.id=oi1_0.order_id 
    where
        o1_0.tenant_id=? 
        and o1_0.created_at between ? and ? 
    group by
        oi1_0.menu_item_id,
        oi1_0.item_name 
    order by
        sum(oi1_0.total_price) desc
2025-12-04 16:08:16 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 16:08:16 [http-nio-8881-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[{menuItemId=8a5577b8-36d5-4a3d-9299-903f009a42b9, itemName=TEA, totalQuantity=28, totalRevenue=420. (truncated)...]
2025-12-04 16:08:16 [http-nio-8881-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 16:08:19 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/pending-payments
2025-12-04 16:08:19 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/tables-occupied
2025-12-04 16:08:19 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/today-sales
2025-12-04 16:08:19 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/active-orders
2025-12-04 16:08:19 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dashboard/stats
2025-12-04 16:08:19 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 16:08:19 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 16:08:19 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 16:08:19 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 16:08:19 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 16:08:19 [http-nio-8881-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/stats
2025-12-04 16:08:19 [http-nio-8881-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/active-orders
2025-12-04 16:08:19 [http-nio-8881-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/pending-payments
2025-12-04 16:08:19 [http-nio-8881-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/tables-occupied
2025-12-04 16:08:19 [http-nio-8881-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dashboard/today-sales
2025-12-04 16:08:19 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/stats", parameters={}
2025-12-04 16:08:19 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/today-sales", parameters={}
2025-12-04 16:08:19 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/active-orders", parameters={}
2025-12-04 16:08:19 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/pending-payments", parameters={}
2025-12-04 16:08:19 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dashboard/tables-occupied", parameters={}
2025-12-04 16:08:19 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getDashboardStats()
2025-12-04 16:08:19 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTodaySales()
2025-12-04 16:08:19 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getTablesOccupied()
2025-12-04 16:08:19 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getActiveOrders()
2025-12-04 16:08:19 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.DashboardController#getPendingPayments()
2025-12-04 16:08:19 [http-nio-8881-exec-4] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 16:08:19 [http-nio-8881-exec-9] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 16:08:19 [http-nio-8881-exec-3] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 16:08:19 [http-nio-8881-exec-8] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 16:08:19 [http-nio-8881-exec-2] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 16:08:19 [http-nio-8881-exec-3] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 16:08:19 [http-nio-8881-exec-2] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 16:08:19 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        cast(b1_0.created_at as date),
        sum(b1_0.total_amount) 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=? 
        and b1_0.created_at between ? and ? 
    group by
        cast(b1_0.created_at as date) 
    order by
        cast(b1_0.created_at as date)
2025-12-04 16:08:19 [http-nio-8881-exec-8] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 16:08:19 [http-nio-8881-exec-9] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 16:08:19 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 16:08:19 [http-nio-8881-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 16:08:19 [http-nio-8881-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 16:08:19 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 16:08:19 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 16:08:19 [http-nio-8881-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 16:08:19 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.restaurant.billing.exception.GlobalExceptionHandler#handleGenericException(Exception)
2025-12-04 16:08:19 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 16:08:19 [http-nio-8881-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=0}]
2025-12-04 16:08:19 [http-nio-8881-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 16:08:19 [http-nio-8881-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 16:08:19 [http-nio-8881-exec-9] ERROR c.r.b.e.GlobalExceptionHandler - Unexpected error occurred
org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session
	at org.hibernate.collection.spi.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:636)
	at org.hibernate.collection.spi.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:219)
	at org.hibernate.collection.spi.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:615)
	at org.hibernate.collection.spi.AbstractPersistentCollection.read(AbstractPersistentCollection.java:138)
	at org.hibernate.collection.spi.PersistentBag.iterator(PersistentBag.java:369)
	at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1842)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:276)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.reduce(ReferencePipeline.java:657)
	at com.restaurant.billing.service.DashboardService.getTodaySales(DashboardService.java:80)
	at com.restaurant.billing.controller.DashboardController.getTodaySales(DashboardController.java:24)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.restaurant.billing.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-12-04 16:08:19 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 16:08:19 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ErrorResponse(timestamp=2025-12-04T16:08:19.113488598, status=500, error=Internal Server Error, mess (truncated)...]
2025-12-04 16:08:19 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        b1_0.id,
        b1_0.bill_number,
        b1_0.change_amount,
        b1_0.created_at,
        b1_0.discount_amount,
        b1_0.generated_by,
        b1_0.invoice_path,
        b1_0.order_id,
        b1_0.paid_amount,
        b1_0.payment_method,
        b1_0.payment_status,
        b1_0.service_charge,
        b1_0.subtotal,
        b1_0.tax_amount,
        b1_0.tenant_id,
        b1_0.total_amount 
    from
        public.bills b1_0 
    where
        b1_0.tenant_id=?
2025-12-04 16:08:19 [http-nio-8881-exec-9] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.restaurant.billing.entity.Order.items: could not initialize proxy - no Session]
2025-12-04 16:08:19 [http-nio-8881-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-12-04 16:08:19 [http-nio-8881-exec-4] DEBUG org.hibernate.SQL - 
    select
        rt1_0.id,
        rt1_0.created_at,
        rt1_0.is_active,
        rt1_0.qr_code_path,
        rt1_0.seating_capacity,
        rt1_0.status,
        rt1_0.table_number,
        rt1_0.tenant_id,
        rt1_0.updated_at 
    from
        public.restaurant_tables rt1_0
2025-12-04 16:08:19 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 16:08:19 [http-nio-8881-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{todaySales=0, activeOrders=0, pendingPayments=0, tablesOccupied=0}]
2025-12-04 16:08:19 [http-nio-8881-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 16:08:19 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/orders
2025-12-04 16:08:19 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.auth_provider,
        u1_0.created_at,
        u1_0.email,
        u1_0.google_id,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.refresh_token,
        u1_0.refresh_token_expiry,
        u1_0.role,
        u1_0.tenant_id,
        u1_0.updated_at 
    from
        public.users u1_0 
    where
        u1_0.email=?
2025-12-04 16:08:19 [http-nio-8881-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/orders
2025-12-04 16:08:19 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/orders", parameters={}
2025-12-04 16:08:19 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.restaurant.billing.controller.OrderController#getAllOrders()
2025-12-04 16:08:19 [http-nio-8881-exec-5] DEBUG c.r.b.security.TenantInterceptor - Setting tenant context for request: cc71d7e4-cf66-4d56-acbc-47bd417a1b63
2025-12-04 16:08:19 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        o1_0.id,
        o1_0.created_at,
        o1_0.created_by,
        o1_0.customer_name,
        o1_0.customer_phone,
        o1_0.device_id,
        o1_0.discount_amount,
        o1_0.is_deleted,
        o1_0.notes,
        o1_0.order_number,
        o1_0.order_status,
        o1_0.order_type,
        o1_0.service_charge,
        o1_0.subtotal,
        o1_0.synced_at,
        o1_0.table_id,
        o1_0.tax_amount,
        o1_0.tenant_id,
        o1_0.total_amount,
        o1_0.updated_at,
        o1_0.version 
    from
        public.orders o1_0 
    where
        o1_0.tenant_id=? 
        and o1_0.is_deleted=?
2025-12-04 16:08:19 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:19 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:19 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:19 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:19 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:19 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:19 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:19 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:19 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:19 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:19 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:19 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:19 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:19 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:19 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:19 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:19 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:19 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:19 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:19 [http-nio-8881-exec-5] DEBUG org.hibernate.SQL - 
    select
        i1_0.order_id,
        i1_0.id,
        i1_0.created_at,
        i1_0.item_name,
        i1_0.menu_item_id,
        i1_0.quantity,
        i1_0.special_instructions,
        i1_0.status,
        i1_0.total_price,
        i1_0.unit_price 
    from
        public.order_items i1_0 
    where
        i1_0.order_id=?
2025-12-04 16:08:19 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-12-04 16:08:19 [http-nio-8881-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[OrderDto(id=3d2cc165-482d-4290-b220-105d1ad18880, orderNumber=ORD1764763565538, tableId=null, table (truncated)...]
2025-12-04 16:08:19 [http-nio-8881-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-12-04 16:08:51 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-04 16:08:51 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-12-04 16:08:51 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
